<<<<<<< HEAD
"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var s=0;s<e.length;s++){var i=e[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,e,s){return e&&_defineProperties(t.prototype,e),s&&_defineProperties(t,s),t}$(document).on("click",".button--basket",function(){$(this).hasClass("animate")||($(this).addClass("animate"),$(this).addClass("button--check"),setTimeout(function(){$(this).removeClass("button--check"),$(this).removeClass("animate")}.bind(this),2e3))}),window.addEventListener("load",function(){$(".hr-sect").length&&$(".hr-pagination__step").click(function(){var t=$(this);if(!t.hasClass("is-active")){t.closest(".hr-sect").find(".hr-pagination__step").removeClass("is-active").removeClass("button"),t.addClass("is-active").addClass("button"),t.attr("data-index");var e=t.closest(".hr-sect").find(".hr-slider-slide");e.removeClass("is-active"),e.each(function(t,e){$(this).attr("data-index")==$(".hr-pagination__step.is-active").attr("data-index")&&$(this).addClass("is-active")})}})}),function(){var t=document.getElementById("menu-button");t.addEventListener("click",function(){t.classList.toggle("opened")}),window.onresize=function(){t.classList.remove("opened")},window.onscroll=function(){t.classList.remove("opened")}}(),function(){var t=function(){function a(t,e,s,i){if(_classCallCheck(this,a),void 0===t)return!1;this._self=t,this._title=this._self.querySelectorAll("."+e)[0],this._products=this._self.querySelectorAll("."+s)[0],this.preloader=this._self.querySelectorAll("."+i)[0]}return _createClass(a,[{key:"_cleanProducts",value:function(){this._products.innerHTML=""}},{key:"playPreloader",value:function(){this.preloader.classList.add("preloader--active")}},{key:"stopPreloader",value:function(){this.preloader.classList.remove("preloader--active")}},{key:"updateTitle",value:function(t){this._title.innerHTML=t,this._title.setAttribute("data-name",t)}},{key:"updateListProducts",value:function(t){this._products.innerHTML=t}},{key:"addProducts",value:function(t){this._products.insertAdjacentHTML("beforeend",t)}}]),a}(),e=function(){function i(t,e,s){return _classCallCheck(this,i),void 0!==t&&(void 0!==e&&(void 0!==s&&(this._containerBrands=t,this._brandItem=this._containerBrands.querySelectorAll(".catalog-nav__controls-link"),this._containerFilter=e,this._filterItem=this._containerFilter.querySelectorAll(".catalog-filter__col-btn"),this.searchItem=this._containerFilter.querySelectorAll(".catalog-filter__form")[0],this._activeClass="is-active",this._sortTypeAsc={class:"sort-down",dataSort:"asc"},this._sortTypeDesc={class:"sort-up",dataSort:"desc"},this._containerMore=s,this.timeOutAjax,void this.init())))}return _createClass(i,[{key:"_cleanClassFilterAll",value:function(){var s=this;this._filterItem.forEach(function(t){var e=t.closest(".catalog-filter__col");t.classList.remove(s._activeClass),t.classList.remove(s._sortTypeAsc.class),e.removeAttribute("data-sort")})}},{key:"_addClassFilter",value:function(t){var e=t.closest(".catalog-filter__col");console.log(t),t.classList.add(this._activeClass),t.classList.add(this._sortTypeAsc.class),e.setAttribute("data-sort",this._sortTypeAsc.dataSort)}},{key:"_toogleSort",value:function(t){var e=t.closest(".catalog-filter__col");t.classList.contains(this._sortTypeAsc.class)?(t.classList.remove(this._sortTypeAsc.class),t.classList.add(this._sortTypeDesc.class),e.setAttribute("data-sort",this._sortTypeDesc.dataSort)):(t.classList.remove(this._sortTypeDesc.class),t.classList.add(this._sortTypeAsc.class),e.setAttribute("data-sort",this._sortTypeAsc.dataSort))}},{key:"_selectBrand",value:function(t){t.classList.contains("is-active")||(this._brandItem.forEach(function(t){t.classList.remove("is-active")}),t.classList.add("is-active"))}},{key:"_queryFormation",value:function(t,e){clearTimeout(this.timeOutAjax);var s,i,a=[],o=this.searchItem.getElementsByTagName("input")[0];this._brandItem.forEach(function(t){t.classList.contains("is-active")&&(a.push("brand="+t.getAttribute("data-brand")),s=t.getAttribute("data-brand"))}),this._filterItem.forEach(function(t){var e=t.closest(".catalog-filter__col");t.classList.contains("is-active")&&(a.push("sort="+e.getAttribute("data-sort")),a.push("sortType="+e.getAttribute("data-filter")))}),""!==o.value&&a.push("search="+o.value),i="?"+a.join("&"),i=encodeURI(i),c.setHistory(i,s);var n=new l("test.json","get",t);void 0===e?n.send():(r.playPreloader(),this.timeOutAjax=setTimeout(function(){n.send()},e)),console.log(i)}},{key:"updateStateFilterFromUrl",value:function(e){var s=this;void 0!==e[0]?this._brandItem.forEach(function(t){t.getAttribute("data-brand")===e[0][1]&&s._selectBrand(t)}):this._selectBrand(this._brandItem[0]),void 0!==e[2]?this._filterItem.forEach(function(t){t.closest(".catalog-filter__col").getAttribute("data-filter")===e[2][1]&&(s._cleanClassFilterAll(),s._addClassFilter(t),t.closest(".catalog-filter__col").setAttribute("data-sort",e[1][1]),"asc"===e[1][1]?(t.classList.add(s._sortTypeAsc.class),t.classList.remove(s._sortTypeDesc.class)):(t.classList.remove(s._sortTypeAsc.class),t.classList.add(s._sortTypeDesc.class)))}):this._filterItem.forEach(function(t){"name"===t.closest(".catalog-filter__col").getAttribute("data-filter")&&(s._cleanClassFilterAll(),s._addClassFilter(t))}),void 0!==e[3]?(console.log(e[3][1]),s.searchItem.getElementsByTagName("input")[0].value=e[3][1]):s.searchItem.getElementsByTagName("input")[0].value=""}},{key:"init",value:function(){var e=this;this._filterItem.forEach(function(t){t.addEventListener("click",function(){t.classList.contains(e._activeClass)?e._toogleSort(this):(e._cleanClassFilterAll(),e._addClassFilter(this)),e._queryFormation(!0)})}),this._brandItem.forEach(function(t){t.addEventListener("click",function(t){t.preventDefault(),this.classList.contains("is-active")||(e._selectBrand(this),e._queryFormation(!0))})}),this.searchItem.getElementsByTagName("input")[0].addEventListener("input",function(){e._queryFormation(!0,1e3)}),this._containerMore.querySelectorAll(".catalog__more-button")[0].addEventListener("click",function(t){t.preventDefault(),e._queryFormation(!1)})}}]),i}(),s=function(){function t(){_classCallCheck(this,t),this._url,this._historyObj=window.history,this.init()}return _createClass(t,[{key:"setHistory",value:function(t,e){e===this._historyObj.state?this._historyObj.replaceState(e,e,t):this._historyObj.pushState(e,e,t)}},{key:"_readHistory",value:function(){var t=document.location.href,e=decodeURI(t).split("?"),s=[];void 0!==e[1]?(e[1].split("&").forEach(function(t){s.push(t.split("="))}),console.log(s),i.updateStateFilterFromUrl(s),new l("test.json","get",!0).send()):(i.updateStateFilterFromUrl([]),new l("test.json","get",!0).send())}},{key:"init",value:function(){window.addEventListener("popstate",this._readHistory)}}]),t}(),l=function(){function i(t,e,s){_classCallCheck(this,i),this._url=t,this._type=e,this._productUpdate=s,this.ajax=new XMLHttpRequest}return _createClass(i,[{key:"_progress",value:function(){r.playPreloader()}},{key:"_complete",value:function(){var t=JSON.parse(this.response);!0===productUpdate?(r.updateTitle(t.title),r.updateListProducts(t.elements)):r.addProducts(t.elements),r.stopPreloader(),console.log(t)}},{key:"_completeUpdatePrpoducts",value:function(){var t=JSON.parse(this.response);r.updateTitle(t.title),r.updateListProducts(t.elements),r.stopPreloader(),console.log(t)}},{key:"_completeAddProducts",value:function(){var t=JSON.parse(this.response);r.addProducts(t.elements),r.stopPreloader(),console.log(t)}},{key:"send",value:function(t){var e=this._productUpdate,s=this;this.ajax.addEventListener("progress",this._progress,!1),this.ajax.addEventListener("load",!0===e?s._completeUpdatePrpoducts:s._completeAddProducts,!1),"get"===this._type.toLowerCase()?(this.ajax.open(this._type,this._url),this.ajax.send(),console.log("get")):"post"===this._type.toLowerCase()?console.log("post"):console.log("Error")}}]),i}(),r=new t(document.querySelectorAll(".catalog")[0],"catalog__title","catalog__product","preloader"),i=new e(document.querySelectorAll(".catalog-nav__controls")[0],document.querySelectorAll(".catalog-filter")[0],document.querySelectorAll(".catalog__more")[0]),c=new s;window.filter=i}(),function(){var t=$("header"),e=$(".main-content"),s=t.height();$(window).on("load scroll",function(){$(this).scrollTop()>s?(t.addClass("fixed"),e.css({"padding-top":s})):(t.removeClass("fixed"),e.css({"padding-top":0}))})}(),$(".footer__col-title").on("click",function(t){t.preventDefault(),$(this).closest(".footer__col").find(".footer__col-list").slideToggle(300)}),window.addEventListener("load",function(){if($(".catalog-nav__controls").length){var t=function(){i=s.position().left,o=s.position().top,s.innerWidth(),s.innerHeight(),a.css({left:i,top:o,width:0,height:0})},e=$(".catalog-nav__controls-link"),s=($(".catalog-nav__controls-list"),$(".catalog-nav__controls-item"),$(".catalog-nav__controls-link.is-active")),a=$(".catalog-nav__hover"),i=s.position().left,o=s.position().top,n=(s.innerWidth(),s.innerHeight(),!1);e.hover(function(){var t=$(this).position().left,e=$(this).position().top,s=$(this).innerWidth(),i=$(this).innerHeight();a.css({left:t,top:e,width:s,height:i}),n=!1},function(){setTimeout(function(){n&&a.css({left:i,top:o,width:0,height:0})},1e3),n=!0}),$(window).resize(function(){t()}),t()}}),window.addEventListener("load",function(){$(".delivery__form-input").focusout(function(){""!==$(this).val()?$(this).parent().addClass("value"):$(this).parent().removeClass("value")})}),function(){var t=document.getElementById("scene");if(null!=t)new Parallax(t)}(),$(document).on("click",".slide-info__button",function(){$(this).closest(".slide-info").find(".slide-info__button").toggleClass("is-active"),$(this).closest(".slide-info").find(".slide-info__content").slideToggle(300)});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFkZFRvQmFza2V0LmpzIiwiYmFza2V0VGFicy5qcyIsImJ1cmdlci5qcyIsImNhdGFsb2dVcGRhdGVDbGFzcy5qcyIsImZpeGVkSGVhZGVyLmpzIiwiZm9vdGVyTWVudS5qcyIsImhvdmVyUm9sbGVyLmpzIiwibGFiZWxGb3JtLmpzIiwicGFyYWxsYXguanMiLCJzaG93TW9yZS5qcyJdLCJuYW1lcyI6WyIkIiwiZG9jdW1lbnQiLCJvbiIsInRoaXMiLCJoYXNDbGFzcyIsImFkZENsYXNzIiwic2V0VGltZW91dCIsInJlbW92ZUNsYXNzIiwiYmluZCIsIndpbmRvdyIsImFkZEV2ZW50TGlzdGVuZXIiLCJsZW5ndGgiLCJjbGljayIsInRoU3RlcCIsImNsb3Nlc3QiLCJmaW5kIiwiYXR0ciIsInNsaWRlclNsaWRlcyIsImVhY2giLCJwYWdpSW5kZXgiLCJtZW51QnRuIiwiZ2V0RWxlbWVudEJ5SWQiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJvbnJlc2l6ZSIsInJlbW92ZSIsIm9uc2Nyb2xsIiwiQ2F0YWxvZyIsInNlbGYiLCJ0aXRsZUNsYXNzIiwicHJvZHVjdHNDb250YWluZXJDbGFzcyIsInByb2R1Y3RzUHJlbG9hZGVyQ2xhc3MiLCJfY2xhc3NDYWxsQ2hlY2siLCJ1bmRlZmluZWQiLCJfc2VsZiIsIl90aXRsZSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJfcHJvZHVjdHMiLCJwcmVsb2FkZXIiLCJfY3JlYXRlQ2xhc3MiLCJrZXkiLCJ2YWx1ZSIsImlubmVySFRNTCIsImFkZCIsInRpdGxlIiwic2V0QXR0cmlidXRlIiwicHJvZHVjdHMiLCJpbnNlcnRBZGphY2VudEhUTUwiLCJGaWx0ZXIiLCJjb250YWluZXJCcmFuZHMiLCJjb250YWluZXJGaWx0ZXIiLCJjb250YWluZXJNb3JlIiwiX2NvbnRhaW5lckJyYW5kcyIsIl9icmFuZEl0ZW0iLCJfY29udGFpbmVyRmlsdGVyIiwiX2ZpbHRlckl0ZW0iLCJzZWFyY2hJdGVtIiwiX2FjdGl2ZUNsYXNzIiwiX3NvcnRUeXBlQXNjIiwiY2xhc3MiLCJkYXRhU29ydCIsIl9zb3J0VHlwZURlc2MiLCJfY29udGFpbmVyTW9yZSIsInRpbWVPdXRBamF4IiwiaW5pdCIsImZvckVhY2giLCJpdGVtIiwicGFyZW50IiwicmVtb3ZlQXR0cmlidXRlIiwiY29uc29sZSIsImxvZyIsImNvbnRhaW5zIiwicHJvZHVjdFVwZGF0ZSIsImRlbGF5IiwiY2xlYXJUaW1lb3V0IiwiYnJhbmQiLCJnZXRRdWVyeSIsImFycmF5UXVlcnkiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsInB1c2giLCJnZXRBdHRyaWJ1dGUiLCJqb2luIiwiZW5jb2RlVVJJIiwiaGlzdG9yeU9iaiIsInNldEhpc3RvcnkiLCJhamF4Q29ubmVjdCIsIkFqYXhHZXRQcm9kdWN0cyIsInNlbmQiLCJjYXRhbG9kVGVzdCIsInBsYXlQcmVsb2FkZXIiLCJhcnJheVJlc3VsdCIsIl9zZWxlY3RCcmFuZCIsIl9jbGVhbkNsYXNzRmlsdGVyQWxsIiwiX2FkZENsYXNzRmlsdGVyIiwiX3Rvb2dsZVNvcnQiLCJfcXVlcnlGb3JtYXRpb24iLCJldmVudCIsInByZXZlbnREZWZhdWx0IiwiSGlzdG9yeUNvbnJ0b2wiLCJfdXJsIiwiX2hpc3RvcnlPYmoiLCJoaXN0b3J5Iiwic3RhdGUiLCJyZXBsYWNlU3RhdGUiLCJwdXNoU3RhdGUiLCJ1cmwiLCJsb2NhdGlvbiIsImhyZWYiLCJhcnJheVVybCIsImRlY29kZVVSSSIsInNwbGl0IiwiZmlsdGVyIiwidXBkYXRlU3RhdGVGaWx0ZXJGcm9tVXJsIiwiX3JlYWRIaXN0b3J5IiwidHlwZSIsIl90eXBlIiwiX3Byb2R1Y3RVcGRhdGUiLCJhamF4IiwiWE1MSHR0cFJlcXVlc3QiLCJyZXN1bHQiLCJKU09OIiwicGFyc2UiLCJyZXNwb25zZSIsInVwZGF0ZVRpdGxlIiwidXBkYXRlTGlzdFByb2R1Y3RzIiwiZWxlbWVudHMiLCJhZGRQcm9kdWN0cyIsInN0b3BQcmVsb2FkZXIiLCJkYXRhIiwiX3Byb2dyZXNzIiwiX2NvbXBsZXRlVXBkYXRlUHJwb2R1Y3RzIiwiX2NvbXBsZXRlQWRkUHJvZHVjdHMiLCJ0b0xvd2VyQ2FzZSIsIm9wZW4iLCJoZWFkZXIiLCJjb250ZW50IiwiaGVhZGVySGVpZ2h0IiwiaGVpZ2h0Iiwic2Nyb2xsVG9wIiwiY3NzIiwicGFkZGluZy10b3AiLCJlIiwic2xpZGVUb2dnbGUiLCJyZXNpemVQb3MiLCJhY3RpdmVMaW5rUG9zTGVmdCIsImFjdGl2ZUxpbmsiLCJwb3NpdGlvbiIsImxlZnQiLCJhY3RpdmVMaW5rUG9zVG9wIiwidG9wIiwiaW5uZXJXaWR0aCIsImlubmVySGVpZ2h0IiwiaG92ZXJCb3giLCJ3aWR0aCIsIm1lbnVMaW5rIiwiY2hlY2siLCJob3ZlciIsIm5ld0xpbmtQb3NMZWZ0IiwibmV3TGlua1Bvc1RvcCIsIm5ld0xpbmtXaWR0aCIsIm5ld0xpbmtIZWlnaHQiLCJyZXNpemUiLCJmb2N1c291dCIsInZhbCIsInNjZW5lIiwiUGFyYWxsYXgiLCJ0b2dnbGVDbGFzcyJdLCJtYXBwaW5ncyI6Im1aQUNJQSxFQUFFQyxVQUFVQyxHQUFHLFFBQVMsa0JBQW1CLFdBQ2xDRixFQUFFRyxNQUFNQyxTQUFTLGFBQ2xCSixFQUFFRyxNQUFNRSxTQUFTLFdBQ2pCTCxFQUFFRyxNQUFNRSxTQUFTLGlCQUNqQkMsV0FBVyxXQUNQTixFQUFFRyxNQUFNSSxZQUFZLGlCQUNwQlAsRUFBRUcsTUFBTUksWUFBWSxZQUN0QkMsS0FBS0wsTUFBTyxRQ050Qk0sT0FBT0MsaUJBQWlCLE9BQVEsV0FFeEJWLEVBQUUsWUFBWVcsUUFFZFgsRUFBRSx3QkFBd0JZLE1BQU0sV0FDNUIsSUFBSUMsRUFBU2IsRUFBRUcsTUFDZixJQUFLVSxFQUFPVCxTQUFTLGFBQWMsQ0FDL0JTLEVBQU9DLFFBQVEsWUFBWUMsS0FBSyx3QkFBd0JSLFlBQVksYUFBYUEsWUFBWSxVQUM3Rk0sRUFBT1IsU0FBUyxhQUFhQSxTQUFTLFVBQ3RCUSxFQUFPRyxLQUFLLGNBQTVCLElBRUlDLEVBQWVKLEVBQU9DLFFBQVEsWUFBWUMsS0FBSyxvQkFDbkRF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V0csSUFJekNNLEdBSGtCVixFQUFXSyxhQUNWTCxFQUFXTSxlQUV0QixHQUNaRyxFQUFTRSxNQUNQLFdBQ0UsSUFBSUMsRUFBaUI3SixFQUFFRyxNQUFNK0ksV0FBV0MsS0FDcENXLEVBQWdCOUosRUFBRUcsTUFBTStJLFdBQVdHLElBQ25DVSxFQUFlL0osRUFBRUcsTUFBTW1KLGFBQ3ZCVSxFQUFnQmhLLEVBQUVHLE1BQU1vSixjQUM1QkMsRUFBU2IsSUFBSSxDQUFDUSxLQUFTVSxFQUFnQlIsSUFBUVMsRUFBZUwsTUFBVU0sRUFBY3RCLE9BQVd1QixJQUNqR0wsR0FBUSxHQUVWLFdBQ0VySixXQUFXLFdBQ0xxSixHQUNGSCxFQUFTYixJQUFJLENBQUNRLEtBQVNILEVBQW1CSyxJQUFRRCxFQUFrQkssTUFBVSxFQUFHaEIsT0FBVyxLQUU3RixLQUNIa0IsR0FBUSxJQWFaM0osRUFBRVMsUUFBUXdKLE9BQU8sV0FDYmxCLE1BRUpBLE9DL0NSdEksT0FBT0MsaUJBQWlCLE9BQVEsV0FFNUJWLEVBQUUseUJBQXlCa0ssU0FBUyxXQUNaLEtBQWxCbEssRUFBRUcsTUFBTWdLLE1BQ1ZuSyxFQUFFRyxNQUFNZ0UsU0FBUzlELFNBQVMsU0FHMUJMLEVBQUVHLE1BQU1nRSxTQUFTNUQsWUFBWSxhQ1R4QyxXQUVHLElBQUk2SixFQUFRbkssU0FBU29CLGVBQWUsU0FDcEMsR0FBYVksTUFBVG1JLEVBQ3VCLElBQUlDLFNBQVNELEdBSjNDLEdDQ0dwSyxFQUFFQyxVQUFVQyxHQUFHLFFBQVMsc0JBQXVCLFdBQzNDRixFQUFFRyxNQUFNVyxRQUFRLGVBQWVDLEtBQUssdUJBQXVCdUosWUFBWSxhQUN2RXRLLEVBQUVHLE1BQU1XLFFBQVEsZUFBZUMsS0FBSyx3QkFBd0IrSCxZQUFZIiwiZmlsZSI6Im1haW4ubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiOyhmdW5jdGlvbigpIHtcclxuICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcuYnV0dG9uLS1iYXNrZXQnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICBpZiAoISQodGhpcykuaGFzQ2xhc3MoJ2FuaW1hdGUnKSkge1xyXG4gICAgICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCdhbmltYXRlJyk7XHJcbiAgICAgICAgICAgICQodGhpcykuYWRkQ2xhc3MoXCJidXR0b24tLWNoZWNrXCIpO1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcyhcImJ1dHRvbi0tY2hlY2tcIik7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCdhbmltYXRlJyk7XHJcbiAgICAgICAgICAgIH0uYmluZCh0aGlzKSwgMjAwMCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn0pKCk7XHJcbiIsIjsoZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgaWYgKCQoJy5oci1zZWN0JykubGVuZ3RoKSB7XHJcblxyXG4gICAgICAgICAgICAkKFwiLmhyLXBhZ2luYXRpb25fX3N0ZXBcIikuY2xpY2soZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdGhTdGVwID0gJCh0aGlzKTtcclxuICAgICAgICAgICAgICAgIGlmICghdGhTdGVwLmhhc0NsYXNzKFwiaXMtYWN0aXZlXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhTdGVwLmNsb3Nlc3QoJy5oci1zZWN0JykuZmluZChcIi5oci1wYWdpbmF0aW9uX19zdGVwXCIpLnJlbW92ZUNsYXNzKFwiaXMtYWN0aXZlXCIpLnJlbW92ZUNsYXNzKFwiYnV0dG9uXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoU3RlcC5hZGRDbGFzcyhcImlzLWFjdGl2ZVwiKS5hZGRDbGFzcyhcImJ1dHRvblwiKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcGFnaUluZGV4ID0gdGhTdGVwLmF0dHIoXCJkYXRhLWluZGV4XCIpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgc2xpZGVyU2xpZGVzID0gdGhTdGVwLmNsb3Nlc3QoXCIuaHItc2VjdFwiKS5maW5kKFwiLmhyLXNsaWRlci1zbGlkZVwiKTtcclxuICAgICAgICAgICAgICAgICAgICBzbGlkZXJTbGlkZXMucmVtb3ZlQ2xhc3MoXCJpcy1hY3RpdmVcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgc2xpZGVyU2xpZGVzLmVhY2goZnVuY3Rpb24ocGFnaUluZGV4LCB0aFN0ZXApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCQodGhpcykuYXR0cihcImRhdGEtaW5kZXhcIikgPT0gJChcIi5oci1wYWdpbmF0aW9uX19zdGVwLmlzLWFjdGl2ZVwiKS5hdHRyKFwiZGF0YS1pbmRleFwiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcyhcImlzLWFjdGl2ZVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgIH0pO1xyXG5cclxufSkoKTtcclxuIiwiOyhmdW5jdGlvbigpIHtcclxuICAgIGxldCBtZW51QnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21lbnUtYnV0dG9uJyk7XHJcblxyXG4gICAgbWVudUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIG1lbnVCdG4uY2xhc3NMaXN0LnRvZ2dsZSgnb3BlbmVkJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB3aW5kb3cub25yZXNpemUgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICBtZW51QnRuLmNsYXNzTGlzdC5yZW1vdmUoJ29wZW5lZCcpO1xyXG4gICAgfVxyXG4gICAgd2luZG93Lm9uc2Nyb2xsID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgbWVudUJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdvcGVuZWQnKTtcclxuICAgIH1cclxufSkoKTtcclxuIiwiOyhmdW5jdGlvbigpe1xyXG5cclxuICAgIGNsYXNzIENhdGFsb2cge1xyXG4gICAgICAgIGNvbnN0cnVjdG9yKHNlbGYsIHRpdGxlQ2xhc3MsIHByb2R1Y3RzQ29udGFpbmVyQ2xhc3MsIHByb2R1Y3RzUHJlbG9hZGVyQ2xhc3Mpe1xyXG4gICAgICAgICAgICBpZiAoc2VsZiA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5fc2VsZiA9IHNlbGY7XHJcbiAgICAgICAgICAgIHRoaXMuX3RpdGxlID0gdGhpcy5fc2VsZi5xdWVyeVNlbGVjdG9yQWxsKFwiLlwiICsgdGl0bGVDbGFzcylbMF07XHJcbiAgICAgICAgICAgIHRoaXMuX3Byb2R1Y3RzID0gdGhpcy5fc2VsZi5xdWVyeVNlbGVjdG9yQWxsKFwiLlwiICsgcHJvZHVjdHNDb250YWluZXJDbGFzcylbMF07XHJcbiAgICAgICAgICAgIHRoaXMucHJlbG9hZGVyID0gdGhpcy5fc2VsZi5xdWVyeVNlbGVjdG9yQWxsKFwiLlwiICsgcHJvZHVjdHNQcmVsb2FkZXJDbGFzcylbMF07XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgX2NsZWFuUHJvZHVjdHMoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3Byb2R1Y3RzLmlubmVySFRNTCA9IFwiXCI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwbGF5UHJlbG9hZGVyKCkge1xyXG4gICAgICAgICAgICB0aGlzLnByZWxvYWRlci5jbGFzc0xpc3QuYWRkKFwicHJlbG9hZGVyLS1hY3RpdmVcIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdG9wUHJlbG9hZGVyKCkge1xyXG4gICAgICAgICAgICB0aGlzLnByZWxvYWRlci5jbGFzc0xpc3QucmVtb3ZlKFwicHJlbG9hZGVyLS1hY3RpdmVcIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB1cGRhdGVUaXRsZSh0aXRsZSkge1xyXG4gICAgICAgICAgICB0aGlzLl90aXRsZS5pbm5lckhUTUwgPSB0aXRsZTtcclxuICAgICAgICAgICAgdGhpcy5fdGl0bGUuc2V0QXR0cmlidXRlKFwiZGF0YS1uYW1lXCIsIHRpdGxlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHVwZGF0ZUxpc3RQcm9kdWN0cyhwcm9kdWN0cykge1xyXG4gICAgICAgICAgICB0aGlzLl9wcm9kdWN0cy5pbm5lckhUTUwgPSBwcm9kdWN0cztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGFkZFByb2R1Y3RzKHByb2R1Y3RzKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3Byb2R1Y3RzLmluc2VydEFkamFjZW50SFRNTChcImJlZm9yZWVuZFwiLCBwcm9kdWN0cyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNsYXNzIEZpbHRlciB7XHJcbiAgICAgICAgY29uc3RydWN0b3IoY29udGFpbmVyQnJhbmRzLCBjb250YWluZXJGaWx0ZXIsIGNvbnRhaW5lck1vcmUpIHtcclxuICAgICAgICAgICAgaWYgKGNvbnRhaW5lckJyYW5kcyA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGNvbnRhaW5lckZpbHRlciA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGNvbnRhaW5lck1vcmUgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLl9jb250YWluZXJCcmFuZHMgPSBjb250YWluZXJCcmFuZHM7XHJcbiAgICAgICAgICAgIHRoaXMuX2JyYW5kSXRlbSA9IHRoaXMuX2NvbnRhaW5lckJyYW5kcy5xdWVyeVNlbGVjdG9yQWxsKFwiLmNhdGFsb2ctbmF2X19jb250cm9scy1saW5rXCIpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5fY29udGFpbmVyRmlsdGVyID0gY29udGFpbmVyRmlsdGVyO1xyXG4gICAgICAgICAgICB0aGlzLl9maWx0ZXJJdGVtID0gdGhpcy5fY29udGFpbmVyRmlsdGVyLnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY2F0YWxvZy1maWx0ZXJfX2NvbC1idG5cIik7XHJcbiAgICAgICAgICAgIHRoaXMuc2VhcmNoSXRlbSA9IHRoaXMuX2NvbnRhaW5lckZpbHRlci5xdWVyeVNlbGVjdG9yQWxsKFwiLmNhdGFsb2ctZmlsdGVyX19mb3JtXCIpWzBdO1xyXG4gICAgICAgICAgICB0aGlzLl9hY3RpdmVDbGFzcyA9IFwiaXMtYWN0aXZlXCI7XHJcbiAgICAgICAgICAgIHRoaXMuX3NvcnRUeXBlQXNjID0ge1xyXG4gICAgICAgICAgICAgICAgY2xhc3M6IFwic29ydC1kb3duXCIsXHJcbiAgICAgICAgICAgICAgICBkYXRhU29ydDogXCJhc2NcIlxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB0aGlzLl9zb3J0VHlwZURlc2MgPSB7XHJcbiAgICAgICAgICAgICAgICBjbGFzczogXCJzb3J0LXVwXCIsXHJcbiAgICAgICAgICAgICAgICBkYXRhU29ydDogXCJkZXNjXCJcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5fY29udGFpbmVyTW9yZSA9IGNvbnRhaW5lck1vcmU7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnRpbWVPdXRBamF4O1xyXG4gICAgICAgICAgICB0aGlzLmluaXQoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIF9jbGVhbkNsYXNzRmlsdGVyQWxsKCkge1xyXG4gICAgICAgICAgICBsZXQgc2VsZiA9IHRoaXM7XHJcblxyXG4gICAgICAgICAgICB0aGlzLl9maWx0ZXJJdGVtLmZvckVhY2goZnVuY3Rpb24oaXRlbSl7XHJcbiAgICAgICAgICAgICAgICBsZXQgcGFyZW50ID0gaXRlbS5jbG9zZXN0KFwiLmNhdGFsb2ctZmlsdGVyX19jb2xcIik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGl0ZW0uY2xhc3NMaXN0LnJlbW92ZShzZWxmLl9hY3RpdmVDbGFzcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbS5jbGFzc0xpc3QucmVtb3ZlKHNlbGYuX3NvcnRUeXBlQXNjLmNsYXNzKTtcclxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQucmVtb3ZlQXR0cmlidXRlKFwiZGF0YS1zb3J0XCIpO1xyXG5cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBfYWRkQ2xhc3NGaWx0ZXIoaXRlbSkge1xyXG4gICAgICAgICAgICBsZXQgcGFyZW50ID0gaXRlbS5jbG9zZXN0KFwiLmNhdGFsb2ctZmlsdGVyX19jb2xcIik7XHJcblxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhpdGVtKTtcclxuXHJcbiAgICAgICAgICAgIGl0ZW0uY2xhc3NMaXN0LmFkZCh0aGlzLl9hY3RpdmVDbGFzcyk7XHJcbiAgICAgICAgICAgIGl0ZW0uY2xhc3NMaXN0LmFkZCh0aGlzLl9zb3J0VHlwZUFzYy5jbGFzcyk7XHJcblxyXG4gICAgICAgICAgICBwYXJlbnQuc2V0QXR0cmlidXRlKFwiZGF0YS1zb3J0XCIsIHRoaXMuX3NvcnRUeXBlQXNjLmRhdGFTb3J0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIF90b29nbGVTb3J0KGl0ZW0pIHtcclxuICAgICAgICAgICAgbGV0IHBhcmVudCA9IGl0ZW0uY2xvc2VzdChcIi5jYXRhbG9nLWZpbHRlcl9fY29sXCIpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGl0ZW0uY2xhc3NMaXN0LmNvbnRhaW5zKHRoaXMuX3NvcnRUeXBlQXNjLmNsYXNzKSkge1xyXG4gICAgICAgICAgICAgICAgaXRlbS5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX3NvcnRUeXBlQXNjLmNsYXNzKTtcclxuICAgICAgICAgICAgICAgIGl0ZW0uY2xhc3NMaXN0LmFkZCh0aGlzLl9zb3J0VHlwZURlc2MuY2xhc3MpO1xyXG5cclxuICAgICAgICAgICAgICAgIHBhcmVudC5zZXRBdHRyaWJ1dGUoXCJkYXRhLXNvcnRcIiwgdGhpcy5fc29ydFR5cGVEZXNjLmRhdGFTb3J0KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGl0ZW0uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9zb3J0VHlwZURlc2MuY2xhc3MpO1xyXG4gICAgICAgICAgICAgICAgaXRlbS5jbGFzc0xpc3QuYWRkKHRoaXMuX3NvcnRUeXBlQXNjLmNsYXNzKTtcclxuXHJcbiAgICAgICAgICAgICAgICBwYXJlbnQuc2V0QXR0cmlidXRlKFwiZGF0YS1zb3J0XCIsIHRoaXMuX3NvcnRUeXBlQXNjLmRhdGFTb3J0KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIF9zZWxlY3RCcmFuZChpdGVtKSB7XHJcbiAgICAgICAgICAgIGlmICghaXRlbS5jbGFzc0xpc3QuY29udGFpbnMoXCJpcy1hY3RpdmVcIikpe1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fYnJhbmRJdGVtLmZvckVhY2goZnVuY3Rpb24oaXRlbSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGl0ZW0uY2xhc3NMaXN0LnJlbW92ZShcImlzLWFjdGl2ZVwiKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgaXRlbS5jbGFzc0xpc3QuYWRkKFwiaXMtYWN0aXZlXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBfcXVlcnlGb3JtYXRpb24ocHJvZHVjdFVwZGF0ZSwgZGVsYXkpIHtcclxuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMudGltZU91dEFqYXgpO1xyXG4gICAgICAgICAgICAvL9Cc0LXRgtC+0LQg0YTQvtGA0LzQuNGA0L7QstCw0L3QuNGPIGdldCDQt9Cw0L/RgNC+0YHQsFxyXG4gICAgICAgICAgICBsZXQgYXJyYXlRdWVyeSA9IFtdLFxyXG4gICAgICAgICAgICAgICAgc2VhcmNoSXRlbSA9IHRoaXMuc2VhcmNoSXRlbS5nZXRFbGVtZW50c0J5VGFnTmFtZShcImlucHV0XCIpWzBdLFxyXG4gICAgICAgICAgICAgICAgYnJhbmQsXHJcbiAgICAgICAgICAgICAgICBnZXRRdWVyeTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX2JyYW5kSXRlbS5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pIHtcclxuICAgICAgICAgICAgICAgIGlmIChpdGVtLmNsYXNzTGlzdC5jb250YWlucyhcImlzLWFjdGl2ZVwiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFycmF5UXVlcnkucHVzaChcImJyYW5kPVwiICsgaXRlbS5nZXRBdHRyaWJ1dGUoXCJkYXRhLWJyYW5kXCIpKTtcclxuICAgICAgICAgICAgICAgICAgICBicmFuZCA9IGl0ZW0uZ2V0QXR0cmlidXRlKFwiZGF0YS1icmFuZFwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLl9maWx0ZXJJdGVtLmZvckVhY2goZnVuY3Rpb24oaXRlbSkge1xyXG4gICAgICAgICAgICAgICAgbGV0IHBhcmVudCA9IGl0ZW0uY2xvc2VzdChcIi5jYXRhbG9nLWZpbHRlcl9fY29sXCIpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGl0ZW0uY2xhc3NMaXN0LmNvbnRhaW5zKFwiaXMtYWN0aXZlXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXJyYXlRdWVyeS5wdXNoKFwic29ydD1cIiArIHBhcmVudC5nZXRBdHRyaWJ1dGUoXCJkYXRhLXNvcnRcIikpO1xyXG4gICAgICAgICAgICAgICAgICAgIGFycmF5UXVlcnkucHVzaChcInNvcnRUeXBlPVwiICsgcGFyZW50LmdldEF0dHJpYnV0ZShcImRhdGEtZmlsdGVyXCIpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBpZiAoc2VhcmNoSXRlbS52YWx1ZSAhPT0gXCJcIikge1xyXG4gICAgICAgICAgICAgICAgYXJyYXlRdWVyeS5wdXNoKFwic2VhcmNoPVwiICsgc2VhcmNoSXRlbS52YWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGdldFF1ZXJ5ID0gXCI/XCIgKyBhcnJheVF1ZXJ5LmpvaW4oXCImXCIpO1xyXG5cclxuICAgICAgICAgICAgZ2V0UXVlcnkgPSBlbmNvZGVVUkkoZ2V0UXVlcnkpO1xyXG5cclxuICAgICAgICAgICAgaGlzdG9yeU9iai5zZXRIaXN0b3J5KGdldFF1ZXJ5LCBicmFuZCk7XHJcblxyXG4gICAgICAgICAgICAvL1RvZG86INC30LTQtdGB0Ywg0L3QsNC00L4g0LHRg9C00LXRgiDRgdC00LXQu9Cw0YLRjCDQsNC60YLRg9Cw0LvRjNC90YvQuSDRg9GA0Lsg0LTQu9GPIGFqYXgg0LfQsNC/0YDQvtGB0L7QslxyXG4gICAgICAgICAgICAvLyDQn9GA0LjQvNC10YA6IGxldCBhamF4Q29ubmVjdCA9IG5ldyBBamF4R2V0UHJvZHVjdHMod2luZG93LmxvY2F0aW9uLmhyZWYgKyBnZXRRdWVyeSwgXCJnZXRcIiwgdHJ1ZSk7XHJcbiAgICAgICAgICAgIGxldCBhamF4Q29ubmVjdCA9IG5ldyBBamF4R2V0UHJvZHVjdHMoXCJ0ZXN0Lmpzb25cIiwgXCJnZXRcIiwgcHJvZHVjdFVwZGF0ZSk7XHJcblxyXG4gICAgICAgICAgICBpZiAoZGVsYXkgPT09IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgICAgICAgICBhamF4Q29ubmVjdC5zZW5kKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjYXRhbG9kVGVzdC5wbGF5UHJlbG9hZGVyKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRpbWVPdXRBamF4ID0gc2V0VGltZW91dChmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgICAgIGFqYXhDb25uZWN0LnNlbmQoKTtcclxuICAgICAgICAgICAgICAgIH0sIGRlbGF5KVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhnZXRRdWVyeSk7XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdXBkYXRlU3RhdGVGaWx0ZXJGcm9tVXJsKGFycmF5UmVzdWx0KSB7XHJcbiAgICAgICAgICAgIC8vIHVwZGF0ZVN0YXRlRmlsdGVyRnJvbVVybChhcnJheVJlc3VsdFswXVsxXSwgYXJyYXlSZXN1bHRbMl1bMV0sIGFycmF5UmVzdWx0WzFdWzFdLCBhcnJheVJlc3VsdFszXVsxXSlcclxuICAgICAgICAgICAgbGV0IHNlbGYgPSB0aGlzO1xyXG5cclxuXHJcbiAgICAgICAgICAgIGlmIChhcnJheVJlc3VsdFswXSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9icmFuZEl0ZW0uZm9yRWFjaChmdW5jdGlvbihpdGVtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW0uZ2V0QXR0cmlidXRlKFwiZGF0YS1icmFuZFwiKSA9PT0gYXJyYXlSZXN1bHRbMF1bMV0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fc2VsZWN0QnJhbmQoaXRlbSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3NlbGVjdEJyYW5kKHRoaXMuX2JyYW5kSXRlbVswXSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChhcnJheVJlc3VsdFsyXSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9maWx0ZXJJdGVtLmZvckVhY2goZnVuY3Rpb24oaXRlbSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpdGVtLmNsb3Nlc3QoXCIuY2F0YWxvZy1maWx0ZXJfX2NvbFwiKS5nZXRBdHRyaWJ1dGUoXCJkYXRhLWZpbHRlclwiKSA9PT0gYXJyYXlSZXN1bHRbMl1bMV0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fY2xlYW5DbGFzc0ZpbHRlckFsbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9hZGRDbGFzc0ZpbHRlcihpdGVtKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5jbG9zZXN0KFwiLmNhdGFsb2ctZmlsdGVyX19jb2xcIikuc2V0QXR0cmlidXRlKFwiZGF0YS1zb3J0XCIsIGFycmF5UmVzdWx0WzFdWzFdKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhcnJheVJlc3VsdFsxXVsxXSA9PT0gXCJhc2NcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5jbGFzc0xpc3QuYWRkKHNlbGYuX3NvcnRUeXBlQXNjLmNsYXNzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0uY2xhc3NMaXN0LnJlbW92ZShzZWxmLl9zb3J0VHlwZURlc2MuY2xhc3MpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5jbGFzc0xpc3QucmVtb3ZlKHNlbGYuX3NvcnRUeXBlQXNjLmNsYXNzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0uY2xhc3NMaXN0LmFkZChzZWxmLl9zb3J0VHlwZURlc2MuY2xhc3MpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2ZpbHRlckl0ZW0uZm9yRWFjaChmdW5jdGlvbihpdGVtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW0uY2xvc2VzdChcIi5jYXRhbG9nLWZpbHRlcl9fY29sXCIpLmdldEF0dHJpYnV0ZShcImRhdGEtZmlsdGVyXCIpID09PSBcIm5hbWVcIil7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX2NsZWFuQ2xhc3NGaWx0ZXJBbGwoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fYWRkQ2xhc3NGaWx0ZXIoaXRlbSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChhcnJheVJlc3VsdFszXSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhhcnJheVJlc3VsdFszXVsxXSk7XHJcbiAgICAgICAgICAgICAgICBzZWxmLnNlYXJjaEl0ZW0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJpbnB1dFwiKVswXS52YWx1ZSA9IGFycmF5UmVzdWx0WzNdWzFdO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgc2VsZi5zZWFyY2hJdGVtLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaW5wdXRcIilbMF0udmFsdWUgPSBcIlwiO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaW5pdCgpIHtcclxuICAgICAgICAgICAgbGV0IHNlbGYgPSB0aGlzO1xyXG4gICAgICAgICAgICB0aGlzLl9maWx0ZXJJdGVtLmZvckVhY2goZnVuY3Rpb24oaXRlbSl7XHJcbiAgICAgICAgICAgICAgICBpdGVtLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbS5jbGFzc0xpc3QuY29udGFpbnMoc2VsZi5fYWN0aXZlQ2xhc3MpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX3Rvb2dsZVNvcnQodGhpcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8v0JLRi9C30L7QsiDQvNC10YLQvtC00LAg0YTQvtGA0LzQuNGA0L7QstCw0L3QuNGPIEdldCDQt9Cw0L/RgNC+0YHQsFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9xdWVyeUZvcm1hdGlvbih0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9jbGVhbkNsYXNzRmlsdGVyQWxsKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX2FkZENsYXNzRmlsdGVyKHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL9CS0YvQt9C+0LIg0LzQtdGC0L7QtNCwINGE0L7RgNC80LjRgNC+0LLQsNC90LjRjyBHZXQg0LfQsNC/0YDQvtGB0LBcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fcXVlcnlGb3JtYXRpb24odHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5fYnJhbmRJdGVtLmZvckVhY2goZnVuY3Rpb24oaXRlbSkge1xyXG4gICAgICAgICAgICAgICAgaXRlbS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24oZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5jbGFzc0xpc3QuY29udGFpbnMoXCJpcy1hY3RpdmVcIikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fc2VsZWN0QnJhbmQodGhpcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8v0JLRi9C30L7QsiDQvNC10YLQvtC00LAg0YTQvtGA0LzQuNGA0L7QstCw0L3QuNGPIEdldCDQt9Cw0L/RgNC+0YHQsFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9xdWVyeUZvcm1hdGlvbih0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KVxyXG5cclxuICAgICAgICAgICAgdGhpcy5zZWFyY2hJdGVtLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaW5wdXRcIilbMF0uYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgLy/QktGL0LfQvtCyINC80LXRgtC+0LTQsCDRhNC+0YDQvNC40YDQvtCy0LDQvdC40Y8gR2V0INC30LDQv9GA0L7RgdCwXHJcbiAgICAgICAgICAgICAgICBzZWxmLl9xdWVyeUZvcm1hdGlvbih0cnVlLCAxMDAwKTtcclxuICAgICAgICAgICAgfSlcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX2NvbnRhaW5lck1vcmUucXVlcnlTZWxlY3RvckFsbChcIi5jYXRhbG9nX19tb3JlLWJ1dHRvblwiKVswXS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24oZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICBzZWxmLl9xdWVyeUZvcm1hdGlvbihmYWxzZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjbGFzcyBIaXN0b3J5Q29ucnRvbCB7XHJcbiAgICAgICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3VybDtcclxuICAgICAgICAgICAgdGhpcy5faGlzdG9yeU9iaiA9IHdpbmRvdy5oaXN0b3J5O1xyXG5cclxuICAgICAgICAgICAgdGhpcy5pbml0KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzZXRIaXN0b3J5KGdldFF1ZXJ5LCBicmFuZCkge1xyXG4gICAgICAgICAgICBpZiAoYnJhbmQgPT09IHRoaXMuX2hpc3RvcnlPYmouc3RhdGUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2hpc3RvcnlPYmoucmVwbGFjZVN0YXRlKGJyYW5kLCBicmFuZCwgZ2V0UXVlcnkpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5faGlzdG9yeU9iai5wdXNoU3RhdGUoYnJhbmQsIGJyYW5kLCBnZXRRdWVyeSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIF9yZWFkSGlzdG9yeSgpIHtcclxuICAgICAgICAgICAgbGV0IHVybCA9IGRvY3VtZW50LmxvY2F0aW9uLmhyZWYsXHJcbiAgICAgICAgICAgICAgICBhcnJheVVybCA9IGRlY29kZVVSSSh1cmwpLnNwbGl0KFwiP1wiKSxcclxuICAgICAgICAgICAgICAgIGFycmF5R2V0ID0gW10sXHJcbiAgICAgICAgICAgICAgICBhcnJheVJlc3VsdCA9IFtdO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChhcnJheVVybFsxXSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXJyYXlHZXQgPSBhcnJheVVybFsxXS5zcGxpdChcIiZcIik7XHJcblxyXG5cclxuICAgICAgICAgICAgICAgICAgICBhcnJheUdldC5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXJyYXlSZXN1bHQucHVzaChpdGVtLnNwbGl0KFwiPVwiKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYXJyYXlSZXN1bHQpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBmaWx0ZXIudXBkYXRlU3RhdGVGaWx0ZXJGcm9tVXJsKGFycmF5UmVzdWx0KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy9Ub2RvOiDQt9C00LXRgdGMINC90LDQtNC+INCx0YPQtNC10YIg0YHQtNC10LvQsNGC0Ywg0LDQutGC0YPQsNC70YzQvdGL0Lkg0YPRgNC7INC00LvRjyBhamF4INC30LDQv9GA0L7RgdC+0LJcclxuICAgICAgICAgICAgICAgICAgICAvLyDQn9GA0LjQvNC10YA6IGxldCBhamF4Q29ubmVjdCA9IG5ldyBBamF4R2V0UHJvZHVjdHModXJsLCBcImdldFwiLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgYWpheENvbm5lY3QgPSBuZXcgQWpheEdldFByb2R1Y3RzKFwidGVzdC5qc29uXCIsIFwiZ2V0XCIsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGFqYXhDb25uZWN0LnNlbmQoKTtcclxuXHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBmaWx0ZXIudXBkYXRlU3RhdGVGaWx0ZXJGcm9tVXJsKFtdKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy9Ub2RvOiDQt9C00LXRgdGMINC90LDQtNC+INCx0YPQtNC10YIg0YHQtNC10LvQsNGC0Ywg0LDQutGC0YPQsNC70YzQvdGL0Lkg0YPRgNC7INC00LvRjyBhamF4INC30LDQv9GA0L7RgdC+0LJcclxuICAgICAgICAgICAgICAgICAgICAvLyDQn9GA0LjQvNC10YA6IGxldCBhamF4Q29ubmVjdCA9IG5ldyBBamF4R2V0UHJvZHVjdHModXJsLCBcImdldFwiLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgYWpheENvbm5lY3QgPSBuZXcgQWpheEdldFByb2R1Y3RzKFwidGVzdC5qc29uXCIsIFwiZ2V0XCIsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGFqYXhDb25uZWN0LnNlbmQoKTtcclxuXHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGluaXQoKSB7XHJcbiAgICAgICAgICAgIGxldCBzZWxmID0gdGhpcztcclxuXHJcbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicG9wc3RhdGVcIiwgc2VsZi5fcmVhZEhpc3RvcnkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcblxyXG4gICAgY2xhc3MgQWpheEdldFByb2R1Y3RzIHtcclxuICAgICAgICBjb25zdHJ1Y3Rvcih1cmwsIHR5cGUsIHByb2R1Y3RVcGRhdGUpIHtcclxuICAgICAgICAgICAgdGhpcy5fdXJsID0gdXJsO1xyXG4gICAgICAgICAgICB0aGlzLl90eXBlID0gdHlwZTtcclxuICAgICAgICAgICAgdGhpcy5fcHJvZHVjdFVwZGF0ZSA9IHByb2R1Y3RVcGRhdGU7XHJcbiAgICAgICAgICAgIHRoaXMuYWpheCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgX3Byb2dyZXNzKCkge1xyXG4gICAgICAgICAgICBjYXRhbG9kVGVzdC5wbGF5UHJlbG9hZGVyKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBfY29tcGxldGUoKSB7XHJcbiAgICAgICAgICAgIGxldCByZXN1bHQgPSBKU09OLnBhcnNlKHRoaXMucmVzcG9uc2UpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHByb2R1Y3RVcGRhdGUgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgIGNhdGFsb2RUZXN0LnVwZGF0ZVRpdGxlKHJlc3VsdC50aXRsZSk7XHJcbiAgICAgICAgICAgICAgICBjYXRhbG9kVGVzdC51cGRhdGVMaXN0UHJvZHVjdHMocmVzdWx0LmVsZW1lbnRzKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNhdGFsb2RUZXN0LmFkZFByb2R1Y3RzKHJlc3VsdC5lbGVtZW50cyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNhdGFsb2RUZXN0LnN0b3BQcmVsb2FkZXIoKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdCk7XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgX2NvbXBsZXRlVXBkYXRlUHJwb2R1Y3RzKCkge1xyXG4gICAgICAgICAgICBsZXQgcmVzdWx0ID0gSlNPTi5wYXJzZSh0aGlzLnJlc3BvbnNlKTtcclxuXHJcbiAgICAgICAgICAgIGNhdGFsb2RUZXN0LnVwZGF0ZVRpdGxlKHJlc3VsdC50aXRsZSk7XHJcbiAgICAgICAgICAgIGNhdGFsb2RUZXN0LnVwZGF0ZUxpc3RQcm9kdWN0cyhyZXN1bHQuZWxlbWVudHMpO1xyXG5cclxuICAgICAgICAgICAgY2F0YWxvZFRlc3Quc3RvcFByZWxvYWRlcigpO1xyXG5cclxuICAgICAgICAgICAgY29uc29sZS5sb2cocmVzdWx0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIF9jb21wbGV0ZUFkZFByb2R1Y3RzKCkge1xyXG4gICAgICAgICAgICBsZXQgcmVzdWx0ID0gSlNPTi5wYXJzZSh0aGlzLnJlc3BvbnNlKTtcclxuXHJcbiAgICAgICAgICAgIGNhdGFsb2RUZXN0LmFkZFByb2R1Y3RzKHJlc3VsdC5lbGVtZW50cyk7XHJcblxyXG4gICAgICAgICAgICBjYXRhbG9kVGVzdC5zdG9wUHJlbG9hZGVyKCk7XHJcblxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHQpO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIHNlbmQoZGF0YSkge1xyXG4gICAgICAgICAgICBsZXQgcHJvZHVjdFVwZGF0ZSA9IHRoaXMuX3Byb2R1Y3RVcGRhdGUsXHJcbiAgICAgICAgICAgICAgICBzZWxmID0gdGhpcztcclxuXHJcbiAgICAgICAgICAgIHRoaXMuYWpheC5hZGRFdmVudExpc3RlbmVyKFwicHJvZ3Jlc3NcIiwgdGhpcy5fcHJvZ3Jlc3MsIGZhbHNlKTtcclxuICAgICAgICAgICAgdGhpcy5hamF4LmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsIChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIGlmIChwcm9kdWN0VXBkYXRlID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNlbGYuX2NvbXBsZXRlVXBkYXRlUHJwb2R1Y3RzO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2VsZi5fY29tcGxldGVBZGRQcm9kdWN0cztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSkoKSwgZmFsc2UpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuX3R5cGUudG9Mb3dlckNhc2UoKSA9PT0gXCJnZXRcIikge1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuYWpheC5vcGVuKHRoaXMuX3R5cGUsIHRoaXMuX3VybCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFqYXguc2VuZCgpO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiZ2V0XCIpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuX3R5cGUudG9Mb3dlckNhc2UoKSA9PT0gXCJwb3N0XCIpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwicG9zdFwiKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRXJyb3JcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG5cclxuICAgIGxldCBjYXRhbG9kVGVzdCA9IG5ldyBDYXRhbG9nKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY2F0YWxvZ1wiKVswXSwgXCJjYXRhbG9nX190aXRsZVwiLCBcImNhdGFsb2dfX3Byb2R1Y3RcIiwgXCJwcmVsb2FkZXJcIik7XHJcblxyXG4gICAgbGV0IGZpbHRlciA9IG5ldyBGaWx0ZXIoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5jYXRhbG9nLW5hdl9fY29udHJvbHNcIilbMF0sIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY2F0YWxvZy1maWx0ZXJcIilbMF0sIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY2F0YWxvZ19fbW9yZVwiKVswXSk7XHJcblxyXG4gICAgbGV0IGhpc3RvcnlPYmogPSBuZXcgSGlzdG9yeUNvbnJ0b2woKTtcclxuXHJcbiAgICAvL9Ci0LXRgdGCXHJcbiAgICAvLyB3aW5kb3cuZGl2QXJyYXkgPSBkaXZBcnJheTtcclxuICAgIHdpbmRvdy5maWx0ZXIgPSBmaWx0ZXI7XHJcbn0pKCk7XHJcbiIsIjsoZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgaGVhZGVyID0gJCgnaGVhZGVyJyk7XHJcbiAgICB2YXIgY29udGVudCA9ICQoJy5tYWluLWNvbnRlbnQnKTtcclxuICAgIHZhciBoZWFkZXJIZWlnaHQgPSBoZWFkZXIuaGVpZ2h0KCk7XHJcblxyXG4gICAgJCh3aW5kb3cpLm9uKCdsb2FkIHNjcm9sbCcsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGlmICgkKHRoaXMpLnNjcm9sbFRvcCgpID4gaGVhZGVySGVpZ2h0KSB7XHJcbiAgICAgICAgICAgIGhlYWRlci5hZGRDbGFzcygnZml4ZWQnKTtcclxuICAgICAgICAgICAgY29udGVudC5jc3MoeydwYWRkaW5nLXRvcCcgOiBoZWFkZXJIZWlnaHR9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGhlYWRlci5yZW1vdmVDbGFzcygnZml4ZWQnKTtcclxuICAgICAgICAgICAgY29udGVudC5jc3MoeydwYWRkaW5nLXRvcCcgOiAwfSlcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufSkoKTtcclxuIiwiOyhmdW5jdGlvbigpIHtcclxuICAgIHZhciBidXR0b24gPSAkKCcuZm9vdGVyX19jb2wtdGl0bGUnKTtcclxuXHJcbiAgICBidXR0b24ub24oJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5mb290ZXJfX2NvbCcpLmZpbmQoJy5mb290ZXJfX2NvbC1saXN0Jykuc2xpZGVUb2dnbGUoMzAwKTtcclxuICAgIH0pO1xyXG59KSgpO1xyXG4iLCI7KGZ1bmN0aW9uKCkge1xyXG5cclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgIGlmICgkKCcuY2F0YWxvZy1uYXZfX2NvbnRyb2xzJykubGVuZ3RoKSB7XHJcblxyXG4gICAgICAgICAgICB2YXIgbWVudUxpbmsgPSAkKCcuY2F0YWxvZy1uYXZfX2NvbnRyb2xzLWxpbmsnKSxcclxuICAgICAgICAgICAgICAgIG1lbnUgPSAkKCcuY2F0YWxvZy1uYXZfX2NvbnRyb2xzLWxpc3QnKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBtZW51SXRlbSA9ICQoJy5jYXRhbG9nLW5hdl9fY29udHJvbHMtaXRlbScpLFxyXG4gICAgICAgICAgICAgICAgYWN0aXZlTGluayA9ICQoJy5jYXRhbG9nLW5hdl9fY29udHJvbHMtbGluay5pcy1hY3RpdmUnKSxcclxuICAgICAgICAgICAgICAgIGhvdmVyQm94ID0gJCgnLmNhdGFsb2ctbmF2X19ob3ZlcicpLFxyXG4gICAgICAgICAgICAgICAgYWN0aXZlTGlua1Bvc0xlZnQgPSBhY3RpdmVMaW5rLnBvc2l0aW9uKCkubGVmdCxcclxuICAgICAgICAgICAgICAgIGFjdGl2ZUxpbmtQb3NUb3AgPSBhY3RpdmVMaW5rLnBvc2l0aW9uKCkudG9wLFxyXG4gICAgICAgICAgICAgICAgYWN0aXZlTGlua1dpZHRoID0gYWN0aXZlTGluay5pbm5lcldpZHRoKCksXHJcbiAgICAgICAgICAgICAgICBhY3RpdmVMaW5rSGVpZ2h0ID0gYWN0aXZlTGluay5pbm5lckhlaWdodCgpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGNoZWNrID0gZmFsc2U7XHJcbiAgICAgICAgICAgIG1lbnVMaW5rLmhvdmVyKFxyXG4gICAgICAgICAgICAgIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG5ld0xpbmtQb3NMZWZ0ID0gJCh0aGlzKS5wb3NpdGlvbigpLmxlZnQsXHJcbiAgICAgICAgICAgICAgICAgICAgbmV3TGlua1Bvc1RvcCA9ICQodGhpcykucG9zaXRpb24oKS50b3AsXHJcbiAgICAgICAgICAgICAgICAgICAgbmV3TGlua1dpZHRoID0gJCh0aGlzKS5pbm5lcldpZHRoKCksXHJcbiAgICAgICAgICAgICAgICAgICAgbmV3TGlua0hlaWdodCA9ICQodGhpcykuaW5uZXJIZWlnaHQoKTtcclxuICAgICAgICAgICAgICAgIGhvdmVyQm94LmNzcyh7J2xlZnQnIDogbmV3TGlua1Bvc0xlZnQsICd0b3AnIDogbmV3TGlua1Bvc1RvcCwgJ3dpZHRoJyA6IG5ld0xpbmtXaWR0aCwgJ2hlaWdodCcgOiBuZXdMaW5rSGVpZ2h0fSk7XHJcbiAgICAgICAgICAgICAgICBjaGVjayA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgICBpZiAoY2hlY2spIHtcclxuICAgICAgICAgICAgICAgICAgICBob3ZlckJveC5jc3MoeydsZWZ0JyA6IGFjdGl2ZUxpbmtQb3NMZWZ0LCAndG9wJyA6IGFjdGl2ZUxpbmtQb3NUb3AsICd3aWR0aCcgOiAwLCAnaGVpZ2h0JyA6IDB9KTtcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSwgMTAwMCk7XHJcbiAgICAgICAgICAgICAgICBjaGVjayA9IHRydWU7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gcmVzaXplUG9zKCkge1xyXG4gICAgICAgICAgICAgICAgYWN0aXZlTGlua1Bvc0xlZnQgPSBhY3RpdmVMaW5rLnBvc2l0aW9uKCkubGVmdCxcclxuICAgICAgICAgICAgICAgIGFjdGl2ZUxpbmtQb3NUb3AgPSBhY3RpdmVMaW5rLnBvc2l0aW9uKCkudG9wLFxyXG4gICAgICAgICAgICAgICAgYWN0aXZlTGlua1dpZHRoID0gYWN0aXZlTGluay5pbm5lcldpZHRoKCksXHJcbiAgICAgICAgICAgICAgICBhY3RpdmVMaW5rSGVpZ2h0ID0gYWN0aXZlTGluay5pbm5lckhlaWdodCgpO1xyXG5cclxuICAgICAgICAgICAgICAgIGhvdmVyQm94LmNzcyh7J2xlZnQnIDogYWN0aXZlTGlua1Bvc0xlZnQsICd0b3AnIDogYWN0aXZlTGlua1Bvc1RvcCwgJ3dpZHRoJyA6IDAsICdoZWlnaHQnIDogMH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAkKHdpbmRvdykucmVzaXplKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgcmVzaXplUG9zKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXNpemVQb3MoKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcblxyXG59KSgpO1xyXG4iLCI7KGZ1bmN0aW9uKCkge1xyXG5cclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICQoJy5kZWxpdmVyeV9fZm9ybS1pbnB1dCcpLmZvY3Vzb3V0KGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICBpZiAoJCh0aGlzKS52YWwoKSAhPT0gJycpIHtcclxuICAgICAgICAgICAgJCh0aGlzKS5wYXJlbnQoKS5hZGRDbGFzcygndmFsdWUnKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAkKHRoaXMpLnBhcmVudCgpLnJlbW92ZUNsYXNzKCd2YWx1ZScpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIH0pO1xyXG5cclxufSkoKTtcclxuIiwiOyhmdW5jdGlvbigpIHtcclxuXHJcbiAgICBsZXQgc2NlbmUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2NlbmUnKTtcclxuICAgIGlmIChzY2VuZSAhPSB1bmRlZmluZWQpIHtcclxuICAgICAgICBsZXQgcGFyYWxsYXhJbnN0YW5jZSA9IG5ldyBQYXJhbGxheChzY2VuZSk7XHJcbiAgICB9XHJcblxyXG59KSgpO1xyXG4iLCI7KGZ1bmN0aW9uKCkge1xyXG4gICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5zbGlkZS1pbmZvX19idXR0b24nLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5zbGlkZS1pbmZvJykuZmluZCgnLnNsaWRlLWluZm9fX2J1dHRvbicpLnRvZ2dsZUNsYXNzKCdpcy1hY3RpdmUnKTtcclxuICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5zbGlkZS1pbmZvJykuZmluZCgnLnNsaWRlLWluZm9fX2NvbnRlbnQnKS5zbGlkZVRvZ2dsZSgzMDApO1xyXG4gICAgfSk7XHJcbn0pKCk7XHJcbiJdfQ==
=======
"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var s=0;s<e.length;s++){var i=e[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,e,s){return e&&_defineProperties(t.prototype,e),s&&_defineProperties(t,s),t}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var s=0;s<e.length;s++){var i=e[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,e,s){return e&&_defineProperties(t.prototype,e),s&&_defineProperties(t,s),t}$(document).on("click",".button--basket",function(){$(this).hasClass("animate")||($(this).addClass("animate"),$(this).addClass("button--check"),setTimeout(function(){$(this).removeClass("button--check"),$(this).removeClass("animate")}.bind(this),2e3))}),window.addEventListener("load",function(){$(".hr-sect").length&&$(".hr-pagination__step").click(function(){var t=$(this);if(!t.hasClass("is-active")){t.closest(".hr-sect").find(".hr-pagination__step").removeClass("is-active").removeClass("button"),t.addClass("is-active").addClass("button"),t.attr("data-index");var e=t.closest(".hr-sect").find(".hr-slider-slide");e.removeClass("is-active"),e.each(function(t,e){$(this).attr("data-index")==$(".hr-pagination__step.is-active").attr("data-index")&&$(this).addClass("is-active")})}})}),function(){var t=document.getElementById("menu-button");t.addEventListener("click",function(){t.classList.toggle("opened")}),window.onresize=function(){t.classList.remove("opened")},window.onscroll=function(){t.classList.remove("opened")}}(),function(){var t=function(){function o(t,e,s,i){if(_classCallCheck(this,o),void 0===t)return!1;this._self=t,this._title=this._self.querySelectorAll("."+e)[0],this._products=this._self.querySelectorAll("."+s)[0],this.preloader=this._self.querySelectorAll("."+i)[0]}return _createClass(o,[{key:"_cleanProducts",value:function(){this._products.innerHTML=""}},{key:"playPreloader",value:function(){this.preloader.classList.add("preloader--active")}},{key:"stopPreloader",value:function(){this.preloader.classList.remove("preloader--active")}},{key:"updateTitle",value:function(t){this._title.innerHTML=t,this._title.setAttribute("data-name",t)}},{key:"updateListProducts",value:function(t){this._products.innerHTML=t}},{key:"addProducts",value:function(t){this._products.insertAdjacentHTML("beforeend",t)}}]),o}(),e=function(){function i(t,e,s){return _classCallCheck(this,i),void 0!==t&&(void 0!==e&&(void 0!==s&&(this._containerBrands=t,this._brandItem=this._containerBrands.querySelectorAll(".catalog-nav__controls-link"),this._containerFilter=e,this._filterItem=this._containerFilter.querySelectorAll(".catalog-filter__col-btn"),this.searchItem=this._containerFilter.querySelectorAll(".catalog-filter__form")[0],this._activeClass="is-active",this._sortTypeAsc={class:"sort-down",dataSort:"asc"},this._sortTypeDesc={class:"sort-up",dataSort:"desc"},this._containerMore=s,this.timeOutAjax,void this.init())))}return _createClass(i,[{key:"_cleanClassFilterAll",value:function(){var s=this;this._filterItem.forEach(function(t){var e=t.closest(".catalog-filter__col");t.classList.remove(s._activeClass),t.classList.remove(s._sortTypeAsc.class),e.removeAttribute("data-sort")})}},{key:"_addClassFilter",value:function(t){var e=t.closest(".catalog-filter__col");console.log(t),t.classList.add(this._activeClass),t.classList.add(this._sortTypeAsc.class),e.setAttribute("data-sort",this._sortTypeAsc.dataSort)}},{key:"_toogleSort",value:function(t){var e=t.closest(".catalog-filter__col");t.classList.contains(this._sortTypeAsc.class)?(t.classList.remove(this._sortTypeAsc.class),t.classList.add(this._sortTypeDesc.class),e.setAttribute("data-sort",this._sortTypeDesc.dataSort)):(t.classList.remove(this._sortTypeDesc.class),t.classList.add(this._sortTypeAsc.class),e.setAttribute("data-sort",this._sortTypeAsc.dataSort))}},{key:"_selectBrand",value:function(t){t.classList.contains("is-active")||(this._brandItem.forEach(function(t){t.classList.remove("is-active")}),t.classList.add("is-active"))}},{key:"_queryFormation",value:function(t,e){clearTimeout(this.timeOutAjax);var s,i,o=[],n=this.searchItem.getElementsByTagName("input")[0];this._brandItem.forEach(function(t){t.classList.contains("is-active")&&(o.push("brand="+t.getAttribute("data-brand")),s=t.getAttribute("data-brand"))}),this._filterItem.forEach(function(t){var e=t.closest(".catalog-filter__col");t.classList.contains("is-active")&&(o.push("sort="+e.getAttribute("data-sort")),o.push("sortType="+e.getAttribute("data-filter")))}),""!==n.value&&o.push("search="+n.value),i="?"+o.join("&"),c.setHistory(i,s);var a=new r("test.json","get",t);void 0===e?a.send():(l.playPreloader(),this.timeOutAjax=setTimeout(function(){a.send()},e)),console.log(i)}},{key:"updateStateFilterFromUrl",value:function(e){var s=this;void 0!==e[0]?this._brandItem.forEach(function(t){t.getAttribute("data-brand")===e[0][1]&&s._selectBrand(t)}):this._selectBrand(this._brandItem[0]),void 0!==e[2]?this._filterItem.forEach(function(t){t.closest(".catalog-filter__col").getAttribute("data-filter")===e[2][1]&&(s._cleanClassFilterAll(),s._addClassFilter(t),t.closest(".catalog-filter__col").setAttribute("data-sort",e[1][1]),"asc"===e[1][1]?(t.classList.add(s._sortTypeAsc.class),t.classList.remove(s._sortTypeDesc.class)):(t.classList.remove(s._sortTypeAsc.class),t.classList.add(s._sortTypeDesc.class)))}):this._filterItem.forEach(function(t){"name"===t.closest(".catalog-filter__col").getAttribute("data-filter")&&(s._cleanClassFilterAll(),s._addClassFilter(t))}),void 0!==e[3]?(console.log(e[3][1]),s.searchItem.getElementsByTagName("input")[0].value=e[3][1]):s.searchItem.getElementsByTagName("input")[0].value=""}},{key:"init",value:function(){var e=this;this._filterItem.forEach(function(t){t.addEventListener("click",function(){t.classList.contains(e._activeClass)?e._toogleSort(this):(e._cleanClassFilterAll(),e._addClassFilter(this)),e._queryFormation(!0)})}),this._brandItem.forEach(function(t){t.addEventListener("click",function(t){t.preventDefault(),this.classList.contains("is-active")||(e._selectBrand(this),e._queryFormation(!0))})}),this.searchItem.getElementsByTagName("input")[0].addEventListener("input",function(){e._queryFormation(!0,1e3)}),this._containerMore.querySelectorAll(".catalog__more-button")[0].addEventListener("click",function(t){t.preventDefault(),e._queryFormation(!1)})}}]),i}(),s=function(){function t(){_classCallCheck(this,t),this._url,this._historyObj=window.history,this.init()}return _createClass(t,[{key:"setHistory",value:function(t,e){e===this._historyObj.state?this._historyObj.replaceState(e,e,t):this._historyObj.pushState(e,e,t)}},{key:"_readHistory",value:function(){var t=document.location.href.split("?"),e=[];void 0!==t[1]?(t[1].split("&").forEach(function(t){e.push(t.split("="))}),console.log(e),i.updateStateFilterFromUrl(e),new r("test.json","get",!0).send()):(i.updateStateFilterFromUrl([]),new r("test.json","get",!0).send())}},{key:"init",value:function(){window.addEventListener("popstate",this._readHistory)}}]),t}(),r=function(){function i(t,e,s){_classCallCheck(this,i),this._url=t,this._type=e,this._productUpdate=s,this.ajax=new XMLHttpRequest}return _createClass(i,[{key:"_progress",value:function(){l.playPreloader()}},{key:"_complete",value:function(){var t=JSON.parse(this.response);!0===productUpdate?(l.updateTitle(t.title),l.updateListProducts(t.elements)):l.addProducts(t.elements),l.stopPreloader(),console.log(t)}},{key:"_completeUpdatePrpoducts",value:function(){var t=JSON.parse(this.response);l.updateTitle(t.title),l.updateListProducts(t.elements),l.stopPreloader(),console.log(t)}},{key:"_completeAddProducts",value:function(){var t=JSON.parse(this.response);l.addProducts(t.elements),l.stopPreloader(),console.log(t)}},{key:"send",value:function(t){var e=this._productUpdate,s=this;this.ajax.addEventListener("progress",this._progress,!1),this.ajax.addEventListener("load",!0===e?s._completeUpdatePrpoducts:s._completeAddProducts,!1),"get"===this._type.toLowerCase()?(this.ajax.open(this._type,this._url),this.ajax.send(),console.log("get")):"post"===this._type.toLowerCase()?console.log("post"):console.log("Error")}}]),i}(),l=new t(document.querySelectorAll(".catalog")[0],"catalog__title","catalog__product","preloader"),i=new e(document.querySelectorAll(".catalog-nav__controls")[0],document.querySelectorAll(".catalog-filter")[0],document.querySelectorAll(".catalog__more")[0]),c=new s;window.filter=i}(),function(){var t=$("header"),e=$(".main-content"),s=t.height();$(window).on("load scroll",function(){$(this).scrollTop()>s?(t.addClass("fixed"),e.css({"padding-top":s})):(t.removeClass("fixed"),e.css({"padding-top":0}))})}(),$(".footer__col-title").on("click",function(t){t.preventDefault(),$(this).closest(".footer__col").find(".footer__col-list").slideToggle(300)}),window.addEventListener("load",function(){if($(".catalog-nav__controls").length){var t=function(){i=s.position().left,n=s.position().top,s.innerWidth(),s.innerHeight(),o.css({left:i,top:n,width:0,height:0})},e=$(".catalog-nav__controls-link"),s=($(".catalog-nav__controls-list"),$(".catalog-nav__controls-item"),$(".catalog-nav__controls-link.is-active")),o=$(".catalog-nav__hover"),i=s.position().left,n=s.position().top,a=(s.innerWidth(),s.innerHeight(),!1);e.hover(function(){var t=$(this).position().left,e=$(this).position().top,s=$(this).innerWidth(),i=$(this).innerHeight();o.css({left:t,top:e,width:s,height:i}),a=!1},function(){setTimeout(function(){a&&o.css({left:i,top:n,width:0,height:0})},1e3),a=!0}),$(window).resize(function(){t()}),t()}}),window.addEventListener("load",function(){$(".delivery__form-input").focusout(function(){""!==$(this).val()?$(this).parent().addClass("value"):$(this).parent().removeClass("value")})}),function(){var t=document.getElementById("scene");if(null!=t)new Parallax(t)}(),function(){var e=function(){function n(t,e,s,i,o){if(_classCallCheck(this,n),void 0===t)return!1;this._self=t,this._numProducts=this._self.querySelectorAll("."+e)[0],this._numMinus=this._self.querySelectorAll("."+s)[0],this._numPlus=this._self.querySelectorAll("."+i)[0],this._del=this._self.querySelectorAll("."+o)[0],this._size=+this._numProducts.innerHTML,this.init()}return _createClass(n,[{key:"_delete",value:function(){var t=this;this._self.classList.add("remove"),setTimeout(function(){t._self.remove(),s._sumValues()},550)}},{key:"_numAdd",value:function(){this._size+=1,this._numProducts.innerHTML=this._size,s._sumValues()}},{key:"_numDel",value:function(){this._size-=1,this._numProducts.innerHTML=this._size,this._size<=1?(this._size=1,this._numProducts.innerHTML=1):this._numProducts.innerHTML=this._size,s._sumValues()}},{key:"init",value:function(){var t=this;t._del.addEventListener("click",function(){t._delete()}),t._numPlus.addEventListener("click",function(){t._numAdd()}),t._numMinus.addEventListener("click",function(){t._numDel()})}},{key:"valueProducts",get:function(){return this._size}}]),n}(),n=[];document.querySelectorAll(".basket-products__product").forEach(function(t){new e(t,"basket-products__product-size-num","basket-products__product-num-change--minus","basket-products__product-num-change--plus","basket-products__product-remove");n.push(t)}),window.productsArr=n;var s=new(function(){function o(t,e,s,i){if(_classCallCheck(this,o),void 0===t)return!1;this._self=t,this._productsSize=this._self.querySelectorAll("."+e)[0],this._productsRemove=this._self.querySelectorAll("."+s)[0],this._products=n,this.init()}return _createClass(o,[{key:"_deleteAll",value:function(){this._products.forEach(function(t){t.classList.add("remove"),setTimeout(function(){t.remove()},550)}),this._productsSize.innerHTML=0}},{key:"_sumValues",value:function(){var e=0;this._self.querySelectorAll(".basket-products__product-size-num").forEach(function(t){e+=+t.innerHTML}),this._productsSize.innerHTML=e}},{key:"init",value:function(){var t=this;t._productsRemove.addEventListener("click",function(){t._deleteAll()}),t._productsSize.addEventListener("click",function(){t._sumValues()}),this._sumValues()}}]),o}())(document.querySelectorAll(".basket-products")[0],"products-num","basket-products__remove-products",n)}(),$(document).on("click",".slide-info__button",function(){$(this).closest(".slide-info").find(".slide-info__button").toggleClass("is-active"),$(this).closest(".slide-info").find(".slide-info__content").slideToggle(300)});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFkZFRvQmFza2V0LmpzIiwiYmFza2V0VGFicy5qcyIsImJ1cmdlci5qcyIsImNhdGFsb2dVcGRhdGVDbGFzcy5qcyIsImZpeGVkSGVhZGVyLmpzIiwiZm9vdGVyTWVudS5qcyIsImhvdmVyUm9sbGVyLmpzIiwibGFiZWxGb3JtLmpzIiwicGFyYWxsYXguanMiLCJwcm90b0Jhc2tldC5qcyIsInNob3dNb3JlLmpzIl0sIm5hbWVzIjpbIiQiLCJkb2N1bWVudCIsIm9uIiwidGhpcyIsImhhc0NsYXNzIiwiYWRkQ2xhc3MiLCJzZXRUaW1lb3V0IiwicmVtb3ZlQ2xhc3MiLCJiaW5kIiwid2luZG93IiwiYWRkRXZlbnRMaXN0ZW5lciIsImxlbmd0aCIsImNsaWNrIiwidGhTdGVwIiwiY2xvc2VzdCIsImZpbmQiLCJhdHRyIiwic2xpZGVyU2xpZGVzIiwiZWFjaCIsInBhZ2lJbmRleCIsIm1lbnVCdG4iLCJnZXRFbGVtZW50QnlJZCIsImNsYXNzTGlzdCIsInRvZ2dsZSIsIm9ucmVzaXplIiwicmVtb3ZlIiwib25zY3JvbGwiLCJDYXRhbG9nIiwic2VsZiIsInRpdGxlQ2xhc3MiLCJwcm9kdWN0c0NvbnRhaW5lckNsYXNzIiwicHJvZHVjdHNQcmVsb2FkZXJDbGFzcyIsIl9jbGFzc0NhbGxDaGVjayIsInVuZGVmaW5lZCIsIl9zZWxmIiwiX3RpdGxlIiwicXVlcnlTZWxlY3RvckFsbCIsIl9wcm9kdWN0cyIsInByZWxvYWRlciIsIl9jcmVhdGVDbGFzcyIsImtleSIsInZhbHVlIiwiaW5uZXJIVE1MIiwiYWRkIiwidGl0bGUiLCJzZXRBdHRyaWJ1dGUiLCJwcm9kdWN0cyIsImluc2VydEFkamFjZW50SFRNTCIsIkZpbHRlciIsImNvbnRhaW5lckJyYW5kcyIsImNvbnRhaW5lckZpbHRlciIsImNvbnRhaW5lck1vcmUiLCJfY29udGFpbmVyQnJhbmRzIiwiX2JyYW5kSXRlbSIsIl9jb250YWluZXJGaWx0ZXIiLCJfZmlsdGVySXRlbSIsInNlYXJjaEl0ZW0iLCJfYWN0aXZlQ2xhc3MiLCJfc29ydFR5cGVBc2MiLCJjbGFzcyIsImRhdGFTb3J0IiwiX3NvcnRUeXBlRGVzYyIsIl9jb250YWluZXJNb3JlIiwidGltZU91dEFqYXgiLCJpbml0IiwiZm9yRWFjaCIsIml0ZW0iLCJwYXJlbnQiLCJyZW1vdmVBdHRyaWJ1dGUiLCJjb25zb2xlIiwibG9nIiwiY29udGFpbnMiLCJwcm9kdWN0VXBkYXRlIiwiZGVsYXkiLCJjbGVhclRpbWVvdXQiLCJicmFuZCIsImdldFF1ZXJ5IiwiYXJyYXlRdWVyeSIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwicHVzaCIsImdldEF0dHJpYnV0ZSIsImpvaW4iLCJoaXN0b3J5T2JqIiwic2V0SGlzdG9yeSIsImFqYXhDb25uZWN0IiwiQWpheEdldFByb2R1Y3RzIiwic2VuZCIsImNhdGFsb2RUZXN0IiwicGxheVByZWxvYWRlciIsImFycmF5UmVzdWx0IiwiX3NlbGVjdEJyYW5kIiwiX2NsZWFuQ2xhc3NGaWx0ZXJBbGwiLCJfYWRkQ2xhc3NGaWx0ZXIiLCJfdG9vZ2xlU29ydCIsIl9xdWVyeUZvcm1hdGlvbiIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJIaXN0b3J5Q29ucnRvbCIsIl91cmwiLCJfaGlzdG9yeU9iaiIsImhpc3RvcnkiLCJzdGF0ZSIsInJlcGxhY2VTdGF0ZSIsInB1c2hTdGF0ZSIsImFycmF5VXJsIiwibG9jYXRpb24iLCJocmVmIiwic3BsaXQiLCJmaWx0ZXIiLCJ1cGRhdGVTdGF0ZUZpbHRlckZyb21VcmwiLCJfcmVhZEhpc3RvcnkiLCJ1cmwiLCJ0eXBlIiwiX3R5cGUiLCJfcHJvZHVjdFVwZGF0ZSIsImFqYXgiLCJYTUxIdHRwUmVxdWVzdCIsInJlc3VsdCIsIkpTT04iLCJwYXJzZSIsInJlc3BvbnNlIiwidXBkYXRlVGl0bGUiLCJ1cGRhdGVMaXN0UHJvZHVjdHMiLCJlbGVtZW50cyIsImFkZFByb2R1Y3RzIiwic3RvcFByZWxvYWRlciIsImRhdGEiLCJfcHJvZ3Jlc3MiLCJfY29tcGxldGVVcGRhdGVQcnBvZHVjdHMiLCJfY29tcGxldGVBZGRQcm9kdWN0cyIsInRvTG93ZXJDYXNlIiwib3BlbiIsImhlYWRlciIsImNvbnRlbnQiLCJoZWFkZXJIZWlnaHQiLCJoZWlnaHQiLCJzY3JvbGxUb3AiLCJjc3MiLCJwYWRkaW5nLXRvcCIsImUiLCJzbGlkZVRvZ2dsZSIsInJlc2l6ZVBvcyIsImFjdGl2ZUxpbmtQb3NMZWZ0IiwiYWN0aXZlTGluayIsInBvc2l0aW9uIiwibGVmdCIsImFjdGl2ZUxpbmtQb3NUb3AiLCJ0b3AiLCJpbm5lcldpZHRoIiwiaW5uZXJIZWlnaHQiLCJob3ZlckJveCIsIndpZHRoIiwibWVudUxpbmsiLCJjaGVjayIsImhvdmVyIiwibmV3TGlua1Bvc0xlZnQiLCJuZXdMaW5rUG9zVG9wIiwibmV3TGlua1dpZHRoIiwibmV3TGlua0hlaWdodCIsInJlc2l6ZSIsImZvY3Vzb3V0IiwidmFsIiwic2NlbmUiLCJQYXJhbGxheCIsImJhc2tldFByb2R1Y3QiLCJudW1Qcm9kdWN0cyIsIm51bU1pbnVzIiwibnVtUGx1cyIsImRlbCIsIl9udW1Qcm9kdWN0cyIsIl9udW1NaW51cyIsIl9udW1QbHVzIiwiX2RlbCIsIl9zaXplIiwiX3RoaXMiLCJwcm9kdWN0c0NvbnRhaW5lciIsIl9zdW1WYWx1ZXMiLCJfZGVsZXRlIiwiX251bUFkZCIsIl9udW1EZWwiLCJnZXQiLCJwcm9kdWN0c0FyciIsInByb2R1Y3RzQ29udHJvbCIsInByb2R1Y3RzU2l6ZSIsInByb2R1Y3RzUmVtb3ZlIiwiX3Byb2R1Y3RzU2l6ZSIsIl9wcm9kdWN0c1JlbW92ZSIsIl9kZWxldGVBbGwiLCJ0b2dnbGVDbGFzcyJdLCJtYXBwaW5ncyI6Inl4QkFDSUEsRUFBRUMsVUFBVUMsR0FBRyxRQUFTLGtCQUFtQixXQUNsQ0YsRUFBRUcsTUFBTUMsU0FBUyxhQUNsQkosRUFBRUcsTUFBTUUsU0FBUyxXQUNqQkwsRUFBRUcsTUFBTUUsU0FBUyxpQkFDakJDLFdBQVcsV0FDUE4sRUFBRUcsTUFBTUksWUFBWSxpQkFDcEJQLEVBQUVHLE1B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VXlCLEVBQUt4QixZQUduQnZDLEtBQUtzTCxjQUFjL0ksVUFBWUQsSUF4RzlCLENBQUFELElBQUEsT0FBQUMsTUFBQSxXQTRHRCxJQUFJYixFQUFPekIsS0FFWHlCLEVBQUs4SixnQkFBZ0JoTCxpQkFBaUIsUUFBUyxXQUMzQ2tCLEVBQUsrSixlQUdUL0osRUFBSzZKLGNBQWMvSyxpQkFBaUIsUUFBUyxXQUN6Q2tCLEVBQUtvSixlQUdUN0ssS0FBSzZLLGlCQXRISk0sRUFBQSxHQTBIZSxDQUFvQnJMLFNBQVNtQyxpQkFBaUIsb0JBQW9CLEdBQUksZUFBZ0IsbUNBQW9DaUosR0ExSHJKLEdDQ0dyTCxFQUFFQyxVQUFVQyxHQUFHLFFBQVMsc0JBQXVCLFdBQzNDRixFQUFFRyxNQUFNVyxRQUFRLGVBQWVDLEtBQUssdUJBQXVCNkssWUFBWSxhQUN2RTVMLEVBQUVHLE1BQU1XLFFBQVEsZUFBZUMsS0FBSyx3QkFBd0I2SCxZQUFZIiwiZmlsZSI6Im1haW4ubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiOyhmdW5jdGlvbigpIHtcclxuICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcuYnV0dG9uLS1iYXNrZXQnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICBpZiAoISQodGhpcykuaGFzQ2xhc3MoJ2FuaW1hdGUnKSkge1xyXG4gICAgICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCdhbmltYXRlJyk7XHJcbiAgICAgICAgICAgICQodGhpcykuYWRkQ2xhc3MoXCJidXR0b24tLWNoZWNrXCIpO1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcyhcImJ1dHRvbi0tY2hlY2tcIik7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCdhbmltYXRlJyk7XHJcbiAgICAgICAgICAgIH0uYmluZCh0aGlzKSwgMjAwMCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn0pKCk7XHJcbiIsIjsoZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgaWYgKCQoJy5oci1zZWN0JykubGVuZ3RoKSB7XHJcblxyXG4gICAgICAgICAgICAkKFwiLmhyLXBhZ2luYXRpb25fX3N0ZXBcIikuY2xpY2soZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdGhTdGVwID0gJCh0aGlzKTtcclxuICAgICAgICAgICAgICAgIGlmICghdGhTdGVwLmhhc0NsYXNzKFwiaXMtYWN0aXZlXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhTdGVwLmNsb3Nlc3QoJy5oci1zZWN0JykuZmluZChcIi5oci1wYWdpbmF0aW9uX19zdGVwXCIpLnJlbW92ZUNsYXNzKFwiaXMtYWN0aXZlXCIpLnJlbW92ZUNsYXNzKFwiYnV0dG9uXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoU3RlcC5hZGRDbGFzcyhcImlzLWFjdGl2ZVwiKS5hZGRDbGFzcyhcImJ1dHRvblwiKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcGFnaUluZGV4ID0gdGhTdGVwLmF0dHIoXCJkYXRhLWluZGV4XCIpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgc2xpZGVyU2xpZGVzID0gdGhTdGVwLmNsb3Nlc3QoXCIuaHItc2VjdFwiKS5maW5kKFwiLmhyLXNsaWRlci1zbGlkZVwiKTtcclxuICAgICAgICAgICAgICAgICAgICBzbGlkZXJTbGlkZXMucmVtb3ZlQ2xhc3MoXCJpcy1hY3RpdmVcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgc2xpZGVyU2xpZGVzLmVhY2goZnVuY3Rpb24ocGFnaUluZGV4LCB0aFN0ZXApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCQodGhpcykuYXR0cihcImRhdGEtaW5kZXhcIikgPT0gJChcIi5oci1wYWdpbmF0aW9uX19zdGVwLmlzLWFjdGl2ZVwiKS5hdHRyKFwiZGF0YS1pbmRleFwiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcyhcImlzLWFjdGl2ZVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgIH0pO1xyXG5cclxufSkoKTtcclxuIiwiOyhmdW5jdGlvbigpIHtcclxuICAgIGxldCBtZW51QnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21lbnUtYnV0dG9uJyk7XHJcblxyXG4gICAgbWVudUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIG1lbnVCdG4uY2xhc3NMaXN0LnRvZ2dsZSgnb3BlbmVkJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB3aW5kb3cub25yZXNpemUgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICBtZW51QnRuLmNsYXNzTGlzdC5yZW1vdmUoJ29wZW5lZCcpO1xyXG4gICAgfVxyXG4gICAgd2luZG93Lm9uc2Nyb2xsID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgbWVudUJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdvcGVuZWQnKTtcclxuICAgIH1cclxufSkoKTtcclxuIiwiOyhmdW5jdGlvbigpe1xuXG4gICAgY2xhc3MgQ2F0YWxvZyB7XG4gICAgICAgIGNvbnN0cnVjdG9yKHNlbGYsIHRpdGxlQ2xhc3MsIHByb2R1Y3RzQ29udGFpbmVyQ2xhc3MsIHByb2R1Y3RzUHJlbG9hZGVyQ2xhc3Mpe1xuICAgICAgICAgICAgaWYgKHNlbGYgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuX3NlbGYgPSBzZWxmO1xuICAgICAgICAgICAgdGhpcy5fdGl0bGUgPSB0aGlzLl9zZWxmLnF1ZXJ5U2VsZWN0b3JBbGwoXCIuXCIgKyB0aXRsZUNsYXNzKVswXTtcbiAgICAgICAgICAgIHRoaXMuX3Byb2R1Y3RzID0gdGhpcy5fc2VsZi5xdWVyeVNlbGVjdG9yQWxsKFwiLlwiICsgcHJvZHVjdHNDb250YWluZXJDbGFzcylbMF07XG4gICAgICAgICAgICB0aGlzLnByZWxvYWRlciA9IHRoaXMuX3NlbGYucXVlcnlTZWxlY3RvckFsbChcIi5cIiArIHByb2R1Y3RzUHJlbG9hZGVyQ2xhc3MpWzBdO1xuICAgICAgICB9XG5cblxuICAgICAgICBfY2xlYW5Qcm9kdWN0cygpIHtcbiAgICAgICAgICAgIHRoaXMuX3Byb2R1Y3RzLmlubmVySFRNTCA9IFwiXCI7XG4gICAgICAgIH1cblxuICAgICAgICBwbGF5UHJlbG9hZGVyKCkge1xuICAgICAgICAgICAgdGhpcy5wcmVsb2FkZXIuY2xhc3NMaXN0LmFkZChcInByZWxvYWRlci0tYWN0aXZlXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgc3RvcFByZWxvYWRlcigpIHtcbiAgICAgICAgICAgIHRoaXMucHJlbG9hZGVyLmNsYXNzTGlzdC5yZW1vdmUoXCJwcmVsb2FkZXItLWFjdGl2ZVwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHVwZGF0ZVRpdGxlKHRpdGxlKSB7XG4gICAgICAgICAgICB0aGlzLl90aXRsZS5pbm5lckhUTUwgPSB0aXRsZTtcbiAgICAgICAgICAgIHRoaXMuX3RpdGxlLnNldEF0dHJpYnV0ZShcImRhdGEtbmFtZVwiLCB0aXRsZSk7XG4gICAgICAgIH1cblxuICAgICAgICB1cGRhdGVMaXN0UHJvZHVjdHMocHJvZHVjdHMpIHtcbiAgICAgICAgICAgIHRoaXMuX3Byb2R1Y3RzLmlubmVySFRNTCA9IHByb2R1Y3RzO1xuICAgICAgICB9XG5cbiAgICAgICAgYWRkUHJvZHVjdHMocHJvZHVjdHMpIHtcbiAgICAgICAgICAgIHRoaXMuX3Byb2R1Y3RzLmluc2VydEFkamFjZW50SFRNTChcImJlZm9yZWVuZFwiLCBwcm9kdWN0cyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjbGFzcyBGaWx0ZXIge1xuICAgICAgICBjb25zdHJ1Y3Rvcihjb250YWluZXJCcmFuZHMsIGNvbnRhaW5lckZpbHRlciwgY29udGFpbmVyTW9yZSkge1xuICAgICAgICAgICAgaWYgKGNvbnRhaW5lckJyYW5kcyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNvbnRhaW5lckZpbHRlciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNvbnRhaW5lck1vcmUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5fY29udGFpbmVyQnJhbmRzID0gY29udGFpbmVyQnJhbmRzO1xuICAgICAgICAgICAgdGhpcy5fYnJhbmRJdGVtID0gdGhpcy5fY29udGFpbmVyQnJhbmRzLnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY2F0YWxvZy1uYXZfX2NvbnRyb2xzLWxpbmtcIik7XG5cbiAgICAgICAgICAgIHRoaXMuX2NvbnRhaW5lckZpbHRlciA9IGNvbnRhaW5lckZpbHRlcjtcbiAgICAgICAgICAgIHRoaXMuX2ZpbHRlckl0ZW0gPSB0aGlzLl9jb250YWluZXJGaWx0ZXIucXVlcnlTZWxlY3RvckFsbChcIi5jYXRhbG9nLWZpbHRlcl9fY29sLWJ0blwiKTtcbiAgICAgICAgICAgIHRoaXMuc2VhcmNoSXRlbSA9IHRoaXMuX2NvbnRhaW5lckZpbHRlci5xdWVyeVNlbGVjdG9yQWxsKFwiLmNhdGFsb2ctZmlsdGVyX19mb3JtXCIpWzBdO1xuICAgICAgICAgICAgdGhpcy5fYWN0aXZlQ2xhc3MgPSBcImlzLWFjdGl2ZVwiO1xuICAgICAgICAgICAgdGhpcy5fc29ydFR5cGVBc2MgPSB7XG4gICAgICAgICAgICAgICAgY2xhc3M6IFwic29ydC1kb3duXCIsXG4gICAgICAgICAgICAgICAgZGF0YVNvcnQ6IFwiYXNjXCJcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB0aGlzLl9zb3J0VHlwZURlc2MgPSB7XG4gICAgICAgICAgICAgICAgY2xhc3M6IFwic29ydC11cFwiLFxuICAgICAgICAgICAgICAgIGRhdGFTb3J0OiBcImRlc2NcIlxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLl9jb250YWluZXJNb3JlID0gY29udGFpbmVyTW9yZTtcblxuICAgICAgICAgICAgdGhpcy50aW1lT3V0QWpheDtcbiAgICAgICAgICAgIHRoaXMuaW5pdCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgX2NsZWFuQ2xhc3NGaWx0ZXJBbGwoKSB7XG4gICAgICAgICAgICBsZXQgc2VsZiA9IHRoaXM7XG5cbiAgICAgICAgICAgIHRoaXMuX2ZpbHRlckl0ZW0uZm9yRWFjaChmdW5jdGlvbihpdGVtKXtcbiAgICAgICAgICAgICAgICBsZXQgcGFyZW50ID0gaXRlbS5jbG9zZXN0KFwiLmNhdGFsb2ctZmlsdGVyX19jb2xcIik7XG5cbiAgICAgICAgICAgICAgICAgICAgaXRlbS5jbGFzc0xpc3QucmVtb3ZlKHNlbGYuX2FjdGl2ZUNsYXNzKTtcbiAgICAgICAgICAgICAgICAgICAgaXRlbS5jbGFzc0xpc3QucmVtb3ZlKHNlbGYuX3NvcnRUeXBlQXNjLmNsYXNzKTtcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50LnJlbW92ZUF0dHJpYnV0ZShcImRhdGEtc29ydFwiKTtcblxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBfYWRkQ2xhc3NGaWx0ZXIoaXRlbSkge1xuICAgICAgICAgICAgbGV0IHBhcmVudCA9IGl0ZW0uY2xvc2VzdChcIi5jYXRhbG9nLWZpbHRlcl9fY29sXCIpO1xuXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhpdGVtKTtcblxuICAgICAgICAgICAgaXRlbS5jbGFzc0xpc3QuYWRkKHRoaXMuX2FjdGl2ZUNsYXNzKTtcbiAgICAgICAgICAgIGl0ZW0uY2xhc3NMaXN0LmFkZCh0aGlzLl9zb3J0VHlwZUFzYy5jbGFzcyk7XG5cbiAgICAgICAgICAgIHBhcmVudC5zZXRBdHRyaWJ1dGUoXCJkYXRhLXNvcnRcIiwgdGhpcy5fc29ydFR5cGVBc2MuZGF0YVNvcnQpO1xuICAgICAgICB9XG5cbiAgICAgICAgX3Rvb2dsZVNvcnQoaXRlbSkge1xuICAgICAgICAgICAgbGV0IHBhcmVudCA9IGl0ZW0uY2xvc2VzdChcIi5jYXRhbG9nLWZpbHRlcl9fY29sXCIpO1xuXG4gICAgICAgICAgICBpZiAoaXRlbS5jbGFzc0xpc3QuY29udGFpbnModGhpcy5fc29ydFR5cGVBc2MuY2xhc3MpKSB7XG4gICAgICAgICAgICAgICAgaXRlbS5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX3NvcnRUeXBlQXNjLmNsYXNzKTtcbiAgICAgICAgICAgICAgICBpdGVtLmNsYXNzTGlzdC5hZGQodGhpcy5fc29ydFR5cGVEZXNjLmNsYXNzKTtcblxuICAgICAgICAgICAgICAgIHBhcmVudC5zZXRBdHRyaWJ1dGUoXCJkYXRhLXNvcnRcIiwgdGhpcy5fc29ydFR5cGVEZXNjLmRhdGFTb3J0KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaXRlbS5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX3NvcnRUeXBlRGVzYy5jbGFzcyk7XG4gICAgICAgICAgICAgICAgaXRlbS5jbGFzc0xpc3QuYWRkKHRoaXMuX3NvcnRUeXBlQXNjLmNsYXNzKTtcblxuICAgICAgICAgICAgICAgIHBhcmVudC5zZXRBdHRyaWJ1dGUoXCJkYXRhLXNvcnRcIiwgdGhpcy5fc29ydFR5cGVBc2MuZGF0YVNvcnQpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIH1cblxuICAgICAgICBfc2VsZWN0QnJhbmQoaXRlbSkge1xuICAgICAgICAgICAgaWYgKCFpdGVtLmNsYXNzTGlzdC5jb250YWlucyhcImlzLWFjdGl2ZVwiKSl7XG4gICAgICAgICAgICAgICAgdGhpcy5fYnJhbmRJdGVtLmZvckVhY2goZnVuY3Rpb24oaXRlbSkge1xuICAgICAgICAgICAgICAgICAgICBpdGVtLmNsYXNzTGlzdC5yZW1vdmUoXCJpcy1hY3RpdmVcIik7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaXRlbS5jbGFzc0xpc3QuYWRkKFwiaXMtYWN0aXZlXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgX3F1ZXJ5Rm9ybWF0aW9uKHByb2R1Y3RVcGRhdGUsIGRlbGF5KSB7XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy50aW1lT3V0QWpheCk7XG4gICAgICAgICAgICAvL9Cc0LXRgtC+0LQg0YTQvtGA0LzQuNGA0L7QstCw0L3QuNGPIGdldCDQt9Cw0L/RgNC+0YHQsFxuICAgICAgICAgICAgbGV0IGFycmF5UXVlcnkgPSBbXSxcbiAgICAgICAgICAgICAgICBzZWFyY2hJdGVtID0gdGhpcy5zZWFyY2hJdGVtLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaW5wdXRcIilbMF0sXG4gICAgICAgICAgICAgICAgYnJhbmQsXG4gICAgICAgICAgICAgICAgZ2V0UXVlcnk7XG5cbiAgICAgICAgICAgIHRoaXMuX2JyYW5kSXRlbS5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pIHtcbiAgICAgICAgICAgICAgICBpZiAoaXRlbS5jbGFzc0xpc3QuY29udGFpbnMoXCJpcy1hY3RpdmVcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgYXJyYXlRdWVyeS5wdXNoKFwiYnJhbmQ9XCIgKyBpdGVtLmdldEF0dHJpYnV0ZShcImRhdGEtYnJhbmRcIikpO1xuICAgICAgICAgICAgICAgICAgICBicmFuZCA9IGl0ZW0uZ2V0QXR0cmlidXRlKFwiZGF0YS1icmFuZFwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGhpcy5fZmlsdGVySXRlbS5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pIHtcbiAgICAgICAgICAgICAgICBsZXQgcGFyZW50ID0gaXRlbS5jbG9zZXN0KFwiLmNhdGFsb2ctZmlsdGVyX19jb2xcIik7XG4gICAgICAgICAgICAgICAgaWYgKGl0ZW0uY2xhc3NMaXN0LmNvbnRhaW5zKFwiaXMtYWN0aXZlXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIGFycmF5UXVlcnkucHVzaChcInNvcnQ9XCIgKyBwYXJlbnQuZ2V0QXR0cmlidXRlKFwiZGF0YS1zb3J0XCIpKTtcbiAgICAgICAgICAgICAgICAgICAgYXJyYXlRdWVyeS5wdXNoKFwic29ydFR5cGU9XCIgKyBwYXJlbnQuZ2V0QXR0cmlidXRlKFwiZGF0YS1maWx0ZXJcIikpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpZiAoc2VhcmNoSXRlbS52YWx1ZSAhPT0gXCJcIikge1xuICAgICAgICAgICAgICAgIGFycmF5UXVlcnkucHVzaChcInNlYXJjaD1cIiArIHNlYXJjaEl0ZW0udmFsdWUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBnZXRRdWVyeSA9IFwiP1wiICsgYXJyYXlRdWVyeS5qb2luKFwiJlwiKTtcblxuICAgICAgICAgICAgaGlzdG9yeU9iai5zZXRIaXN0b3J5KGdldFF1ZXJ5LCBicmFuZCk7XG5cbiAgICAgICAgICAgIC8vVG9kbzog0LfQtNC10YHRjCDQvdCw0LTQviDQsdGD0LTQtdGCINGB0LTQtdC70LDRgtGMINCw0LrRgtGD0LDQu9GM0L3Ri9C5INGD0YDQuyDQtNC70Y8gYWpheCDQt9Cw0L/RgNC+0YHQvtCyXG4gICAgICAgICAgICAvLyDQn9GA0LjQvNC10YA6IGxldCBhamF4Q29ubmVjdCA9IG5ldyBBamF4R2V0UHJvZHVjdHMod2luZG93LmxvY2F0aW9uLmhyZWYgKyBnZXRRdWVyeSwgXCJnZXRcIiwgdHJ1ZSk7XG4gICAgICAgICAgICBsZXQgYWpheENvbm5lY3QgPSBuZXcgQWpheEdldFByb2R1Y3RzKFwidGVzdC5qc29uXCIsIFwiZ2V0XCIsIHByb2R1Y3RVcGRhdGUpO1xuXG4gICAgICAgICAgICBpZiAoZGVsYXkgPT09IHVuZGVmaW5lZCl7XG4gICAgICAgICAgICAgICAgYWpheENvbm5lY3Quc2VuZCgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjYXRhbG9kVGVzdC5wbGF5UHJlbG9hZGVyKCk7XG4gICAgICAgICAgICAgICAgdGhpcy50aW1lT3V0QWpheCA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgYWpheENvbm5lY3Quc2VuZCgpO1xuICAgICAgICAgICAgICAgIH0sIGRlbGF5KVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhnZXRRdWVyeSk7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIHVwZGF0ZVN0YXRlRmlsdGVyRnJvbVVybChhcnJheVJlc3VsdCkge1xuICAgICAgICAgICAgLy8gdXBkYXRlU3RhdGVGaWx0ZXJGcm9tVXJsKGFycmF5UmVzdWx0WzBdWzFdLCBhcnJheVJlc3VsdFsyXVsxXSwgYXJyYXlSZXN1bHRbMV1bMV0sIGFycmF5UmVzdWx0WzNdWzFdKVxuICAgICAgICAgICAgbGV0IHNlbGYgPSB0aGlzO1xuXG5cbiAgICAgICAgICAgIGlmIChhcnJheVJlc3VsdFswXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fYnJhbmRJdGVtLmZvckVhY2goZnVuY3Rpb24oaXRlbSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbS5nZXRBdHRyaWJ1dGUoXCJkYXRhLWJyYW5kXCIpID09PSBhcnJheVJlc3VsdFswXVsxXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fc2VsZWN0QnJhbmQoaXRlbSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9zZWxlY3RCcmFuZCh0aGlzLl9icmFuZEl0ZW1bMF0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoYXJyYXlSZXN1bHRbMl0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuX2ZpbHRlckl0ZW0uZm9yRWFjaChmdW5jdGlvbihpdGVtKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpdGVtLmNsb3Nlc3QoXCIuY2F0YWxvZy1maWx0ZXJfX2NvbFwiKS5nZXRBdHRyaWJ1dGUoXCJkYXRhLWZpbHRlclwiKSA9PT0gYXJyYXlSZXN1bHRbMl1bMV0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX2NsZWFuQ2xhc3NGaWx0ZXJBbGwoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX2FkZENsYXNzRmlsdGVyKGl0ZW0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5jbG9zZXN0KFwiLmNhdGFsb2ctZmlsdGVyX19jb2xcIikuc2V0QXR0cmlidXRlKFwiZGF0YS1zb3J0XCIsIGFycmF5UmVzdWx0WzFdWzFdKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFycmF5UmVzdWx0WzFdWzFdID09PSBcImFzY1wiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5jbGFzc0xpc3QuYWRkKHNlbGYuX3NvcnRUeXBlQXNjLmNsYXNzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtLmNsYXNzTGlzdC5yZW1vdmUoc2VsZi5fc29ydFR5cGVEZXNjLmNsYXNzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5jbGFzc0xpc3QucmVtb3ZlKHNlbGYuX3NvcnRUeXBlQXNjLmNsYXNzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtLmNsYXNzTGlzdC5hZGQoc2VsZi5fc29ydFR5cGVEZXNjLmNsYXNzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuX2ZpbHRlckl0ZW0uZm9yRWFjaChmdW5jdGlvbihpdGVtKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpdGVtLmNsb3Nlc3QoXCIuY2F0YWxvZy1maWx0ZXJfX2NvbFwiKS5nZXRBdHRyaWJ1dGUoXCJkYXRhLWZpbHRlclwiKSA9PT0gXCJuYW1lXCIpe1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fY2xlYW5DbGFzc0ZpbHRlckFsbCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fYWRkQ2xhc3NGaWx0ZXIoaXRlbSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGFycmF5UmVzdWx0WzNdICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhhcnJheVJlc3VsdFszXVsxXSk7XG4gICAgICAgICAgICAgICAgc2VsZi5zZWFyY2hJdGVtLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaW5wdXRcIilbMF0udmFsdWUgPSBhcnJheVJlc3VsdFszXVsxXTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc2VsZi5zZWFyY2hJdGVtLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaW5wdXRcIilbMF0udmFsdWUgPSBcIlwiO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIH1cblxuICAgICAgICBpbml0KCkge1xuICAgICAgICAgICAgbGV0IHNlbGYgPSB0aGlzO1xuICAgICAgICAgICAgdGhpcy5fZmlsdGVySXRlbS5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pe1xuICAgICAgICAgICAgICAgIGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbS5jbGFzc0xpc3QuY29udGFpbnMoc2VsZi5fYWN0aXZlQ2xhc3MpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl90b29nbGVTb3J0KHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy/QktGL0LfQvtCyINC80LXRgtC+0LTQsCDRhNC+0YDQvNC40YDQvtCy0LDQvdC40Y8gR2V0INC30LDQv9GA0L7RgdCwXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9xdWVyeUZvcm1hdGlvbih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX2NsZWFuQ2xhc3NGaWx0ZXJBbGwoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX2FkZENsYXNzRmlsdGVyKHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy/QktGL0LfQvtCyINC80LXRgtC+0LTQsCDRhNC+0YDQvNC40YDQvtCy0LDQvdC40Y8gR2V0INC30LDQv9GA0L7RgdCwXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9xdWVyeUZvcm1hdGlvbih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRoaXMuX2JyYW5kSXRlbS5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pIHtcbiAgICAgICAgICAgICAgICBpdGVtLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuY2xhc3NMaXN0LmNvbnRhaW5zKFwiaXMtYWN0aXZlXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9zZWxlY3RCcmFuZCh0aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8v0JLRi9C30L7QsiDQvNC10YLQvtC00LAg0YTQvtGA0LzQuNGA0L7QstCw0L3QuNGPIEdldCDQt9Cw0L/RgNC+0YHQsFxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fcXVlcnlGb3JtYXRpb24odHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgdGhpcy5zZWFyY2hJdGVtLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaW5wdXRcIilbMF0uYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIC8v0JLRi9C30L7QsiDQvNC10YLQvtC00LAg0YTQvtGA0LzQuNGA0L7QstCw0L3QuNGPIEdldCDQt9Cw0L/RgNC+0YHQsFxuICAgICAgICAgICAgICAgIHNlbGYuX3F1ZXJ5Rm9ybWF0aW9uKHRydWUsIDEwMDApO1xuICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgdGhpcy5fY29udGFpbmVyTW9yZS5xdWVyeVNlbGVjdG9yQWxsKFwiLmNhdGFsb2dfX21vcmUtYnV0dG9uXCIpWzBdLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgc2VsZi5fcXVlcnlGb3JtYXRpb24oZmFsc2UpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjbGFzcyBIaXN0b3J5Q29ucnRvbCB7XG4gICAgICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAgICAgdGhpcy5fdXJsO1xuICAgICAgICAgICAgdGhpcy5faGlzdG9yeU9iaiA9IHdpbmRvdy5oaXN0b3J5O1xuXG4gICAgICAgICAgICB0aGlzLmluaXQoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHNldEhpc3RvcnkoZ2V0UXVlcnksIGJyYW5kKSB7XG4gICAgICAgICAgICBpZiAoYnJhbmQgPT09IHRoaXMuX2hpc3RvcnlPYmouc3RhdGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9oaXN0b3J5T2JqLnJlcGxhY2VTdGF0ZShicmFuZCwgYnJhbmQsIGdldFF1ZXJ5KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5faGlzdG9yeU9iai5wdXNoU3RhdGUoYnJhbmQsIGJyYW5kLCBnZXRRdWVyeSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBfcmVhZEhpc3RvcnkoKSB7XG4gICAgICAgICAgICBsZXQgdXJsID0gZG9jdW1lbnQubG9jYXRpb24uaHJlZixcbiAgICAgICAgICAgICAgICBhcnJheVVybCA9IHVybC5zcGxpdChcIj9cIiksXG4gICAgICAgICAgICAgICAgYXJyYXlHZXQgPSBbXSxcbiAgICAgICAgICAgICAgICBhcnJheVJlc3VsdCA9IFtdO1xuXG4gICAgICAgICAgICAgICAgaWYgKGFycmF5VXJsWzFdICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgYXJyYXlHZXQgPSBhcnJheVVybFsxXS5zcGxpdChcIiZcIik7XG5cblxuICAgICAgICAgICAgICAgICAgICBhcnJheUdldC5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFycmF5UmVzdWx0LnB1c2goaXRlbS5zcGxpdChcIj1cIikpO1xuICAgICAgICAgICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGFycmF5UmVzdWx0KTtcblxuICAgICAgICAgICAgICAgICAgICBmaWx0ZXIudXBkYXRlU3RhdGVGaWx0ZXJGcm9tVXJsKGFycmF5UmVzdWx0KTtcblxuICAgICAgICAgICAgICAgICAgICAvL1RvZG86INC30LTQtdGB0Ywg0L3QsNC00L4g0LHRg9C00LXRgiDRgdC00LXQu9Cw0YLRjCDQsNC60YLRg9Cw0LvRjNC90YvQuSDRg9GA0Lsg0LTQu9GPIGFqYXgg0LfQsNC/0YDQvtGB0L7QslxuICAgICAgICAgICAgICAgICAgICAvLyDQn9GA0LjQvNC10YA6IGxldCBhamF4Q29ubmVjdCA9IG5ldyBBamF4R2V0UHJvZHVjdHModXJsLCBcImdldFwiLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGFqYXhDb25uZWN0ID0gbmV3IEFqYXhHZXRQcm9kdWN0cyhcInRlc3QuanNvblwiLCBcImdldFwiLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgYWpheENvbm5lY3Quc2VuZCgpO1xuXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICBmaWx0ZXIudXBkYXRlU3RhdGVGaWx0ZXJGcm9tVXJsKFtdKTtcblxuICAgICAgICAgICAgICAgICAgICAvL1RvZG86INC30LTQtdGB0Ywg0L3QsNC00L4g0LHRg9C00LXRgiDRgdC00LXQu9Cw0YLRjCDQsNC60YLRg9Cw0LvRjNC90YvQuSDRg9GA0Lsg0LTQu9GPIGFqYXgg0LfQsNC/0YDQvtGB0L7QslxuICAgICAgICAgICAgICAgICAgICAvLyDQn9GA0LjQvNC10YA6IGxldCBhamF4Q29ubmVjdCA9IG5ldyBBamF4R2V0UHJvZHVjdHModXJsLCBcImdldFwiLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGFqYXhDb25uZWN0ID0gbmV3IEFqYXhHZXRQcm9kdWN0cyhcInRlc3QuanNvblwiLCBcImdldFwiLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgYWpheENvbm5lY3Quc2VuZCgpO1xuXG4gICAgICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgfVxuXG4gICAgICAgIGluaXQoKSB7XG4gICAgICAgICAgICBsZXQgc2VsZiA9IHRoaXM7XG5cbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicG9wc3RhdGVcIiwgc2VsZi5fcmVhZEhpc3RvcnkpO1xuICAgICAgICB9XG5cbiAgICB9XG5cbiAgICBjbGFzcyBBamF4R2V0UHJvZHVjdHMge1xuICAgICAgICBjb25zdHJ1Y3Rvcih1cmwsIHR5cGUsIHByb2R1Y3RVcGRhdGUpIHtcbiAgICAgICAgICAgIHRoaXMuX3VybCA9IHVybDtcbiAgICAgICAgICAgIHRoaXMuX3R5cGUgPSB0eXBlO1xuICAgICAgICAgICAgdGhpcy5fcHJvZHVjdFVwZGF0ZSA9IHByb2R1Y3RVcGRhdGU7XG4gICAgICAgICAgICB0aGlzLmFqYXggPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIF9wcm9ncmVzcygpIHtcbiAgICAgICAgICAgIGNhdGFsb2RUZXN0LnBsYXlQcmVsb2FkZXIoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIF9jb21wbGV0ZSgpIHtcbiAgICAgICAgICAgIGxldCByZXN1bHQgPSBKU09OLnBhcnNlKHRoaXMucmVzcG9uc2UpO1xuXG4gICAgICAgICAgICBpZiAocHJvZHVjdFVwZGF0ZSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgIGNhdGFsb2RUZXN0LnVwZGF0ZVRpdGxlKHJlc3VsdC50aXRsZSk7XG4gICAgICAgICAgICAgICAgY2F0YWxvZFRlc3QudXBkYXRlTGlzdFByb2R1Y3RzKHJlc3VsdC5lbGVtZW50cyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNhdGFsb2RUZXN0LmFkZFByb2R1Y3RzKHJlc3VsdC5lbGVtZW50cyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNhdGFsb2RUZXN0LnN0b3BQcmVsb2FkZXIoKTtcblxuICAgICAgICAgICAgY29uc29sZS5sb2cocmVzdWx0KTtcblxuICAgICAgICB9XG5cbiAgICAgICAgX2NvbXBsZXRlVXBkYXRlUHJwb2R1Y3RzKCkge1xuICAgICAgICAgICAgbGV0IHJlc3VsdCA9IEpTT04ucGFyc2UodGhpcy5yZXNwb25zZSk7XG5cbiAgICAgICAgICAgIGNhdGFsb2RUZXN0LnVwZGF0ZVRpdGxlKHJlc3VsdC50aXRsZSk7XG4gICAgICAgICAgICBjYXRhbG9kVGVzdC51cGRhdGVMaXN0UHJvZHVjdHMocmVzdWx0LmVsZW1lbnRzKTtcblxuICAgICAgICAgICAgY2F0YWxvZFRlc3Quc3RvcFByZWxvYWRlcigpO1xuXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHQpO1xuICAgICAgICB9XG5cbiAgICAgICAgX2NvbXBsZXRlQWRkUHJvZHVjdHMoKSB7XG4gICAgICAgICAgICBsZXQgcmVzdWx0ID0gSlNPTi5wYXJzZSh0aGlzLnJlc3BvbnNlKTtcblxuICAgICAgICAgICAgY2F0YWxvZFRlc3QuYWRkUHJvZHVjdHMocmVzdWx0LmVsZW1lbnRzKTtcblxuICAgICAgICAgICAgY2F0YWxvZFRlc3Quc3RvcFByZWxvYWRlcigpO1xuXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHQpO1xuICAgICAgICB9XG5cblxuICAgICAgICBzZW5kKGRhdGEpIHtcbiAgICAgICAgICAgIGxldCBwcm9kdWN0VXBkYXRlID0gdGhpcy5fcHJvZHVjdFVwZGF0ZSxcbiAgICAgICAgICAgICAgICBzZWxmID0gdGhpcztcblxuICAgICAgICAgICAgdGhpcy5hamF4LmFkZEV2ZW50TGlzdGVuZXIoXCJwcm9ncmVzc1wiLCB0aGlzLl9wcm9ncmVzcywgZmFsc2UpO1xuICAgICAgICAgICAgdGhpcy5hamF4LmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsIChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBpZiAocHJvZHVjdFVwZGF0ZSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2VsZi5fY29tcGxldGVVcGRhdGVQcnBvZHVjdHM7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNlbGYuX2NvbXBsZXRlQWRkUHJvZHVjdHM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSkoKSwgZmFsc2UpO1xuXG4gICAgICAgICAgICBpZiAodGhpcy5fdHlwZS50b0xvd2VyQ2FzZSgpID09PSBcImdldFwiKSB7XG5cbiAgICAgICAgICAgICAgICB0aGlzLmFqYXgub3Blbih0aGlzLl90eXBlLCB0aGlzLl91cmwpO1xuICAgICAgICAgICAgICAgIHRoaXMuYWpheC5zZW5kKCk7XG5cbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcImdldFwiKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5fdHlwZS50b0xvd2VyQ2FzZSgpID09PSBcInBvc3RcIikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwicG9zdFwiKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJFcnJvclwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuXG4gICAgbGV0IGNhdGFsb2RUZXN0ID0gbmV3IENhdGFsb2coZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5jYXRhbG9nXCIpWzBdLCBcImNhdGFsb2dfX3RpdGxlXCIsIFwiY2F0YWxvZ19fcHJvZHVjdFwiLCBcInByZWxvYWRlclwiKTtcblxuICAgIGxldCBmaWx0ZXIgPSBuZXcgRmlsdGVyKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY2F0YWxvZy1uYXZfX2NvbnRyb2xzXCIpWzBdLCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNhdGFsb2ctZmlsdGVyXCIpWzBdLCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNhdGFsb2dfX21vcmVcIilbMF0pO1xuXG4gICAgbGV0IGhpc3RvcnlPYmogPSBuZXcgSGlzdG9yeUNvbnJ0b2woKTtcblxuICAgIC8v0KLQtdGB0YJcbiAgICAvLyB3aW5kb3cuZGl2QXJyYXkgPSBkaXZBcnJheTtcbiAgICB3aW5kb3cuZmlsdGVyID0gZmlsdGVyO1xufSkoKTtcbiIsIjsoZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgaGVhZGVyID0gJCgnaGVhZGVyJyk7XHJcbiAgICB2YXIgY29udGVudCA9ICQoJy5tYWluLWNvbnRlbnQnKTtcclxuICAgIHZhciBoZWFkZXJIZWlnaHQgPSBoZWFkZXIuaGVpZ2h0KCk7XHJcblxyXG4gICAgJCh3aW5kb3cpLm9uKCdsb2FkIHNjcm9sbCcsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGlmICgkKHRoaXMpLnNjcm9sbFRvcCgpID4gaGVhZGVySGVpZ2h0KSB7XHJcbiAgICAgICAgICAgIGhlYWRlci5hZGRDbGFzcygnZml4ZWQnKTtcclxuICAgICAgICAgICAgY29udGVudC5jc3MoeydwYWRkaW5nLXRvcCcgOiBoZWFkZXJIZWlnaHR9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGhlYWRlci5yZW1vdmVDbGFzcygnZml4ZWQnKTtcclxuICAgICAgICAgICAgY29udGVudC5jc3MoeydwYWRkaW5nLXRvcCcgOiAwfSlcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufSkoKTtcclxuIiwiOyhmdW5jdGlvbigpIHtcclxuICAgIHZhciBidXR0b24gPSAkKCcuZm9vdGVyX19jb2wtdGl0bGUnKTtcclxuXHJcbiAgICBidXR0b24ub24oJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5mb290ZXJfX2NvbCcpLmZpbmQoJy5mb290ZXJfX2NvbC1saXN0Jykuc2xpZGVUb2dnbGUoMzAwKTtcclxuICAgIH0pO1xyXG59KSgpO1xyXG4iLCI7KGZ1bmN0aW9uKCkge1xyXG5cclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgIGlmICgkKCcuY2F0YWxvZy1uYXZfX2NvbnRyb2xzJykubGVuZ3RoKSB7XHJcblxyXG4gICAgICAgICAgICB2YXIgbWVudUxpbmsgPSAkKCcuY2F0YWxvZy1uYXZfX2NvbnRyb2xzLWxpbmsnKSxcclxuICAgICAgICAgICAgICAgIG1lbnUgPSAkKCcuY2F0YWxvZy1uYXZfX2NvbnRyb2xzLWxpc3QnKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBtZW51SXRlbSA9ICQoJy5jYXRhbG9nLW5hdl9fY29udHJvbHMtaXRlbScpLFxyXG4gICAgICAgICAgICAgICAgYWN0aXZlTGluayA9ICQoJy5jYXRhbG9nLW5hdl9fY29udHJvbHMtbGluay5pcy1hY3RpdmUnKSxcclxuICAgICAgICAgICAgICAgIGhvdmVyQm94ID0gJCgnLmNhdGFsb2ctbmF2X19ob3ZlcicpLFxyXG4gICAgICAgICAgICAgICAgYWN0aXZlTGlua1Bvc0xlZnQgPSBhY3RpdmVMaW5rLnBvc2l0aW9uKCkubGVmdCxcclxuICAgICAgICAgICAgICAgIGFjdGl2ZUxpbmtQb3NUb3AgPSBhY3RpdmVMaW5rLnBvc2l0aW9uKCkudG9wLFxyXG4gICAgICAgICAgICAgICAgYWN0aXZlTGlua1dpZHRoID0gYWN0aXZlTGluay5pbm5lcldpZHRoKCksXHJcbiAgICAgICAgICAgICAgICBhY3RpdmVMaW5rSGVpZ2h0ID0gYWN0aXZlTGluay5pbm5lckhlaWdodCgpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGNoZWNrID0gZmFsc2U7XHJcbiAgICAgICAgICAgIG1lbnVMaW5rLmhvdmVyKFxyXG4gICAgICAgICAgICAgIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG5ld0xpbmtQb3NMZWZ0ID0gJCh0aGlzKS5wb3NpdGlvbigpLmxlZnQsXHJcbiAgICAgICAgICAgICAgICAgICAgbmV3TGlua1Bvc1RvcCA9ICQodGhpcykucG9zaXRpb24oKS50b3AsXHJcbiAgICAgICAgICAgICAgICAgICAgbmV3TGlua1dpZHRoID0gJCh0aGlzKS5pbm5lcldpZHRoKCksXHJcbiAgICAgICAgICAgICAgICAgICAgbmV3TGlua0hlaWdodCA9ICQodGhpcykuaW5uZXJIZWlnaHQoKTtcclxuICAgICAgICAgICAgICAgIGhvdmVyQm94LmNzcyh7J2xlZnQnIDogbmV3TGlua1Bvc0xlZnQsICd0b3AnIDogbmV3TGlua1Bvc1RvcCwgJ3dpZHRoJyA6IG5ld0xpbmtXaWR0aCwgJ2hlaWdodCcgOiBuZXdMaW5rSGVpZ2h0fSk7XHJcbiAgICAgICAgICAgICAgICBjaGVjayA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgICBpZiAoY2hlY2spIHtcclxuICAgICAgICAgICAgICAgICAgICBob3ZlckJveC5jc3MoeydsZWZ0JyA6IGFjdGl2ZUxpbmtQb3NMZWZ0LCAndG9wJyA6IGFjdGl2ZUxpbmtQb3NUb3AsICd3aWR0aCcgOiAwLCAnaGVpZ2h0JyA6IDB9KTtcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSwgMTAwMCk7XHJcbiAgICAgICAgICAgICAgICBjaGVjayA9IHRydWU7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gcmVzaXplUG9zKCkge1xyXG4gICAgICAgICAgICAgICAgYWN0aXZlTGlua1Bvc0xlZnQgPSBhY3RpdmVMaW5rLnBvc2l0aW9uKCkubGVmdCxcclxuICAgICAgICAgICAgICAgIGFjdGl2ZUxpbmtQb3NUb3AgPSBhY3RpdmVMaW5rLnBvc2l0aW9uKCkudG9wLFxyXG4gICAgICAgICAgICAgICAgYWN0aXZlTGlua1dpZHRoID0gYWN0aXZlTGluay5pbm5lcldpZHRoKCksXHJcbiAgICAgICAgICAgICAgICBhY3RpdmVMaW5rSGVpZ2h0ID0gYWN0aXZlTGluay5pbm5lckhlaWdodCgpO1xyXG5cclxuICAgICAgICAgICAgICAgIGhvdmVyQm94LmNzcyh7J2xlZnQnIDogYWN0aXZlTGlua1Bvc0xlZnQsICd0b3AnIDogYWN0aXZlTGlua1Bvc1RvcCwgJ3dpZHRoJyA6IDAsICdoZWlnaHQnIDogMH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAkKHdpbmRvdykucmVzaXplKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgcmVzaXplUG9zKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXNpemVQb3MoKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcblxyXG59KSgpO1xyXG4iLCI7KGZ1bmN0aW9uKCkge1xyXG5cclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICQoJy5kZWxpdmVyeV9fZm9ybS1pbnB1dCcpLmZvY3Vzb3V0KGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICBpZiAoJCh0aGlzKS52YWwoKSAhPT0gJycpIHtcclxuICAgICAgICAgICAgJCh0aGlzKS5wYXJlbnQoKS5hZGRDbGFzcygndmFsdWUnKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAkKHRoaXMpLnBhcmVudCgpLnJlbW92ZUNsYXNzKCd2YWx1ZScpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIH0pO1xyXG5cclxufSkoKTtcclxuIiwiOyhmdW5jdGlvbigpIHtcclxuXHJcbiAgICBsZXQgc2NlbmUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2NlbmUnKTtcclxuICAgIGlmIChzY2VuZSAhPSB1bmRlZmluZWQpIHtcclxuICAgICAgICBsZXQgcGFyYWxsYXhJbnN0YW5jZSA9IG5ldyBQYXJhbGxheChzY2VuZSk7XHJcbiAgICB9XHJcblxyXG59KSgpO1xyXG4iLCI7KGZ1bmN0aW9uKCkge1xyXG5cclxuICAgIGNsYXNzIGJhc2tldFByb2R1Y3Qge1xyXG4gICAgICAgIGNvbnN0cnVjdG9yKHNlbGYsIG51bVByb2R1Y3RzLCBudW1NaW51cywgbnVtUGx1cywgZGVsKSB7XHJcbiAgICAgICAgICAgIGlmIChzZWxmID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLl9zZWxmID0gc2VsZjtcclxuICAgICAgICAgICAgdGhpcy5fbnVtUHJvZHVjdHMgPSB0aGlzLl9zZWxmLnF1ZXJ5U2VsZWN0b3JBbGwoJy4nICsgbnVtUHJvZHVjdHMpWzBdO1xyXG4gICAgICAgICAgICB0aGlzLl9udW1NaW51cyA9IHRoaXMuX3NlbGYucXVlcnlTZWxlY3RvckFsbCgnLicgKyBudW1NaW51cylbMF07XHJcbiAgICAgICAgICAgIHRoaXMuX251bVBsdXMgPSB0aGlzLl9zZWxmLnF1ZXJ5U2VsZWN0b3JBbGwoJy4nICsgbnVtUGx1cylbMF07XHJcbiAgICAgICAgICAgIHRoaXMuX2RlbCA9IHRoaXMuX3NlbGYucXVlcnlTZWxlY3RvckFsbCgnLicgKyBkZWwpWzBdO1xyXG4gICAgICAgICAgICB0aGlzLl9zaXplID0gK3RoaXMuX251bVByb2R1Y3RzLmlubmVySFRNTDtcclxuICAgICAgICAgICAgdGhpcy5pbml0KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBnZXQgdmFsdWVQcm9kdWN0cygpIHtcclxuICAgICAgICAgICAgbGV0IHNlbGYgPSB0aGlzO1xyXG4gICAgICAgICAgICByZXR1cm4gc2VsZi5fc2l6ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIF9kZWxldGUoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3NlbGYuY2xhc3NMaXN0LmFkZCgncmVtb3ZlJyk7XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCk9PntcclxuICAgICAgICAgICAgICAgIHRoaXMuX3NlbGYucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICBwcm9kdWN0c0NvbnRhaW5lci5fc3VtVmFsdWVzKCk7XHJcbiAgICAgICAgICAgIH0sIDU1MCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBfbnVtQWRkKCkge1xyXG4gICAgICAgICAgICB0aGlzLl9zaXplICs9IDE7XHJcbiAgICAgICAgICAgIHRoaXMuX251bVByb2R1Y3RzLmlubmVySFRNTCA9IHRoaXMuX3NpemU7XHJcbiAgICAgICAgICAgIHByb2R1Y3RzQ29udGFpbmVyLl9zdW1WYWx1ZXMoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIF9udW1EZWwoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3NpemUgLT0gMTtcclxuICAgICAgICAgICAgdGhpcy5fbnVtUHJvZHVjdHMuaW5uZXJIVE1MID0gdGhpcy5fc2l6ZTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX3NpemUgPD0gMSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fc2l6ZSA9IDE7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9udW1Qcm9kdWN0cy5pbm5lckhUTUwgPSAxO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbnVtUHJvZHVjdHMuaW5uZXJIVE1MID0gdGhpcy5fc2l6ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBwcm9kdWN0c0NvbnRhaW5lci5fc3VtVmFsdWVzKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpbml0KCkge1xyXG4gICAgICAgICAgICBsZXQgc2VsZiA9IHRoaXM7XHJcblxyXG4gICAgICAgICAgICBzZWxmLl9kZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHNlbGYuX2RlbGV0ZSgpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHNlbGYuX251bVBsdXMuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHNlbGYuX251bUFkZCgpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHNlbGYuX251bU1pbnVzLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBzZWxmLl9udW1EZWwoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuXHJcbiAgICBsZXQgcHJvZHVjdHNBcnIgPSBbXTtcclxuICAgIGxldCBwcm9kdWN0cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5iYXNrZXQtcHJvZHVjdHNfX3Byb2R1Y3QnKTtcclxuXHJcbiAgICBwcm9kdWN0cy5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pIHtcclxuICAgICAgICBsZXQgcHJvZHVjdCA9IG5ldyBiYXNrZXRQcm9kdWN0KGl0ZW0sICdiYXNrZXQtcHJvZHVjdHNfX3Byb2R1Y3Qtc2l6ZS1udW0nLCAnYmFza2V0LXByb2R1Y3RzX19wcm9kdWN0LW51bS1jaGFuZ2UtLW1pbnVzJywgJ2Jhc2tldC1wcm9kdWN0c19fcHJvZHVjdC1udW0tY2hhbmdlLS1wbHVzJywgJ2Jhc2tldC1wcm9kdWN0c19fcHJvZHVjdC1yZW1vdmUnKTtcclxuICAgICAgICBwcm9kdWN0c0Fyci5wdXNoKGl0ZW0pO1xyXG4gICAgfSlcclxuICAgIHdpbmRvdy5wcm9kdWN0c0FyciA9IHByb2R1Y3RzQXJyO1xyXG5cclxuICAgIGNsYXNzIHByb2R1Y3RzQ29udHJvbCB7XHJcbiAgICAgICAgY29uc3RydWN0b3Ioc2VsZiwgcHJvZHVjdHNTaXplLCBwcm9kdWN0c1JlbW92ZSwgcHJvZHVjdHMpIHtcclxuICAgICAgICAgICAgaWYgKHNlbGYgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuX3NlbGYgPSBzZWxmO1xyXG4gICAgICAgICAgICB0aGlzLl9wcm9kdWN0c1NpemUgPSB0aGlzLl9zZWxmLnF1ZXJ5U2VsZWN0b3JBbGwoJy4nICsgcHJvZHVjdHNTaXplKVswXTtcclxuICAgICAgICAgICAgdGhpcy5fcHJvZHVjdHNSZW1vdmUgPSB0aGlzLl9zZWxmLnF1ZXJ5U2VsZWN0b3JBbGwoJy4nICsgcHJvZHVjdHNSZW1vdmUpWzBdO1xyXG4gICAgICAgICAgICB0aGlzLl9wcm9kdWN0cyA9IHByb2R1Y3RzQXJyO1xyXG4gICAgICAgICAgICB0aGlzLmluaXQoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIF9kZWxldGVBbGwoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3Byb2R1Y3RzLmZvckVhY2goZnVuY3Rpb24oaXRlbSkge1xyXG4gICAgICAgICAgICAgICAgaXRlbS5jbGFzc0xpc3QuYWRkKCdyZW1vdmUnKTtcclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCk9PntcclxuICAgICAgICAgICAgICAgICAgICBpdGVtLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgfSwgNTUwKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHRoaXMuX3Byb2R1Y3RzU2l6ZS5pbm5lckhUTUwgPSAwO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgX3N1bVZhbHVlcygpIHtcclxuICAgICAgICAgICAgbGV0IHZhbHVlID0gMDtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX3NlbGYucXVlcnlTZWxlY3RvckFsbCgnLmJhc2tldC1wcm9kdWN0c19fcHJvZHVjdC1zaXplLW51bScpLmZvckVhY2goZnVuY3Rpb24oaXRlbSkge1xyXG4gICAgICAgICAgICAgICAgdmFsdWUgKz0gK2l0ZW0uaW5uZXJIVE1MO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX3Byb2R1Y3RzU2l6ZS5pbm5lckhUTUwgPSB2YWx1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGluaXQoKSB7XHJcbiAgICAgICAgICAgIGxldCBzZWxmID0gdGhpcztcclxuXHJcbiAgICAgICAgICAgIHNlbGYuX3Byb2R1Y3RzUmVtb3ZlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBzZWxmLl9kZWxldGVBbGwoKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBzZWxmLl9wcm9kdWN0c1NpemUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHNlbGYuX3N1bVZhbHVlcygpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX3N1bVZhbHVlcygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBsZXQgcHJvZHVjdHNDb250YWluZXIgPSBuZXcgcHJvZHVjdHNDb250cm9sKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5iYXNrZXQtcHJvZHVjdHMnKVswXSwgJ3Byb2R1Y3RzLW51bScsICdiYXNrZXQtcHJvZHVjdHNfX3JlbW92ZS1wcm9kdWN0cycsIHByb2R1Y3RzQXJyKTtcclxuXHJcbn0pKCk7XHJcbiIsIjsoZnVuY3Rpb24oKSB7XHJcbiAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLnNsaWRlLWluZm9fX2J1dHRvbicsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICQodGhpcykuY2xvc2VzdCgnLnNsaWRlLWluZm8nKS5maW5kKCcuc2xpZGUtaW5mb19fYnV0dG9uJykudG9nZ2xlQ2xhc3MoJ2lzLWFjdGl2ZScpO1xyXG4gICAgICAgICQodGhpcykuY2xvc2VzdCgnLnNsaWRlLWluZm8nKS5maW5kKCcuc2xpZGUtaW5mb19fY29udGVudCcpLnNsaWRlVG9nZ2xlKDMwMCk7XHJcbiAgICB9KTtcclxufSkoKTtcclxuIl19
>>>>>>> basket
