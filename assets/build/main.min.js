"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var s=0;s<e.length;s++){var i=e[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,e,s){return e&&_defineProperties(t.prototype,e),s&&_defineProperties(t,s),t}$(document).on("click",".product-row__button",function(){$(this).hasClass("animate")||($(this).addClass("animate"),$(this).addClass("button--check"),setTimeout(function(){$(this).removeClass("button--check"),$(this).removeClass("animate")}.bind(this),2e3))}),function(){var t=document.getElementById("menu-button");t.addEventListener("click",function(){t.classList.toggle("opened")}),window.onresize=function(){t.classList.remove("opened")},window.onscroll=function(){t.classList.remove("opened")}}(),function(){var t=function(){function i(t,e,s){if(_classCallCheck(this,i),void 0===t)return!1;this._self=t,this._title=this._self.querySelectorAll("."+e)[0],this._products=this._self.querySelectorAll("."+s)[0]}return _createClass(i,[{key:"_cleanProducts",value:function(){this._products.innerHTML=""}},{key:"_playPreloader",value:function(){}},{key:"_stopPreloader",value:function(){}},{key:"updateTitle",value:function(t){this._title.innerHTML=t}},{key:"updateListProducts",value:function(t){this._products.innerHTML=t}},{key:"addProducts",value:function(t){this._products.insertAdjacentHTML("beforeend",t)}}]),i}(),e=function(){function s(t,e){return _classCallCheck(this,s),void 0!==t&&(void 0!==e&&(this._containerBrands=t,this._brandItem=this._containerBrands.querySelectorAll(".catalog-nav__controls-link"),this._containerFilter=e,this._filterItem=this._containerFilter.querySelectorAll(".catalog-filter__col-btn"),this.searchItem=this._containerFilter.querySelectorAll(".catalog-filter__form")[0],this._activeClass="is-active",this._sortTypeAsc={class:"sort-down",dataSort:"asc"},this._sortTypeDesc={class:"sort-up",dataSort:"desc"},void this.init()))}return _createClass(s,[{key:"_cleanClassFilterAll",value:function(){var s=this;this._filterItem.forEach(function(t){var e=t.closest(".catalog-filter__col");t.classList.remove(s._activeClass),t.classList.remove(s._sortTypeAsc.class),e.removeAttribute("data-sort")})}},{key:"_addClassFilter",value:function(t){var e=t.closest(".catalog-filter__col");t.classList.add(this._activeClass),t.classList.add(this._sortTypeAsc.class),e.setAttribute("data-sort",this._sortTypeAsc.dataSort)}},{key:"_toogleSort",value:function(t){var e=t.closest(".catalog-filter__col");t.classList.contains(this._sortTypeAsc.class)?(t.classList.remove(this._sortTypeAsc.class),t.classList.add(this._sortTypeDesc.class),e.setAttribute("data-sort",this._sortTypeDesc.dataSort)):(t.classList.remove(this._sortTypeDesc.class),t.classList.add(this._sortTypeAsc.class),e.setAttribute("data-sort",this._sortTypeAsc.dataSort))}},{key:"_selectBrand",value:function(t){t.classList.contains("is-active")||(this._brandItem.forEach(function(t){t.classList.remove("is-active")}),t.classList.add("is-active"))}},{key:"_queryFormation",value:function(){var t,s=[],e=this.searchItem.getElementsByTagName("input")[0];this._brandItem.forEach(function(t){t.classList.contains("is-active")&&s.push("brand="+t.getAttribute("data-brand"))}),this._filterItem.forEach(function(t){var e=t.closest(".catalog-filter__col");t.classList.contains("is-active")&&(s.push("sort="+e.getAttribute("data-sort")),s.push("sortType="+e.getAttribute("data-filter")))}),""!==e.value&&s.push("search="+e.value),t="?"+s.join("&"),console.log(t)}},{key:"init",value:function(){var e=this;this._filterItem.forEach(function(t){t.addEventListener("click",function(){t.classList.contains(e._activeClass)?e._toogleSort(this):(e._cleanClassFilterAll(),e._addClassFilter(this)),e._queryFormation()})}),this._brandItem.forEach(function(t){t.addEventListener("click",function(t){t.preventDefault(),this.classList.contains("is-active")||(e._selectBrand(this),e._queryFormation())})}),this.searchItem.getElementsByTagName("input")[0].addEventListener("input",function(){e._queryFormation()})}}]),s}(),s=function(){function s(t,e){_classCallCheck(this,s),this._url=t,this._type=e,this.ajax=new XMLHttpRequest}return _createClass(s,[{key:"_progress",value:function(){}},{key:"_complete",value:function(){var t=JSON.parse(this.response);console.log(t)}},{key:"send",value:function(t){this.ajax.addEventListener("progress",this._progress,!1),this.ajax.addEventListener("load",this._complete,!1),"get"===this._type.toLowerCase()?(this.ajax.open(this._type,this._url),this.ajax.send(),console.log("get")):"post"===this._type.toLowerCase()?console.log("post"):console.log("Error")}}]),s}(),i=(new t(document.querySelectorAll(".catalog")[0],"catalog__title","catalog__container"),new s("test.json","get")),o=new e(document.querySelectorAll(".catalog-nav__controls")[0],document.querySelectorAll(".catalog-filter")[0]);i.send({data:1}),window.filter=o}(),$(".footer__col-title").on("click",function(t){t.preventDefault(),$(this).closest(".footer__col").find(".footer__col-list").slideToggle(300)}),window.addEventListener("load",function(){var t=$(".catalog-nav__controls-link"),e=($(".catalog-nav__controls-list"),$(".catalog-nav__controls-item"),$(".catalog-nav__controls-link.is-active")),o=$(".catalog-nav__hover"),s=e.position().left,i=e.position().top,n=(e.innerWidth(),e.innerHeight(),!1);function a(){s=e.position().left,i=e.position().top,e.innerWidth(),e.innerHeight(),o.css({left:s,top:i,width:0,height:0})}t.hover(function(){var t=$(this).position().left,e=$(this).position().top,s=$(this).innerWidth(),i=$(this).innerHeight();o.css({left:t,top:e,width:s,height:i}),n=!1},function(){setTimeout(function(){n&&o.css({left:s,top:i,width:0,height:0})},1e3),n=!0}),$(window).resize(function(){a()}),a()}),function(){var t=document.getElementById("scene");new Parallax(t)}(),$(document).on("click",".slide-info__button",function(){$(this).closest(".slide-info").find(".slide-info__button").toggleClass("is-active"),$(this).closest(".slide-info").find(".slide-info__content").slideToggle(300)});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFkZFRvQmFza2V0LmpzIiwiYnVyZ2VyLmpzIiwiY2F0YWxvZ1VwZGF0ZUNsYXNzLmpzIiwiZm9vdGVyTWVudS5qcyIsImhvdmVyUm9sbGVyLmpzIiwicGFyYWxsYXguanMiLCJzaG93TW9yZS5qcyJdLCJuYW1lcyI6WyIkIiwiZG9jdW1lbnQiLCJvbiIsInRoaXMiLCJoYXNDbGFzcyIsImFkZENsYXNzIiwic2V0VGltZW91dCIsInJlbW92ZUNsYXNzIiwiYmluZCIsIm1lbnVCdG4iLCJnZXRFbGVtZW50QnlJZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJ3aW5kb3ciLCJvbnJlc2l6ZSIsInJlbW92ZSIsIm9uc2Nyb2xsIiwiQ2F0YWxvZyIsInNlbGYiLCJ0aXRsZUNsYXNzIiwicHJvZHVjdHNDb250YWluZXJDbGFzcyIsIl9jbGFzc0NhbGxDaGVjayIsInVuZGVmaW5lZCIsIl9zZWxmIiwiX3RpdGxlIiwicXVlcnlTZWxlY3RvckFsbCIsIl9wcm9kdWN0cyIsIl9jcmVhdGVDbGFzcyIsImtleSIsInZhbHVlIiwiaW5uZXJIVE1MIiwidGl0bGUiLCJwcm9kdWN0cyIsImluc2VydEFkamFjZW50SFRNTCIsIkZpbHRlciIsImNvbnRhaW5lckJyYW5kcyIsImNvbnRhaW5lckZpbHRlciIsIl9jb250YWluZXJCcmFuZHMiLCJfYnJhbmRJdGVtIiwiX2NvbnRhaW5lckZpbHRlciIsIl9maWx0ZXJJdGVtIiwic2VhcmNoSXRlbSIsIl9hY3RpdmVDbGFzcyIsIl9zb3J0VHlwZUFzYyIsImNsYXNzIiwiZGF0YVNvcnQiLCJfc29ydFR5cGVEZXNjIiwiaW5pdCIsImZvckVhY2giLCJpdGVtIiwicGFyZW50IiwiY2xvc2VzdCIsInJlbW92ZUF0dHJpYnV0ZSIsImFkZCIsInNldEF0dHJpYnV0ZSIsImNvbnRhaW5zIiwiZ2V0UXVlcnkiLCJhcnJheVF1ZXJ5IiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJwdXNoIiwiZ2V0QXR0cmlidXRlIiwiam9pbiIsImNvbnNvbGUiLCJsb2ciLCJfdG9vZ2xlU29ydCIsIl9jbGVhbkNsYXNzRmlsdGVyQWxsIiwiX2FkZENsYXNzRmlsdGVyIiwiX3F1ZXJ5Rm9ybWF0aW9uIiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsIl9zZWxlY3RCcmFuZCIsIkFqYXhHZXRQcm9kdWN0cyIsInVybCIsInR5cGUiLCJfdXJsIiwiX3R5cGUiLCJhamF4IiwiWE1MSHR0cFJlcXVlc3QiLCJyZXN1bHQiLCJKU09OIiwicGFyc2UiLCJyZXNwb25zZSIsImRhdGEiLCJfcHJvZ3Jlc3MiLCJfY29tcGxldGUiLCJ0b0xvd2VyQ2FzZSIsIm9wZW4iLCJzZW5kIiwiYWpheENvbm5lY3QiLCJmaWx0ZXIiLCJlIiwiZmluZCIsInNsaWRlVG9nZ2xlIiwibWVudUxpbmsiLCJhY3RpdmVMaW5rIiwiaG92ZXJCb3giLCJhY3RpdmVMaW5rUG9zTGVmdCIsInBvc2l0aW9uIiwibGVmdCIsImFjdGl2ZUxpbmtQb3NUb3AiLCJ0b3AiLCJjaGVjayIsImlubmVyV2lkdGgiLCJpbm5lckhlaWdodCIsInJlc2l6ZVBvcyIsImNzcyIsIndpZHRoIiwiaGVpZ2h0IiwiaG92ZXIiLCJuZXdMaW5rUG9zTGVmdCIsIm5ld0xpbmtQb3NUb3AiLCJuZXdMaW5rV2lkdGgiLCJuZXdMaW5rSGVpZ2h0IiwicmVzaXplIiwic2NlbmUiLCJQYXJhbGxheCIsInRvZ2dsZUNsYXNzIl0sIm1hcHBpbmdzIjoibVpBQ0lBLEVBQUVDLFVBQVVDLEdBQUcsUUFBUyx1QkFBd0IsV0FDdkNGLEVBQUVHLE1BQU1DLFNBQVMsYUFDbEJKLEVBQUVHLE1BQU1FLFNBQVMsV0FDakJMLEVBQUVHLE1BQU1FLFNBQVMsaUJBQ2pCQyxXQUFXLFdBQ1BOLEVBQUVHLE1BQU1JLFlBQVksaUJBQ3BCUCxFQUFFRyxNQUFNSSxZQUFZLFlBQ3RCQyxLQUFLTCxNQUFPLFFDUnpCLFdBQ0csSUFBSU0sRUFBVVIsU0FBU1MsZUFBZSxlQUV0Q0QsRUFBUUUsaUJBQWlCLFFBQVMsV0FDOUJGLEVB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RUFBUWxILFNBQVNTLGVBQWUsU0FDYixJQUFJMEcsU0FBU0QsR0FGdkMsR0NDR25ILEVBQUVDLFVBQVVDLEdBQUcsUUFBUyxzQkFBdUIsV0FDM0NGLEVBQUVHLE1BQU1pRCxRQUFRLGVBQWV3QyxLQUFLLHVCQUF1QnlCLFlBQVksYUFDdkVySCxFQUFFRyxNQUFNaUQsUUFBUSxlQUFld0MsS0FBSyx3QkFBd0JDLFlBQVkiLCJmaWxlIjoibWFpbi5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyI7KGZ1bmN0aW9uKCkge1xyXG4gICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5wcm9kdWN0LXJvd19fYnV0dG9uJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgaWYgKCEkKHRoaXMpLmhhc0NsYXNzKCdhbmltYXRlJykpIHtcclxuICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnYW5pbWF0ZScpO1xyXG4gICAgICAgICAgICAkKHRoaXMpLmFkZENsYXNzKFwiYnV0dG9uLS1jaGVja1wiKTtcclxuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoXCJidXR0b24tLWNoZWNrXCIpO1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcygnYW5pbWF0ZScpO1xyXG4gICAgICAgICAgICB9LmJpbmQodGhpcyksIDIwMDApO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59KSgpO1xyXG4iLCI7KGZ1bmN0aW9uKCkge1xyXG4gICAgbGV0IG1lbnVCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWVudS1idXR0b24nKTtcclxuXHJcbiAgICBtZW51QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgbWVudUJ0bi5jbGFzc0xpc3QudG9nZ2xlKCdvcGVuZWQnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHdpbmRvdy5vbnJlc2l6ZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIG1lbnVCdG4uY2xhc3NMaXN0LnJlbW92ZSgnb3BlbmVkJyk7XHJcbiAgICB9XHJcbiAgICB3aW5kb3cub25zY3JvbGwgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICBtZW51QnRuLmNsYXNzTGlzdC5yZW1vdmUoJ29wZW5lZCcpO1xyXG4gICAgfVxyXG59KSgpO1xyXG4iLCI7KGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgY2xhc3MgQ2F0YWxvZyB7XHJcbiAgICAgICAgY29uc3RydWN0b3Ioc2VsZiwgdGl0bGVDbGFzcywgcHJvZHVjdHNDb250YWluZXJDbGFzcyl7XHJcbiAgICAgICAgICAgIGlmIChzZWxmID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLl9zZWxmID0gc2VsZjtcclxuICAgICAgICAgICAgdGhpcy5fdGl0bGUgPSB0aGlzLl9zZWxmLnF1ZXJ5U2VsZWN0b3JBbGwoXCIuXCIgKyB0aXRsZUNsYXNzKVswXTtcclxuICAgICAgICAgICAgdGhpcy5fcHJvZHVjdHMgPSB0aGlzLl9zZWxmLnF1ZXJ5U2VsZWN0b3JBbGwoXCIuXCIgKyBwcm9kdWN0c0NvbnRhaW5lckNsYXNzKVswXTtcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICBfY2xlYW5Qcm9kdWN0cygpIHtcclxuICAgICAgICAgICAgdGhpcy5fcHJvZHVjdHMuaW5uZXJIVE1MID0gXCJcIjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIF9wbGF5UHJlbG9hZGVyKCkge1xyXG4gICAgICAgICAgICAvLyDQodC00LXQu9Cw0YLRjCDQt9Cw0L/Rg9GB0Log0L/RgNC10LvQvtGD0LTQtdGA0LBcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIF9zdG9wUHJlbG9hZGVyKCkge1xyXG4gICAgICAgICAgICAvLyDQodC00LXQu9Cw0YLRjCDQvtGB0YLQsNC90L7QstC60YMg0L/RgNC10LvQvtGD0LTQtdGA0LBcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHVwZGF0ZVRpdGxlKHRpdGxlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3RpdGxlLmlubmVySFRNTCA9IHRpdGxlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdXBkYXRlTGlzdFByb2R1Y3RzKHByb2R1Y3RzKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3Byb2R1Y3RzLmlubmVySFRNTCA9IHByb2R1Y3RzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgYWRkUHJvZHVjdHMocHJvZHVjdHMpIHtcclxuICAgICAgICAgICAgdGhpcy5fcHJvZHVjdHMuaW5zZXJ0QWRqYWNlbnRIVE1MKFwiYmVmb3JlZW5kXCIsIHByb2R1Y3RzKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY2xhc3MgRmlsdGVyIHtcclxuICAgICAgICBjb25zdHJ1Y3Rvcihjb250YWluZXJCcmFuZHMsIGNvbnRhaW5lckZpbHRlcikge1xyXG4gICAgICAgICAgICBpZiAoY29udGFpbmVyQnJhbmRzID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoY29udGFpbmVyRmlsdGVyID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5fY29udGFpbmVyQnJhbmRzID0gY29udGFpbmVyQnJhbmRzO1xyXG4gICAgICAgICAgICB0aGlzLl9icmFuZEl0ZW0gPSB0aGlzLl9jb250YWluZXJCcmFuZHMucXVlcnlTZWxlY3RvckFsbChcIi5jYXRhbG9nLW5hdl9fY29udHJvbHMtbGlua1wiKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX2NvbnRhaW5lckZpbHRlciA9IGNvbnRhaW5lckZpbHRlcjtcclxuICAgICAgICAgICAgdGhpcy5fZmlsdGVySXRlbSA9IHRoaXMuX2NvbnRhaW5lckZpbHRlci5xdWVyeVNlbGVjdG9yQWxsKFwiLmNhdGFsb2ctZmlsdGVyX19jb2wtYnRuXCIpO1xyXG4gICAgICAgICAgICB0aGlzLnNlYXJjaEl0ZW0gPSB0aGlzLl9jb250YWluZXJGaWx0ZXIucXVlcnlTZWxlY3RvckFsbChcIi5jYXRhbG9nLWZpbHRlcl9fZm9ybVwiKVswXTtcclxuICAgICAgICAgICAgdGhpcy5fYWN0aXZlQ2xhc3MgPSBcImlzLWFjdGl2ZVwiO1xyXG4gICAgICAgICAgICB0aGlzLl9zb3J0VHlwZUFzYyA9IHtcclxuICAgICAgICAgICAgICAgIGNsYXNzOiBcInNvcnQtZG93blwiLFxyXG4gICAgICAgICAgICAgICAgZGF0YVNvcnQ6IFwiYXNjXCJcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgdGhpcy5fc29ydFR5cGVEZXNjID0ge1xyXG4gICAgICAgICAgICAgICAgY2xhc3M6IFwic29ydC11cFwiLFxyXG4gICAgICAgICAgICAgICAgZGF0YVNvcnQ6IFwiZGVzY1wiXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuaW5pdCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgX2NsZWFuQ2xhc3NGaWx0ZXJBbGwoKSB7XHJcbiAgICAgICAgICAgIGxldCBzZWxmID0gdGhpcztcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX2ZpbHRlckl0ZW0uZm9yRWFjaChmdW5jdGlvbihpdGVtKXtcclxuICAgICAgICAgICAgICAgIGxldCBwYXJlbnQgPSBpdGVtLmNsb3Nlc3QoXCIuY2F0YWxvZy1maWx0ZXJfX2NvbFwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbS5jbGFzc0xpc3QucmVtb3ZlKHNlbGYuX2FjdGl2ZUNsYXNzKTtcclxuICAgICAgICAgICAgICAgICAgICBpdGVtLmNsYXNzTGlzdC5yZW1vdmUoc2VsZi5fc29ydFR5cGVBc2MuY2xhc3MpO1xyXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudC5yZW1vdmVBdHRyaWJ1dGUoXCJkYXRhLXNvcnRcIik7XHJcblxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIF9hZGRDbGFzc0ZpbHRlcihpdGVtKSB7XHJcbiAgICAgICAgICAgIGxldCBwYXJlbnQgPSBpdGVtLmNsb3Nlc3QoXCIuY2F0YWxvZy1maWx0ZXJfX2NvbFwiKTtcclxuXHJcbiAgICAgICAgICAgIGl0ZW0uY2xhc3NMaXN0LmFkZCh0aGlzLl9hY3RpdmVDbGFzcyk7XHJcbiAgICAgICAgICAgIGl0ZW0uY2xhc3NMaXN0LmFkZCh0aGlzLl9zb3J0VHlwZUFzYy5jbGFzcyk7XHJcblxyXG4gICAgICAgICAgICBwYXJlbnQuc2V0QXR0cmlidXRlKFwiZGF0YS1zb3J0XCIsIHRoaXMuX3NvcnRUeXBlQXNjLmRhdGFTb3J0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIF90b29nbGVTb3J0KGl0ZW0pIHtcclxuICAgICAgICAgICAgbGV0IHBhcmVudCA9IGl0ZW0uY2xvc2VzdChcIi5jYXRhbG9nLWZpbHRlcl9fY29sXCIpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGl0ZW0uY2xhc3NMaXN0LmNvbnRhaW5zKHRoaXMuX3NvcnRUeXBlQXNjLmNsYXNzKSkge1xyXG4gICAgICAgICAgICAgICAgaXRlbS5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX3NvcnRUeXBlQXNjLmNsYXNzKTtcclxuICAgICAgICAgICAgICAgIGl0ZW0uY2xhc3NMaXN0LmFkZCh0aGlzLl9zb3J0VHlwZURlc2MuY2xhc3MpO1xyXG5cclxuICAgICAgICAgICAgICAgIHBhcmVudC5zZXRBdHRyaWJ1dGUoXCJkYXRhLXNvcnRcIiwgdGhpcy5fc29ydFR5cGVEZXNjLmRhdGFTb3J0KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGl0ZW0uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9zb3J0VHlwZURlc2MuY2xhc3MpO1xyXG4gICAgICAgICAgICAgICAgaXRlbS5jbGFzc0xpc3QuYWRkKHRoaXMuX3NvcnRUeXBlQXNjLmNsYXNzKTtcclxuXHJcbiAgICAgICAgICAgICAgICBwYXJlbnQuc2V0QXR0cmlidXRlKFwiZGF0YS1zb3J0XCIsIHRoaXMuX3NvcnRUeXBlQXNjLmRhdGFTb3J0KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIF9zZWxlY3RCcmFuZChpdGVtKSB7XHJcbiAgICAgICAgICAgIGlmICghaXRlbS5jbGFzc0xpc3QuY29udGFpbnMoXCJpcy1hY3RpdmVcIikpe1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fYnJhbmRJdGVtLmZvckVhY2goZnVuY3Rpb24oaXRlbSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGl0ZW0uY2xhc3NMaXN0LnJlbW92ZShcImlzLWFjdGl2ZVwiKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgaXRlbS5jbGFzc0xpc3QuYWRkKFwiaXMtYWN0aXZlXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBfcXVlcnlGb3JtYXRpb24oKSB7XHJcbiAgICAgICAgICAgIC8v0JzQtdGC0L7QtCDRhNC+0YDQvNC40YDQvtCy0LDQvdC40Y8gZ2V0INC30LDQv9GA0L7RgdCwXHJcbiAgICAgICAgICAgIGxldCBhcnJheVF1ZXJ5ID0gW10sXHJcbiAgICAgICAgICAgICAgICBzZWFyY2hJdGVtID0gdGhpcy5zZWFyY2hJdGVtLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaW5wdXRcIilbMF0sXHJcbiAgICAgICAgICAgICAgICBnZXRRdWVyeTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX2JyYW5kSXRlbS5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pIHtcclxuICAgICAgICAgICAgICAgIGlmIChpdGVtLmNsYXNzTGlzdC5jb250YWlucyhcImlzLWFjdGl2ZVwiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFycmF5UXVlcnkucHVzaChcImJyYW5kPVwiICsgaXRlbS5nZXRBdHRyaWJ1dGUoXCJkYXRhLWJyYW5kXCIpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLl9maWx0ZXJJdGVtLmZvckVhY2goZnVuY3Rpb24oaXRlbSkge1xyXG4gICAgICAgICAgICAgICAgbGV0IHBhcmVudCA9IGl0ZW0uY2xvc2VzdChcIi5jYXRhbG9nLWZpbHRlcl9fY29sXCIpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGl0ZW0uY2xhc3NMaXN0LmNvbnRhaW5zKFwiaXMtYWN0aXZlXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXJyYXlRdWVyeS5wdXNoKFwic29ydD1cIiArIHBhcmVudC5nZXRBdHRyaWJ1dGUoXCJkYXRhLXNvcnRcIikpO1xyXG4gICAgICAgICAgICAgICAgICAgIGFycmF5UXVlcnkucHVzaChcInNvcnRUeXBlPVwiICsgcGFyZW50LmdldEF0dHJpYnV0ZShcImRhdGEtZmlsdGVyXCIpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBpZiAoc2VhcmNoSXRlbS52YWx1ZSAhPT0gXCJcIikge1xyXG4gICAgICAgICAgICAgICAgYXJyYXlRdWVyeS5wdXNoKFwic2VhcmNoPVwiICsgc2VhcmNoSXRlbS52YWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGdldFF1ZXJ5ID0gXCI/XCIgKyBhcnJheVF1ZXJ5LmpvaW4oXCImXCIpO1xyXG5cclxuICAgICAgICAgICAgLy9Ub2RvOiDQt9C00LXRgdGMINC00L7Qu9C20LXQvSDQstGL0LfRi9Cy0LDRgtGM0YHRjyBhamF4INC4INC/0YDQuNC90LjQvNCw0YLRjCBnZXQg0YHRgtGA0L7QutGDXHJcbiAgICAgICAgICAgIC8vVG9kbzog0LfQtNC10YHRjCDQtNC+0LvQttC10L0g0LLRi9C30YvQstCw0YLRjNGB0Y8gaGlzdG9yeUFQSSDQtNC70Y8g0YHQvtGF0YDQsNC90LXQvdC40Y8g0LjRgdGC0L7RgNC40Lgg0YEgZ2V0INC30LDQv9GA0L7RgdCw0LzQuFxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhnZXRRdWVyeSk7XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaW5pdCgpIHtcclxuICAgICAgICAgICAgbGV0IHNlbGYgPSB0aGlzO1xyXG4gICAgICAgICAgICB0aGlzLl9maWx0ZXJJdGVtLmZvckVhY2goZnVuY3Rpb24oaXRlbSl7XHJcbiAgICAgICAgICAgICAgICBpdGVtLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbS5jbGFzc0xpc3QuY29udGFpbnMoc2VsZi5fYWN0aXZlQ2xhc3MpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX3Rvb2dsZVNvcnQodGhpcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8v0JLRi9C30L7QsiDQvNC10YLQvtC00LAg0YTQvtGA0LzQuNGA0L7QstCw0L3QuNGPIEdldCDQt9Cw0L/RgNC+0YHQsFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9xdWVyeUZvcm1hdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX2NsZWFuQ2xhc3NGaWx0ZXJBbGwoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fYWRkQ2xhc3NGaWx0ZXIodGhpcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8v0JLRi9C30L7QsiDQvNC10YLQvtC00LAg0YTQvtGA0LzQuNGA0L7QstCw0L3QuNGPIEdldCDQt9Cw0L/RgNC+0YHQsFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9xdWVyeUZvcm1hdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX2JyYW5kSXRlbS5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pIHtcclxuICAgICAgICAgICAgICAgIGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uKGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuY2xhc3NMaXN0LmNvbnRhaW5zKFwiaXMtYWN0aXZlXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX3NlbGVjdEJyYW5kKHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL9CS0YvQt9C+0LIg0LzQtdGC0L7QtNCwINGE0L7RgNC80LjRgNC+0LLQsNC90LjRjyBHZXQg0LfQsNC/0YDQvtGB0LBcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fcXVlcnlGb3JtYXRpb24oKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KVxyXG5cclxuICAgICAgICAgICAgdGhpcy5zZWFyY2hJdGVtLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaW5wdXRcIilbMF0uYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgLy/QktGL0LfQvtCyINC80LXRgtC+0LTQsCDRhNC+0YDQvNC40YDQvtCy0LDQvdC40Y8gR2V0INC30LDQv9GA0L7RgdCwXHJcbiAgICAgICAgICAgICAgICBzZWxmLl9xdWVyeUZvcm1hdGlvbigpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG4gICAgY2xhc3MgQWpheEdldFByb2R1Y3RzIHtcclxuICAgICAgICBjb25zdHJ1Y3Rvcih1cmwsIHR5cGUpIHtcclxuICAgICAgICAgICAgdGhpcy5fdXJsID0gdXJsO1xyXG4gICAgICAgICAgICB0aGlzLl90eXBlID0gdHlwZTtcclxuICAgICAgICAgICAgdGhpcy5hamF4ID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBfcHJvZ3Jlc3MoKSB7XHJcbiAgICAgICAgICAgIC8vINCh0LTQtdC70LDRgtGMINC00LXQudGB0YLQstC40LUg0LLQviDQstGA0LXQvNGPINC/0YDQvtGG0LXRgdGB0LAg0LfQsNCz0YDRg9C30LrQuFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgX2NvbXBsZXRlKCkge1xyXG4gICAgICAgICAgICAvLyBpZiAodGhpcy5zdGF0dXMgIT0gMjAwKSB7XHJcbiAgICAgICAgICAgIC8vICAgLy8g0L7QsdGA0LDQsdC+0YLQsNGC0Ywg0L7RiNC40LHQutGDXHJcbiAgICAgICAgICAgIC8vICAgY29uc29sZS5sb2coIHRoaXMuc3RhdHVzICsgJzogJyArIHRoaXMuc3RhdHVzVGV4dCApOyAvLyDQv9GA0LjQvNC10YAg0LLRi9Cy0L7QtNCwOiA0MDQ6IE5vdCBGb3VuZFxyXG4gICAgICAgICAgICAvLyB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyAgIC8vINCy0YvQstC10YHRgtC4INGA0LXQt9GD0LvRjNGC0LDRglxyXG4gICAgICAgICAgICAvLyAgIGxldCBvYmogPSBKU09OLnBhcnNlKHRoaXMucmVzcG9uc2UpXHJcbiAgICAgICAgICAgIC8vICAgY29uc29sZS5sb2coIG9iaiApOyAvLyByZXNwb25zZVRleHQgLS0g0YLQtdC60YHRgiDQvtGC0LLQtdGC0LAuXHJcbiAgICAgICAgICAgIGxldCByZXN1bHQgPSBKU09OLnBhcnNlKHRoaXMucmVzcG9uc2UpO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzdWx0KTtcclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzZW5kKGRhdGEpIHtcclxuICAgICAgICAgICAgdGhpcy5hamF4LmFkZEV2ZW50TGlzdGVuZXIoXCJwcm9ncmVzc1wiLCB0aGlzLl9wcm9ncmVzcywgZmFsc2UpO1xyXG4gICAgICAgICAgICB0aGlzLmFqYXguYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgdGhpcy5fY29tcGxldGUsIGZhbHNlKTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLl90eXBlLnRvTG93ZXJDYXNlKCkgPT09IFwiZ2V0XCIpIHtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLmFqYXgub3Blbih0aGlzLl90eXBlLCB0aGlzLl91cmwpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hamF4LnNlbmQoKTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcImdldFwiKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLl90eXBlLnRvTG93ZXJDYXNlKCkgPT09IFwicG9zdFwiKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcInBvc3RcIik7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkVycm9yXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICBsZXQgY2F0YWxvZFRlc3QgPSBuZXcgQ2F0YWxvZyhkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNhdGFsb2dcIilbMF0sIFwiY2F0YWxvZ19fdGl0bGVcIiwgXCJjYXRhbG9nX19jb250YWluZXJcIik7XHJcbiAgICBsZXQgYWpheENvbm5lY3QgPSBuZXcgQWpheEdldFByb2R1Y3RzKFwidGVzdC5qc29uXCIsIFwiZ2V0XCIpO1xyXG4gICAgbGV0IGZpbHRlciA9IG5ldyBGaWx0ZXIoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5jYXRhbG9nLW5hdl9fY29udHJvbHNcIilbMF0sIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY2F0YWxvZy1maWx0ZXJcIilbMF0pO1xyXG5cclxuICAgIGFqYXhDb25uZWN0LnNlbmQoe2RhdGE6IDF9KTtcclxuXHJcbiAgICAvL9Ci0LXRgdGCXHJcbiAgICAvLyB3aW5kb3cuZGl2QXJyYXkgPSBkaXZBcnJheTtcclxuICAgIHdpbmRvdy5maWx0ZXIgPSBmaWx0ZXI7XHJcbn0pKCk7XHJcbiIsIjsoZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgYnV0dG9uID0gJCgnLmZvb3Rlcl9fY29sLXRpdGxlJyk7XHJcblxyXG4gICAgYnV0dG9uLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcuZm9vdGVyX19jb2wnKS5maW5kKCcuZm9vdGVyX19jb2wtbGlzdCcpLnNsaWRlVG9nZ2xlKDMwMCk7XHJcbiAgICB9KTtcclxufSkoKTtcclxuIiwiOyhmdW5jdGlvbigpIHtcclxuXHJcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICB2YXIgbWVudUxpbmsgPSAkKCcuY2F0YWxvZy1uYXZfX2NvbnRyb2xzLWxpbmsnKSxcclxuICAgICAgICAgICAgbWVudSA9ICQoJy5jYXRhbG9nLW5hdl9fY29udHJvbHMtbGlzdCcpO1xyXG5cclxuICAgICAgICB2YXIgbWVudUl0ZW0gPSAkKCcuY2F0YWxvZy1uYXZfX2NvbnRyb2xzLWl0ZW0nKSxcclxuICAgICAgICAgICAgYWN0aXZlTGluayA9ICQoJy5jYXRhbG9nLW5hdl9fY29udHJvbHMtbGluay5pcy1hY3RpdmUnKSxcclxuICAgICAgICAgICAgaG92ZXJCb3ggPSAkKCcuY2F0YWxvZy1uYXZfX2hvdmVyJyksXHJcbiAgICAgICAgICAgIGFjdGl2ZUxpbmtQb3NMZWZ0ID0gYWN0aXZlTGluay5wb3NpdGlvbigpLmxlZnQsXHJcbiAgICAgICAgICAgIGFjdGl2ZUxpbmtQb3NUb3AgPSBhY3RpdmVMaW5rLnBvc2l0aW9uKCkudG9wLFxyXG4gICAgICAgICAgICBhY3RpdmVMaW5rV2lkdGggPSBhY3RpdmVMaW5rLmlubmVyV2lkdGgoKSxcclxuICAgICAgICAgICAgYWN0aXZlTGlua0hlaWdodCA9IGFjdGl2ZUxpbmsuaW5uZXJIZWlnaHQoKTtcclxuXHJcbiAgICAgICAgdmFyIGNoZWNrID0gZmFsc2U7XHJcbiAgICAgICAgbWVudUxpbmsuaG92ZXIoXHJcbiAgICAgICAgICBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdmFyIG5ld0xpbmtQb3NMZWZ0ID0gJCh0aGlzKS5wb3NpdGlvbigpLmxlZnQsXHJcbiAgICAgICAgICAgICAgICBuZXdMaW5rUG9zVG9wID0gJCh0aGlzKS5wb3NpdGlvbigpLnRvcCxcclxuICAgICAgICAgICAgICAgIG5ld0xpbmtXaWR0aCA9ICQodGhpcykuaW5uZXJXaWR0aCgpLFxyXG4gICAgICAgICAgICAgICAgbmV3TGlua0hlaWdodCA9ICQodGhpcykuaW5uZXJIZWlnaHQoKTtcclxuICAgICAgICAgICAgaG92ZXJCb3guY3NzKHsnbGVmdCcgOiBuZXdMaW5rUG9zTGVmdCwgJ3RvcCcgOiBuZXdMaW5rUG9zVG9wLCAnd2lkdGgnIDogbmV3TGlua1dpZHRoLCAnaGVpZ2h0JyA6IG5ld0xpbmtIZWlnaHR9KTtcclxuICAgICAgICAgICAgY2hlY2sgPSBmYWxzZTtcclxuICAgICAgICB9LFxyXG4gICAgICAgICAgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICBpZiAoY2hlY2spIHtcclxuICAgICAgICAgICAgICAgIGhvdmVyQm94LmNzcyh7J2xlZnQnIDogYWN0aXZlTGlua1Bvc0xlZnQsICd0b3AnIDogYWN0aXZlTGlua1Bvc1RvcCwgJ3dpZHRoJyA6IDAsICdoZWlnaHQnIDogMH0pO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSwgMTAwMCk7XHJcbiAgICAgICAgICAgIGNoZWNrID0gdHJ1ZTtcclxuICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG5cclxuICAgICAgICBmdW5jdGlvbiByZXNpemVQb3MoKSB7XHJcbiAgICAgICAgICAgIGFjdGl2ZUxpbmtQb3NMZWZ0ID0gYWN0aXZlTGluay5wb3NpdGlvbigpLmxlZnQsXHJcbiAgICAgICAgICAgIGFjdGl2ZUxpbmtQb3NUb3AgPSBhY3RpdmVMaW5rLnBvc2l0aW9uKCkudG9wLFxyXG4gICAgICAgICAgICBhY3RpdmVMaW5rV2lkdGggPSBhY3RpdmVMaW5rLmlubmVyV2lkdGgoKSxcclxuICAgICAgICAgICAgYWN0aXZlTGlua0hlaWdodCA9IGFjdGl2ZUxpbmsuaW5uZXJIZWlnaHQoKTtcclxuXHJcbiAgICAgICAgICAgIGhvdmVyQm94LmNzcyh7J2xlZnQnIDogYWN0aXZlTGlua1Bvc0xlZnQsICd0b3AnIDogYWN0aXZlTGlua1Bvc1RvcCwgJ3dpZHRoJyA6IDAsICdoZWlnaHQnIDogMH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJCh3aW5kb3cpLnJlc2l6ZShmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgcmVzaXplUG9zKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmVzaXplUG9zKCk7XHJcbiAgICB9KTtcclxuXHJcblxyXG59KSgpO1xyXG4iLCI7KGZ1bmN0aW9uKCkge1xyXG4gICAgbGV0IHNjZW5lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NjZW5lJyk7XHJcbiAgICBsZXQgcGFyYWxsYXhJbnN0YW5jZSA9IG5ldyBQYXJhbGxheChzY2VuZSk7XHJcblxyXG4gICAgXHJcbn0pKCk7XHJcbiIsIjsoZnVuY3Rpb24oKSB7XHJcbiAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLnNsaWRlLWluZm9fX2J1dHRvbicsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICQodGhpcykuY2xvc2VzdCgnLnNsaWRlLWluZm8nKS5maW5kKCcuc2xpZGUtaW5mb19fYnV0dG9uJykudG9nZ2xlQ2xhc3MoJ2lzLWFjdGl2ZScpO1xyXG4gICAgICAgICQodGhpcykuY2xvc2VzdCgnLnNsaWRlLWluZm8nKS5maW5kKCcuc2xpZGUtaW5mb19fY29udGVudCcpLnNsaWRlVG9nZ2xlKDMwMCk7XHJcbiAgICB9KTtcclxufSkoKTtcclxuIl19
