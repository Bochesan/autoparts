"use strict";function load_basket(){$("div.basket").load("/ajax/get_basket.php")}function load_basket_mini(){$("div.header-buttons").load("/ajax/get_basket_mini.php")}function add2basket(t){$.get("/ajax/add2basket.php",{id:t},function(t){"ok"==t?(visualAddBasket(),load_basket(),load_basket_mini()):alert(t)})}function visualAddBasket(){$(".sucsess--basket").addClass("active"),setTimeout(function(){$(".sucsess--basket").removeClass("active")},3500)}function add2basketngo(t){$.get("/ajax/add2basket.php",{id:t},function(t){})}function remove_from_basket(t,e){$.get("/ajax/remove_from_basket.php",{id:t,full:e},function(t){load_basket(),load_basket_mini()})}function clear_basket(t){$.get("/ajax/clear_basket.php",function(t){load_basket(),load_basket_mini()})}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _possibleConstructorReturn(t,e){return!e||"object"!==_typeof(e)&&"function"!=typeof e?_assertThisInitialized(t):e}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}$(document).on("click",".button--basket",function(){$(this).hasClass("animate")||($(this).addClass("animate"),$(this).addClass("button--check"),setTimeout(function(){$(this).removeClass("button--check"),$(this).removeClass("animate")}.bind(this),2e3))}),$(document).ready(function(){$(document).on("click",".catalog__more-button",function(){var a=$(".catalog__product"),t=$(".catalog__more-button").attr("data-url");void 0!==t&&$.ajax({type:"GET",url:t,dataType:"html",success:function(t){$(".catalog__more").remove();var e=$(t).find(".product-row"),n=$(t).find(".catalog__more");a.append(e),a.append(n)}})})}),window.addEventListener("load",function(){$(".hr-sect").length&&$(".hr-pagination__step").click(function(){var t=$(this);if(!t.hasClass("is-active")){t.closest(".hr-sect").find(".hr-pagination__step").removeClass("is-active").removeClass("button"),t.addClass("is-active").addClass("button"),t.attr("data-index");var e=t.closest(".hr-sect").find(".hr-slider-slide");e.removeClass("is-active"),e.each(function(t,e){$(this).attr("data-index")==$(".hr-pagination__step.is-active").attr("data-index")&&$(this).addClass("is-active")})}})}),function(){var t=document.getElementById("menu-button");t.addEventListener("click",function(){t.classList.toggle("opened")}),window.onresize=function(){t.classList.remove("opened")},window.onscroll=function(){t.classList.remove("opened")}}(),function(){var t=$(".buttonCart__button"),e=$(".delivery");e.length&&$(window).scroll(function(){$(this).scrollTop()+$(this).height()>=e.offset().top?t.addClass("buttonCart__button--hide"):t.removeClass("buttonCart__button--hide")}),$(".buttonCart").click(function(){$("body").animate({scrollTop:e.offset().top-$("header").height()},1100),$("html").animate({scrollTop:e.offset().top-$("header").height()},1100)})}(),$("[data-fancybox]").fancybox({hash:!1}),function(){var t=$("header"),e=$(".main-content"),n=t.height();$(window).on("load scroll",function(){$(this).scrollTop()>n?(t.addClass("fixed"),e.css({"padding-top":n})):(t.removeClass("fixed"),e.css({"padding-top":0}))})}(),$(".footer__col-title").on("click",function(t){t.preventDefault(),$(this).closest(".footer__col").find(".footer__col-list").slideToggle(300)}),function(){var e=function(){function s(t,e,n,a){_classCallCheck(this,s),this._self=t,this._inputTag=this._self.getElementsByTagName("input")[0],this._classError=e||"",this._classFocus=n||"",this._classNoEmety=a||"",this._validInputIndex=!1}return _createClass(s,[{key:"_validationNoEmety",value:function(t){return""!==t.value||(this._error(),!1)}},{key:"_error",value:function(){var t=this._classError,e=this._self;t&&(e.classList.add(t),setTimeout(function(){e.classList.remove(t)},1500))}},{key:"focusIn",value:function(){var t=this._classFocus;t&&this._self.classList.add(t)}},{key:"focusOut",value:function(){var t=this._classFocus;t&&this._self.classList.remove(t)}},{key:"noEmetyInputTest",value:function(){var t=this._classNoEmety;t&&(""!==this._inputTag.value?this._self.classList.add(t):this._self.classList.remove(t))}},{key:"validation",value:function(){switch(this._inputTag.getAttribute("data-valid")){case"noEmety":this._validInputIndex=this._validationNoEmety(this._inputTag);break;default:this._validInputIndex=!0}}},{key:"input",get:function(){return this._inputTag}},{key:"inputType",get:function(){return this._inputTag.getAttribute("data-valid")}},{key:"valValidation",get:function(){return this._validInputIndex}}]),s}(),i=function(t){function i(t,e,n,a){var s;return _classCallCheck(this,i),(s=_possibleConstructorReturn(this,_getPrototypeOf(i).call(this,t,e,n,a)))._inputTag=s._self.getElementsByTagName("textarea")[0],s}return _inherits(i,e),i}(),o=function(t){function i(t,e,n,a){var s;return _classCallCheck(this,i),(s=_possibleConstructorReturn(this,_getPrototypeOf(i).call(this,t,e,n,a)))._inputTag=s._self.getElementsByTagName("input")[0],s}return _inherits(i,e),_createClass(i,[{key:"_validationEmail",value:function(t){return 0===t.value.toLowerCase().search(/^[0-9a-z]([\.-]?\w+)*@[0-9a-z]([\.-]?[0-9a-z])*(\.[0-9a-z]{2,4})+$/)||(this._error(),!1)}},{key:"_validationPhone",value:function(t){return""!==t.value&&-1===t.value.indexOf("_")||(this._error(),!1)}},{key:"maskPhoneFunctional",value:function(){void 0===this._phoneMask&&(this._phoneMask=textMaskCore.createTextMaskInputElement({inputElement:this._inputTag,mask:["+","7","(",/[1-9]/,/\d/,/\d/,")"," ",/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/,/\d/]})),this._phoneMask.update()}},{key:"validation",value:function(){switch(this._inputTag.getAttribute("data-valid")){case"noEmety":this._validInputIndex=this._validationNoEmety(this._inputTag);break;case"email":this._validInputIndex=this._validationEmail(this._inputTag);break;case"phone":this._validInputIndex=this._validationPhone(this._inputTag);break;default:this._validInputIndex=!0}}}]),i}(),r=function(){function n(t,e){_classCallCheck(this,n),this._self=t,this._classError=e||"",this._inputTag=this._self.getElementsByTagName("input")[0],this._validInputIndex=!1}return _createClass(n,[{key:"_error",value:function(){var t=this._classError,e=this._self;t&&(e.classList.add(t),setTimeout(function(){e.classList.remove(t)},1500))}},{key:"_validationСhecked",value:function(t){return!!t.checked||(this._error(),!1)}},{key:"validation",value:function(){switch(this._inputTag.getAttribute("data-valid")){case"checked":this._validInputIndex=this._validationСhecked(this._inputTag);break;default:this._validInputIndex=!0}}},{key:"input",get:function(){return this._inputTag}},{key:"inputType",get:function(){return this._inputTag.getAttribute("data-valid")}},{key:"valValidation",get:function(){return this._validInputIndex}}]),n}(),n=function(){function n(t,e){_classCallCheck(this,n),this._self=t,this._classInputContainer=e.classInputContainer||"",this._classInputError=e.classInputError||"",this._classInputFocus=e.classInputFocus||"",this._classInputNoEmety=e.classInputNoEmety||"",this._classTextareaContainer=e.classTextareaContainer||"",this._classTextareaError=e.classTextareaError||"",this._classTextareaFocus=e.classTextareaFocus||"",this._classTextareaNoEmety=e.classTextareaNoEmety||"",this._classCheckboxContainer=e.classCheckboxContainer||"",this._classCheckboxError=e.classCheckboxError||"",this._inputsObjectArray=[],this._textareaObjectArray=[],this._checkboxObjectArray=[],this._validFormIndex=!1}return _createClass(n,[{key:"_ajaxSand",value:function(){var e=new XMLHttpRequest,n=this._self,t=n.getAttribute("type")||"post",a=n.getAttribute("action");if(e.open(t,a),"post"===t.toLowerCase()){e.addEventListener("load",function(){var t=n.closest(".formContainer");200===e.status?(t.classList.add("formContainer--done"),setTimeout(function(){n.reset(),t.classList.remove("formContainer--done")},3e3)):(t.classList.add("formContainer--error"),setTimeout(function(){n.reset(),t.classList.remove("formContainer--error")},3e3))});var s=function(t){if(!t||"FORM"!==t.nodeName)return;var e,n,a=[];for(e=t.elements.length-1;0<=e;e-=1)if(""!==t.elements[e].name)switch(t.elements[e].nodeName){case"INPUT":switch(t.elements[e].type){case"text":case"tel":case"email":case"hidden":case"password":case"button":case"reset":case"submit":a.push(t.elements[e].name+"="+encodeURIComponent(t.elements[e].value));break;case"checkbox":case"radio":t.elements[e].checked&&a.push(t.elements[e].name+"="+encodeURIComponent(t.elements[e].value))}break;case"file":break;case"TEXTAREA":a.push(t.elements[e].name+"="+encodeURIComponent(t.elements[e].value));break;case"SELECT":switch(t.elements[e].type){case"select-one":a.push(t.elements[e].name+"="+encodeURIComponent(t.elements[e].value));break;case"select-multiple":for(n=t.elements[e].options.length-1;0<=n;n-=1)t.elements[e].options[n].selected&&a.push(t.elements[e].name+"="+encodeURIComponent(t.elements[e].options[n].value))}break;case"BUTTON":switch(t.elements[e].type){case"reset":case"submit":case"button":a.push(t.elements[e].name+"="+encodeURIComponent(t.elements[e].value))}}return a.join("&")}(n);e.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),e.send(s),console.log(s)}}},{key:"_ajaxError",value:function(){console.log("Форма не прошла валидацию")}},{key:"submit",value:function(){var e=this;e._validFormIndex=!0,this._inputsObjectArray.forEach(function(t){t.validation(),!1===t.valValidation&&(e._validFormIndex=t.valValidation)}),this._textareaObjectArray.forEach(function(t){t.validation(),!1===t.valValidation&&(e._validFormIndex=t.valValidation)}),this._checkboxObjectArray.forEach(function(t){t.validation(),!1===t.valValidation&&(e._validFormIndex=t.valValidation)}),!0===e._validFormIndex?this._ajaxSand():this._ajaxError()}},{key:"init",value:function(){for(var t=this._self.querySelectorAll("."+this._classInputContainer),e=this._self.querySelectorAll("."+this._classTextareaContainer),n=this._self.querySelectorAll("."+this._classCheckboxContainer),a=this,s=0;s<t.length;++s)this._inputsObjectArray.push(new o(t[s],this._classInputError,this._classInputFocus,this._classInputNoEmety));for(s=0;s<e.length;++s)this._textareaObjectArray.push(new i(e[s],this._classTextareaError,this._classTextareaFocus,this._classTextareaNoEmety));for(s=0;s<n.length;++s)this._checkboxObjectArray.push(new r(n[s],this._classCheckboxError));this._inputsObjectArray.forEach(function(t){t.input.addEventListener("focusout",function(){t.validation(),t.noEmetyInputTest(),t.focusOut()}),t.input.addEventListener("focusin",function(){t.focusIn()}),"phone"===t.inputType&&t.input.addEventListener("input",function(){t.maskPhoneFunctional()})}),this._textareaObjectArray.forEach(function(t){t.input.addEventListener("focusout",function(){t.validation(),t.noEmetyInputTest(),t.focusOut()}),t.input.addEventListener("focusin",function(){t.focusIn()})}),this._self.addEventListener("submit",function(t){t.preventDefault(),a.submit()})}}]),n}(),t=document.querySelectorAll(".formYv");void 0!==t&&t.forEach(function(t){new n(t,{classInputContainer:"formYv__input",classInputError:"formYv__input--error",classInputFocus:"formYv__input--focus",classInputNoEmety:"formYv__input--noEmety",classTextareaContainer:"formYv__textarea",classTextareaError:"formYv__textarea--error",classTextareaFocus:"formYv__textarea--focus",classTextareaNoEmety:"formYv__textarea--noEmety",classCheckboxContainer:"formYv__checkbox",classCheckboxError:"formYv__checkbox--error"}).init()})}(),function(){function t(){if($(".catalog-nav__controls").length){var t=function(){a=n.position().left,i=n.position().top,n.innerWidth(),n.innerHeight(),s.css({left:a,top:i,width:0,height:0})},e=$(".catalog-nav__controls-link"),n=($(".catalog-nav__controls-list"),$(".catalog-nav__controls-item"),$(".catalog-nav__controls-link.is-active")),s=$(".catalog-nav__hover"),a=n.position().left,i=n.position().top,o=(n.innerWidth(),n.innerHeight(),!1);e.hover(function(){var t=$(this).position().left,e=$(this).position().top,n=$(this).innerWidth(),a=$(this).innerHeight();s.css({left:t,top:e,width:n,height:a}),o=!1},function(){setTimeout(function(){o&&s.css({left:a,top:i,width:0,height:0})},1e3),o=!0}),$(window).resize(function(){t()}),t()}}window.addEventListener("load",function(){t()}),window.hoverRoller=t}(),window.addEventListener("load",function(){$(".delivery__form-input").focusout(function(){""!==$(this).val()?$(this).parent().addClass("value"):$(this).parent().removeClass("value")})}),"undefined"!=typeof BX&&BX.addCustomEvent("onAjaxSuccess",function(){window.hoverRoller()}),function(){var t=document.getElementById("scene");if(null!=t)new Parallax(t)}(),document.addEventListener("DOMContentLoaded",function(){$(document).on("click",".button--buy",function(t){t.preventDefault(),$(".i-popup").addClass("opened");var e=this.getAttribute("data-itemname"),n=this.getAttribute("data-itemprice");document.getElementById("itemName").value=e,document.getElementById("itemPrice").value=n;var a=$(this).closest(".product-row__content").find(".product-row__title-image a").attr("href");$(".i-popup__box-image").attr("src",a)}),$(document).on("click",".i-popup__button, .i-popup__overlay",function(t){t.preventDefault(),$(".i-popup").removeClass("opened")})}),$(document).on("click",".slide-info__button",function(){$(this).closest(".slide-info").find(".slide-info__button").toggleClass("is-active"),$(this).closest(".slide-info").find(".slide-info__content").slideToggle(300)});
//# sourceMappingURL=../maps/main.min.js.map
