"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var s=0;s<e.length;s++){var i=e[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,e,s){return e&&_defineProperties(t.prototype,e),s&&_defineProperties(t,s),t}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var s=0;s<e.length;s++){var i=e[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,e,s){return e&&_defineProperties(t.prototype,e),s&&_defineProperties(t,s),t}$(document).on("click",".button--basket",function(){$(this).hasClass("animate")||($(this).addClass("animate"),$(this).addClass("button--check"),setTimeout(function(){$(this).removeClass("button--check"),$(this).removeClass("animate")}.bind(this),2e3))}),window.addEventListener("load",function(){$(".hr-sect").length&&$(".hr-pagination__step").click(function(){var t=$(this);if(!t.hasClass("is-active")){t.closest(".hr-sect").find(".hr-pagination__step").removeClass("is-active").removeClass("button"),t.addClass("is-active").addClass("button"),t.attr("data-index");var e=t.closest(".hr-sect").find(".hr-slider-slide");e.removeClass("is-active"),e.each(function(t,e){$(this).attr("data-index")==$(".hr-pagination__step.is-active").attr("data-index")&&$(this).addClass("is-active")})}})}),function(){var t=document.getElementById("menu-button");t.addEventListener("click",function(){t.classList.toggle("opened")}),window.onresize=function(){t.classList.remove("opened")},window.onscroll=function(){t.classList.remove("opened")}}(),function(){var t=function(){function o(t,e,s,i){if(_classCallCheck(this,o),void 0===t)return!1;this._self=t,this._title=this._self.querySelectorAll("."+e)[0],this._products=this._self.querySelectorAll("."+s)[0],this.preloader=this._self.querySelectorAll("."+i)[0]}return _createClass(o,[{key:"_cleanProducts",value:function(){this._products.innerHTML=""}},{key:"playPreloader",value:function(){this.preloader.classList.add("preloader--active")}},{key:"stopPreloader",value:function(){this.preloader.classList.remove("preloader--active")}},{key:"updateTitle",value:function(t){this._title.innerHTML=t,this._title.setAttribute("data-name",t)}},{key:"updateListProducts",value:function(t){this._products.innerHTML=t}},{key:"addProducts",value:function(t){this._products.insertAdjacentHTML("beforeend",t)}}]),o}(),e=function(){function i(t,e,s){return _classCallCheck(this,i),void 0!==t&&(void 0!==e&&(void 0!==s&&(this._containerBrands=t,this._brandItem=this._containerBrands.querySelectorAll(".catalog-nav__controls-link"),this._containerFilter=e,this._filterItem=this._containerFilter.querySelectorAll(".catalog-filter__col-btn"),this.searchItem=this._containerFilter.querySelectorAll(".catalog-filter__form")[0],this._activeClass="is-active",this._sortTypeAsc={class:"sort-down",dataSort:"asc"},this._sortTypeDesc={class:"sort-up",dataSort:"desc"},this._containerMore=s,this.timeOutAjax,void this.init())))}return _createClass(i,[{key:"_cleanClassFilterAll",value:function(){var s=this;this._filterItem.forEach(function(t){var e=t.closest(".catalog-filter__col");t.classList.remove(s._activeClass),t.classList.remove(s._sortTypeAsc.class),e.removeAttribute("data-sort")})}},{key:"_addClassFilter",value:function(t){var e=t.closest(".catalog-filter__col");console.log(t),t.classList.add(this._activeClass),t.classList.add(this._sortTypeAsc.class),e.setAttribute("data-sort",this._sortTypeAsc.dataSort)}},{key:"_toogleSort",value:function(t){var e=t.closest(".catalog-filter__col");t.classList.contains(this._sortTypeAsc.class)?(t.classList.remove(this._sortTypeAsc.class),t.classList.add(this._sortTypeDesc.class),e.setAttribute("data-sort",this._sortTypeDesc.dataSort)):(t.classList.remove(this._sortTypeDesc.class),t.classList.add(this._sortTypeAsc.class),e.setAttribute("data-sort",this._sortTypeAsc.dataSort))}},{key:"_selectBrand",value:function(t){t.classList.contains("is-active")||(this._brandItem.forEach(function(t){t.classList.remove("is-active")}),t.classList.add("is-active"))}},{key:"_queryFormation",value:function(t,e){clearTimeout(this.timeOutAjax);var s,i,o=[],n=this.searchItem.getElementsByTagName("input")[0];this._brandItem.forEach(function(t){t.classList.contains("is-active")&&(o.push("brand="+t.getAttribute("data-brand")),s=t.getAttribute("data-brand"))}),this._filterItem.forEach(function(t){var e=t.closest(".catalog-filter__col");t.classList.contains("is-active")&&(o.push("sort="+e.getAttribute("data-sort")),o.push("sortType="+e.getAttribute("data-filter")))}),""!==n.value&&o.push("search="+n.value),i="?"+o.join("&"),c.setHistory(i,s);var a=new r("test.json","get",t);void 0===e?a.send():(l.playPreloader(),this.timeOutAjax=setTimeout(function(){a.send()},e)),console.log(i)}},{key:"updateStateFilterFromUrl",value:function(e){var s=this;void 0!==e[0]?this._brandItem.forEach(function(t){t.getAttribute("data-brand")===e[0][1]&&s._selectBrand(t)}):this._selectBrand(this._brandItem[0]),void 0!==e[2]?this._filterItem.forEach(function(t){t.closest(".catalog-filter__col").getAttribute("data-filter")===e[2][1]&&(s._cleanClassFilterAll(),s._addClassFilter(t),t.closest(".catalog-filter__col").setAttribute("data-sort",e[1][1]),"asc"===e[1][1]?(t.classList.add(s._sortTypeAsc.class),t.classList.remove(s._sortTypeDesc.class)):(t.classList.remove(s._sortTypeAsc.class),t.classList.add(s._sortTypeDesc.class)))}):this._filterItem.forEach(function(t){"name"===t.closest(".catalog-filter__col").getAttribute("data-filter")&&(s._cleanClassFilterAll(),s._addClassFilter(t))}),void 0!==e[3]?(console.log(e[3][1]),s.searchItem.getElementsByTagName("input")[0].value=e[3][1]):s.searchItem.getElementsByTagName("input")[0].value=""}},{key:"init",value:function(){var e=this;this._filterItem.forEach(function(t){t.addEventListener("click",function(){t.classList.contains(e._activeClass)?e._toogleSort(this):(e._cleanClassFilterAll(),e._addClassFilter(this)),e._queryFormation(!0)})}),this._brandItem.forEach(function(t){t.addEventListener("click",function(t){t.preventDefault(),this.classList.contains("is-active")||(e._selectBrand(this),e._queryFormation(!0))})}),this.searchItem.getElementsByTagName("input")[0].addEventListener("input",function(){e._queryFormation(!0,1e3)}),this._containerMore.querySelectorAll(".catalog__more-button")[0].addEventListener("click",function(t){t.preventDefault(),e._queryFormation(!1)})}}]),i}(),s=function(){function t(){_classCallCheck(this,t),this._url,this._historyObj=window.history,this.init()}return _createClass(t,[{key:"setHistory",value:function(t,e){e===this._historyObj.state?this._historyObj.replaceState(e,e,t):this._historyObj.pushState(e,e,t)}},{key:"_readHistory",value:function(){var t=document.location.href.split("?"),e=[];void 0!==t[1]?(t[1].split("&").forEach(function(t){e.push(t.split("="))}),console.log(e),i.updateStateFilterFromUrl(e),new r("test.json","get",!0).send()):(i.updateStateFilterFromUrl([]),new r("test.json","get",!0).send())}},{key:"init",value:function(){window.addEventListener("popstate",this._readHistory)}}]),t}(),r=function(){function i(t,e,s){_classCallCheck(this,i),this._url=t,this._type=e,this._productUpdate=s,this.ajax=new XMLHttpRequest}return _createClass(i,[{key:"_progress",value:function(){l.playPreloader()}},{key:"_complete",value:function(){var t=JSON.parse(this.response);!0===productUpdate?(l.updateTitle(t.title),l.updateListProducts(t.elements)):l.addProducts(t.elements),l.stopPreloader(),console.log(t)}},{key:"_completeUpdatePrpoducts",value:function(){var t=JSON.parse(this.response);l.updateTitle(t.title),l.updateListProducts(t.elements),l.stopPreloader(),console.log(t)}},{key:"_completeAddProducts",value:function(){var t=JSON.parse(this.response);l.addProducts(t.elements),l.stopPreloader(),console.log(t)}},{key:"send",value:function(t){var e=this._productUpdate,s=this;this.ajax.addEventListener("progress",this._progress,!1),this.ajax.addEventListener("load",!0===e?s._completeUpdatePrpoducts:s._completeAddProducts,!1),"get"===this._type.toLowerCase()?(this.ajax.open(this._type,this._url),this.ajax.send(),console.log("get")):"post"===this._type.toLowerCase()?console.log("post"):console.log("Error")}}]),i}(),l=new t(document.querySelectorAll(".catalog")[0],"catalog__title","catalog__product","preloader"),i=new e(document.querySelectorAll(".catalog-nav__controls")[0],document.querySelectorAll(".catalog-filter")[0],document.querySelectorAll(".catalog__more")[0]),c=new s;window.filter=i}(),function(){var t=$("header"),e=$(".main-content"),s=t.height();$(window).on("load scroll",function(){$(this).scrollTop()>s?(t.addClass("fixed"),e.css({"padding-top":s})):(t.removeClass("fixed"),e.css({"padding-top":0}))})}(),$(".footer__col-title").on("click",function(t){t.preventDefault(),$(this).closest(".footer__col").find(".footer__col-list").slideToggle(300)}),window.addEventListener("load",function(){if($(".catalog-nav__controls").length){var t=function(){i=s.position().left,n=s.position().top,s.innerWidth(),s.innerHeight(),o.css({left:i,top:n,width:0,height:0})},e=$(".catalog-nav__controls-link"),s=($(".catalog-nav__controls-list"),$(".catalog-nav__controls-item"),$(".catalog-nav__controls-link.is-active")),o=$(".catalog-nav__hover"),i=s.position().left,n=s.position().top,a=(s.innerWidth(),s.innerHeight(),!1);e.hover(function(){var t=$(this).position().left,e=$(this).position().top,s=$(this).innerWidth(),i=$(this).innerHeight();o.css({left:t,top:e,width:s,height:i}),a=!1},function(){setTimeout(function(){a&&o.css({left:i,top:n,width:0,height:0})},1e3),a=!0}),$(window).resize(function(){t()}),t()}}),window.addEventListener("load",function(){$(".delivery__form-input").focusout(function(){""!==$(this).val()?$(this).parent().addClass("value"):$(this).parent().removeClass("value")})}),function(){var t=document.getElementById("scene");if(null!=t)new Parallax(t)}(),function(){var s=function(){function n(t,e,s,i,o){if(_classCallCheck(this,n),void 0===t)return!1;this._self=t,this._numProducts=this._self.querySelectorAll("."+e)[0],this._numMinus=this._self.querySelectorAll("."+s)[0],this._numPlus=this._self.querySelectorAll("."+i)[0],this._del=this._self.querySelectorAll("."+o)[0],this._size=+this._numProducts.innerHTML}return _createClass(n,[{key:"_delete",value:function(){var t=this;this._self.classList.add("remove"),setTimeout(function(){t._self.remove(),e._sumValues()},550)}},{key:"_numAdd",value:function(){this._size+=1,this._numProducts.innerHTML=this._size,e._sumValues()}},{key:"_numDel",value:function(){this._size-=1,this._numProducts.innerHTML=this._size,this._size<=1?(this._size=1,this._numProducts.innerHTML=1):this._numProducts.innerHTML=this._size,e._sumValues()}},{key:"init",value:function(){var t=this;t._del.addEventListener("click",function(){t._delete()}),t._numPlus.addEventListener("click",function(){t._numAdd()}),t._numMinus.addEventListener("click",function(){t._numDel()})}},{key:"valueProducts",get:function(){return this._size}}]),n}(),n=[];document.querySelectorAll(".basket-products__product").forEach(function(t){var e=new s(t,"basket-products__product-size-num","basket-products__product-num-change--minus","basket-products__product-num-change--plus","basket-products__product-remove");n.push(t),e.init(),e.valueProducts}),window.productsArr=n;var e=new(function(){function o(t,e,s,i){if(_classCallCheck(this,o),void 0===t)return!1;this._self=t,this._productsSize=this._self.querySelectorAll("."+e)[0],this._productsRemove=this._self.querySelectorAll("."+s)[0],this._products=n}return _createClass(o,[{key:"_deleteAll",value:function(){this._products.forEach(function(t){t.classList.add("remove"),setTimeout(function(){t.remove()},550)}),this._productsSize.innerHTML=0}},{key:"_sumValues",value:function(){var e=0;this._self.querySelectorAll(".basket-products__product-size-num").forEach(function(t){e+=+t.innerHTML}),this._productsSize.innerHTML=e}},{key:"init",value:function(){var t=this;t._productsRemove.addEventListener("click",function(){t._deleteAll()}),t._productsSize.addEventListener("click",function(){t._sumValues()}),e._sumValues()}}]),o}())(document.querySelectorAll(".basket-products")[0],"products-num","basket-products__remove-products",n);e.init()}(),$(document).on("click",".slide-info__button",function(){$(this).closest(".slide-info").find(".slide-info__button").toggleClass("is-active"),$(this).closest(".slide-info").find(".slide-info__content").slideToggle(300)});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFkZFRvQmFza2V0LmpzIiwiYmFza2V0VGFicy5qcyIsImJ1cmdlci5qcyIsImNhdGFsb2dVcGRhdGVDbGFzcy5qcyIsImZpeGVkSGVhZGVyLmpzIiwiZm9vdGVyTWVudS5qcyIsImhvdmVyUm9sbGVyLmpzIiwibGFiZWxGb3JtLmpzIiwicGFyYWxsYXguanMiLCJwcm90b0Jhc2tldC5qcyIsInNob3dNb3JlLmpzIl0sIm5hbWVzIjpbIiQiLCJkb2N1bWVudCIsIm9uIiwidGhpcyIsImhhc0NsYXNzIiwiYWRkQ2xhc3MiLCJzZXRUaW1lb3V0IiwicmVtb3ZlQ2xhc3MiLCJiaW5kIiwid2luZG93IiwiYWRkRXZlbnRMaXN0ZW5lciIsImxlbmd0aCIsImNsaWNrIiwidGhTdGVwIiwiY2xvc2VzdCIsImZpbmQiLCJhdHRyIiwic2xpZGVyU2xpZGVzIiwiZWFjaCIsInBhZ2lJbmRleCIsIm1lbnVCdG4iLCJnZXRFbGVtZW50QnlJZCIsImNsYXNzTGlzdCIsInRvZ2dsZSIsIm9ucmVzaXplIiwicmVtb3ZlIiwib25zY3JvbGwiLCJDYXRhbG9nIiwic2VsZiIsInRpdGxlQ2xhc3MiLCJwcm9kdWN0c0NvbnRhaW5lckNsYXNzIiwicHJvZHVjdHNQcmVsb2FkZXJDbGFzcyIsIl9jbGFzc0NhbGxDaGVjayIsInVuZGVmaW5lZCIsIl9zZWxmIiwiX3RpdGxlIiwicXVlcnlTZWxlY3RvckFsbCIsIl9wcm9kdWN0cyIsInByZWxvYWRlciIsIl9jcmVhdGVDbGFzcyIsImtleSIsInZhbHVlIiwiaW5uZXJIVE1MIiwiYWRkIiwidGl0bGUiLCJzZXRBdHRyaWJ1dGUiLCJwcm9kdWN0cyIsImluc2VydEFkamFjZW50SFRNTCIsIkZpbHRlciIsImNvbnRhaW5lckJyYW5kcyIsImNvbnRhaW5lckZpbHRlciIsImNvbnRhaW5lck1vcmUiLCJfY29udGFpbmVyQnJhbmRzIiwiX2JyYW5kSXRlbSIsIl9jb250YWluZXJGaWx0ZXIiLCJfZmlsdGVySXRlbSIsInNlYXJjaEl0ZW0iLCJfYWN0aXZlQ2xhc3MiLCJfc29ydFR5cGVBc2MiLCJjbGFzcyIsImRhdGFTb3J0IiwiX3NvcnRUeXBlRGVzYyIsIl9jb250YWluZXJNb3JlIiwidGltZU91dEFqYXgiLCJpbml0IiwiZm9yRWFjaCIsIml0ZW0iLCJwYXJlbnQiLCJyZW1vdmVBdHRyaWJ1dGUiLCJjb25zb2xlIiwibG9nIiwiY29udGFpbnMiLCJwcm9kdWN0VXBkYXRlIiwiZGVsYXkiLCJjbGVhclRpbWVvdXQiLCJicmFuZCIsImdldFF1ZXJ5IiwiYXJyYXlRdWVyeSIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwicHVzaCIsImdldEF0dHJpYnV0ZSIsImpvaW4iLCJoaXN0b3J5T2JqIiwic2V0SGlzdG9yeSIsImFqYXhDb25uZWN0IiwiQWpheEdldFByb2R1Y3RzIiwic2VuZCIsImNhdGFsb2RUZXN0IiwicGxheVByZWxvYWRlciIsImFycmF5UmVzdWx0IiwiX3NlbGVjdEJyYW5kIiwiX2NsZWFuQ2xhc3NGaWx0ZXJBbGwiLCJfYWRkQ2xhc3NGaWx0ZXIiLCJfdG9vZ2xlU29ydCIsIl9xdWVyeUZvcm1hdGlvbiIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJIaXN0b3J5Q29ucnRvbCIsIl91cmwiLCJfaGlzdG9yeU9iaiIsImhpc3RvcnkiLCJzdGF0ZSIsInJlcGxhY2VTdGF0ZSIsInB1c2hTdGF0ZSIsImFycmF5VXJsIiwibG9jYXRpb24iLCJocmVmIiwic3BsaXQiLCJmaWx0ZXIiLCJ1cGRhdGVTdGF0ZUZpbHRlckZyb21VcmwiLCJfcmVhZEhpc3RvcnkiLCJ1cmwiLCJ0eXBlIiwiX3R5cGUiLCJfcHJvZHVjdFVwZGF0ZSIsImFqYXgiLCJYTUxIdHRwUmVxdWVzdCIsInJlc3VsdCIsIkpTT04iLCJwYXJzZSIsInJlc3BvbnNlIiwidXBkYXRlVGl0bGUiLCJ1cGRhdGVMaXN0UHJvZHVjdHMiLCJlbGVtZW50cyIsImFkZFByb2R1Y3RzIiwic3RvcFByZWxvYWRlciIsImRhdGEiLCJfcHJvZ3Jlc3MiLCJfY29tcGxldGVVcGRhdGVQcnBvZHVjdHMiLCJfY29tcGxldGVBZGRQcm9kdWN0cyIsInRvTG93ZXJDYXNlIiwib3BlbiIsImhlYWRlciIsImNvbnRlbnQiLCJoZWFkZXJIZWlnaHQiLCJoZWlnaHQiLCJzY3JvbGxUb3AiLCJjc3MiLCJwYWRkaW5nLXRvcCIsImUiLCJzbGlkZVRvZ2dsZSIsInJlc2l6ZVBvcyIsImFjdGl2ZUxpbmtQb3NMZWZ0IiwiYWN0aXZlTGluayIsInBvc2l0aW9uIiwibGVmdCIsImFjdGl2ZUxpbmtQb3NUb3AiLCJ0b3AiLCJpbm5lcldpZHRoIiwiaW5uZXJIZWlnaHQiLCJob3ZlckJveCIsIndpZHRoIiwibWVudUxpbmsiLCJjaGVjayIsImhvdmVyIiwibmV3TGlua1Bvc0xlZnQiLCJuZXdMaW5rUG9zVG9wIiwibmV3TGlua1dpZHRoIiwibmV3TGlua0hlaWdodCIsInJlc2l6ZSIsImZvY3Vzb3V0IiwidmFsIiwic2NlbmUiLCJQYXJhbGxheCIsImJhc2tldFByb2R1Y3QiLCJudW1Qcm9kdWN0cyIsIm51bU1pbnVzIiwibnVtUGx1cyIsImRlbCIsIl9udW1Qcm9kdWN0cyIsIl9udW1NaW51cyIsIl9udW1QbHVzIiwiX2RlbCIsIl9zaXplIiwiX3RoaXMiLCJwcm9kdWN0c0NvbnRhaW5lciIsIl9zdW1WYWx1ZXMiLCJfZGVsZXRlIiwiX251bUFkZCIsIl9udW1EZWwiLCJnZXQiLCJwcm9kdWN0c0FyciIsInByb2R1Y3QiLCJ2YWx1ZVByb2R1Y3RzIiwicHJvZHVjdHNDb250cm9sIiwicHJvZHVjdHNTaXplIiwicHJvZHVjdHNSZW1vdmUiLCJfcHJvZHVjdHNTaXplIiwiX3Byb2R1Y3RzUmVtb3ZlIiwiX2RlbGV0ZUFsbCIsInRvZ2dsZUNsYXNzIl0sIm1hcHBpbmdzIjoieXhCQUNJQSxFQUFFQyxVQUFVQyxHQUFHLFFBQVMsa0JBQW1CLFdBQ2xDRixFQUFFRyxNQUFNQyxTQUFTLGFBQ2xCSixFQUFFRyxNQUFNRSxTQUFTLFdBQ2pCTCxFQUFFRyxNQUFNRSxTQUFTLGlCQUNqQkMsV0FBVyxXQUNQTixFQUFFRyxN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aUJBQWlCLHNDQUFzQzZCLFFBQVEsU0FBU0MsR0FDL0V6QixJQUFVeUIsRUFBS3hCLFlBR25CdkMsS0FBS3dMLGNBQWNqSixVQUFZRCxJQXhHOUIsQ0FBQUQsSUFBQSxPQUFBQyxNQUFBLFdBNEdELElBQUliLEVBQU96QixLQUVYeUIsRUFBS2dLLGdCQUFnQmxMLGlCQUFpQixRQUFTLFdBQzNDa0IsRUFBS2lLLGVBR1RqSyxFQUFLK0osY0FBY2pMLGlCQUFpQixRQUFTLFdBQ3pDa0IsRUFBS29KLGVBR1RELEVBQWtCQyxpQkF0SGpCUSxFQUFBLEdBMEhlLENBQW9CdkwsU0FBU21DLGlCQUFpQixvQkFBb0IsR0FBSSxlQUFnQixtQ0FBb0NpSixHQUNsSk4sRUFBa0IvRyxPQTNIckIsR0NDR2hFLEVBQUVDLFVBQVVDLEdBQUcsUUFBUyxzQkFBdUIsV0FDM0NGLEVBQUVHLE1BQU1XLFFBQVEsZUFBZUMsS0FBSyx1QkFBdUIrSyxZQUFZLGFBQ3ZFOUwsRUFBRUcsTUFBTVcsUUFBUSxlQUFlQyxLQUFLLHdCQUF3QjZILFlBQVkiLCJmaWxlIjoibWFpbi5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyI7KGZ1bmN0aW9uKCkge1xyXG4gICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5idXR0b24tLWJhc2tldCcsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGlmICghJCh0aGlzKS5oYXNDbGFzcygnYW5pbWF0ZScpKSB7XHJcbiAgICAgICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2FuaW1hdGUnKTtcclxuICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcyhcImJ1dHRvbi0tY2hlY2tcIik7XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKFwiYnV0dG9uLS1jaGVja1wiKTtcclxuICAgICAgICAgICAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ2FuaW1hdGUnKTtcclxuICAgICAgICAgICAgfS5iaW5kKHRoaXMpLCAyMDAwKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufSkoKTtcclxuIiwiOyhmdW5jdGlvbigpIHtcclxuXHJcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICBpZiAoJCgnLmhyLXNlY3QnKS5sZW5ndGgpIHtcclxuXHJcbiAgICAgICAgICAgICQoXCIuaHItcGFnaW5hdGlvbl9fc3RlcFwiKS5jbGljayhmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHZhciB0aFN0ZXAgPSAkKHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCF0aFN0ZXAuaGFzQ2xhc3MoXCJpcy1hY3RpdmVcIikpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aFN0ZXAuY2xvc2VzdCgnLmhyLXNlY3QnKS5maW5kKFwiLmhyLXBhZ2luYXRpb25fX3N0ZXBcIikucmVtb3ZlQ2xhc3MoXCJpcy1hY3RpdmVcIikucmVtb3ZlQ2xhc3MoXCJidXR0b25cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhTdGVwLmFkZENsYXNzKFwiaXMtYWN0aXZlXCIpLmFkZENsYXNzKFwiYnV0dG9uXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBwYWdpSW5kZXggPSB0aFN0ZXAuYXR0cihcImRhdGEtaW5kZXhcIik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBzbGlkZXJTbGlkZXMgPSB0aFN0ZXAuY2xvc2VzdChcIi5oci1zZWN0XCIpLmZpbmQoXCIuaHItc2xpZGVyLXNsaWRlXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNsaWRlclNsaWRlcy5yZW1vdmVDbGFzcyhcImlzLWFjdGl2ZVwiKTtcclxuICAgICAgICAgICAgICAgICAgICBzbGlkZXJTbGlkZXMuZWFjaChmdW5jdGlvbihwYWdpSW5kZXgsIHRoU3RlcCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoJCh0aGlzKS5hdHRyKFwiZGF0YS1pbmRleFwiKSA9PSAkKFwiLmhyLXBhZ2luYXRpb25fX3N0ZXAuaXMtYWN0aXZlXCIpLmF0dHIoXCJkYXRhLWluZGV4XCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmFkZENsYXNzKFwiaXMtYWN0aXZlXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgfSk7XHJcblxyXG59KSgpO1xyXG4iLCI7KGZ1bmN0aW9uKCkge1xyXG4gICAgbGV0IG1lbnVCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWVudS1idXR0b24nKTtcclxuXHJcbiAgICBtZW51QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgbWVudUJ0bi5jbGFzc0xpc3QudG9nZ2xlKCdvcGVuZWQnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHdpbmRvdy5vbnJlc2l6ZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIG1lbnVCdG4uY2xhc3NMaXN0LnJlbW92ZSgnb3BlbmVkJyk7XHJcbiAgICB9XHJcbiAgICB3aW5kb3cub25zY3JvbGwgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICBtZW51QnRuLmNsYXNzTGlzdC5yZW1vdmUoJ29wZW5lZCcpO1xyXG4gICAgfVxyXG59KSgpO1xyXG4iLCI7KGZ1bmN0aW9uKCl7XG5cbiAgICBjbGFzcyBDYXRhbG9nIHtcbiAgICAgICAgY29uc3RydWN0b3Ioc2VsZiwgdGl0bGVDbGFzcywgcHJvZHVjdHNDb250YWluZXJDbGFzcywgcHJvZHVjdHNQcmVsb2FkZXJDbGFzcyl7XG4gICAgICAgICAgICBpZiAoc2VsZiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5fc2VsZiA9IHNlbGY7XG4gICAgICAgICAgICB0aGlzLl90aXRsZSA9IHRoaXMuX3NlbGYucXVlcnlTZWxlY3RvckFsbChcIi5cIiArIHRpdGxlQ2xhc3MpWzBdO1xuICAgICAgICAgICAgdGhpcy5fcHJvZHVjdHMgPSB0aGlzLl9zZWxmLnF1ZXJ5U2VsZWN0b3JBbGwoXCIuXCIgKyBwcm9kdWN0c0NvbnRhaW5lckNsYXNzKVswXTtcbiAgICAgICAgICAgIHRoaXMucHJlbG9hZGVyID0gdGhpcy5fc2VsZi5xdWVyeVNlbGVjdG9yQWxsKFwiLlwiICsgcHJvZHVjdHNQcmVsb2FkZXJDbGFzcylbMF07XG4gICAgICAgIH1cblxuXG4gICAgICAgIF9jbGVhblByb2R1Y3RzKCkge1xuICAgICAgICAgICAgdGhpcy5fcHJvZHVjdHMuaW5uZXJIVE1MID0gXCJcIjtcbiAgICAgICAgfVxuXG4gICAgICAgIHBsYXlQcmVsb2FkZXIoKSB7XG4gICAgICAgICAgICB0aGlzLnByZWxvYWRlci5jbGFzc0xpc3QuYWRkKFwicHJlbG9hZGVyLS1hY3RpdmVcIik7XG4gICAgICAgIH1cblxuICAgICAgICBzdG9wUHJlbG9hZGVyKCkge1xuICAgICAgICAgICAgdGhpcy5wcmVsb2FkZXIuY2xhc3NMaXN0LnJlbW92ZShcInByZWxvYWRlci0tYWN0aXZlXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgdXBkYXRlVGl0bGUodGl0bGUpIHtcbiAgICAgICAgICAgIHRoaXMuX3RpdGxlLmlubmVySFRNTCA9IHRpdGxlO1xuICAgICAgICAgICAgdGhpcy5fdGl0bGUuc2V0QXR0cmlidXRlKFwiZGF0YS1uYW1lXCIsIHRpdGxlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHVwZGF0ZUxpc3RQcm9kdWN0cyhwcm9kdWN0cykge1xuICAgICAgICAgICAgdGhpcy5fcHJvZHVjdHMuaW5uZXJIVE1MID0gcHJvZHVjdHM7XG4gICAgICAgIH1cblxuICAgICAgICBhZGRQcm9kdWN0cyhwcm9kdWN0cykge1xuICAgICAgICAgICAgdGhpcy5fcHJvZHVjdHMuaW5zZXJ0QWRqYWNlbnRIVE1MKFwiYmVmb3JlZW5kXCIsIHByb2R1Y3RzKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNsYXNzIEZpbHRlciB7XG4gICAgICAgIGNvbnN0cnVjdG9yKGNvbnRhaW5lckJyYW5kcywgY29udGFpbmVyRmlsdGVyLCBjb250YWluZXJNb3JlKSB7XG4gICAgICAgICAgICBpZiAoY29udGFpbmVyQnJhbmRzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY29udGFpbmVyRmlsdGVyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY29udGFpbmVyTW9yZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLl9jb250YWluZXJCcmFuZHMgPSBjb250YWluZXJCcmFuZHM7XG4gICAgICAgICAgICB0aGlzLl9icmFuZEl0ZW0gPSB0aGlzLl9jb250YWluZXJCcmFuZHMucXVlcnlTZWxlY3RvckFsbChcIi5jYXRhbG9nLW5hdl9fY29udHJvbHMtbGlua1wiKTtcblxuICAgICAgICAgICAgdGhpcy5fY29udGFpbmVyRmlsdGVyID0gY29udGFpbmVyRmlsdGVyO1xuICAgICAgICAgICAgdGhpcy5fZmlsdGVySXRlbSA9IHRoaXMuX2NvbnRhaW5lckZpbHRlci5xdWVyeVNlbGVjdG9yQWxsKFwiLmNhdGFsb2ctZmlsdGVyX19jb2wtYnRuXCIpO1xuICAgICAgICAgICAgdGhpcy5zZWFyY2hJdGVtID0gdGhpcy5fY29udGFpbmVyRmlsdGVyLnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY2F0YWxvZy1maWx0ZXJfX2Zvcm1cIilbMF07XG4gICAgICAgICAgICB0aGlzLl9hY3RpdmVDbGFzcyA9IFwiaXMtYWN0aXZlXCI7XG4gICAgICAgICAgICB0aGlzLl9zb3J0VHlwZUFzYyA9IHtcbiAgICAgICAgICAgICAgICBjbGFzczogXCJzb3J0LWRvd25cIixcbiAgICAgICAgICAgICAgICBkYXRhU29ydDogXCJhc2NcIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHRoaXMuX3NvcnRUeXBlRGVzYyA9IHtcbiAgICAgICAgICAgICAgICBjbGFzczogXCJzb3J0LXVwXCIsXG4gICAgICAgICAgICAgICAgZGF0YVNvcnQ6IFwiZGVzY1wiXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuX2NvbnRhaW5lck1vcmUgPSBjb250YWluZXJNb3JlO1xuXG4gICAgICAgICAgICB0aGlzLnRpbWVPdXRBamF4O1xuICAgICAgICAgICAgdGhpcy5pbml0KCk7XG4gICAgICAgIH1cblxuICAgICAgICBfY2xlYW5DbGFzc0ZpbHRlckFsbCgpIHtcbiAgICAgICAgICAgIGxldCBzZWxmID0gdGhpcztcblxuICAgICAgICAgICAgdGhpcy5fZmlsdGVySXRlbS5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pe1xuICAgICAgICAgICAgICAgIGxldCBwYXJlbnQgPSBpdGVtLmNsb3Nlc3QoXCIuY2F0YWxvZy1maWx0ZXJfX2NvbFwiKTtcblxuICAgICAgICAgICAgICAgICAgICBpdGVtLmNsYXNzTGlzdC5yZW1vdmUoc2VsZi5fYWN0aXZlQ2xhc3MpO1xuICAgICAgICAgICAgICAgICAgICBpdGVtLmNsYXNzTGlzdC5yZW1vdmUoc2VsZi5fc29ydFR5cGVBc2MuY2xhc3MpO1xuICAgICAgICAgICAgICAgICAgICBwYXJlbnQucmVtb3ZlQXR0cmlidXRlKFwiZGF0YS1zb3J0XCIpO1xuXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIF9hZGRDbGFzc0ZpbHRlcihpdGVtKSB7XG4gICAgICAgICAgICBsZXQgcGFyZW50ID0gaXRlbS5jbG9zZXN0KFwiLmNhdGFsb2ctZmlsdGVyX19jb2xcIik7XG5cbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGl0ZW0pO1xuXG4gICAgICAgICAgICBpdGVtLmNsYXNzTGlzdC5hZGQodGhpcy5fYWN0aXZlQ2xhc3MpO1xuICAgICAgICAgICAgaXRlbS5jbGFzc0xpc3QuYWRkKHRoaXMuX3NvcnRUeXBlQXNjLmNsYXNzKTtcblxuICAgICAgICAgICAgcGFyZW50LnNldEF0dHJpYnV0ZShcImRhdGEtc29ydFwiLCB0aGlzLl9zb3J0VHlwZUFzYy5kYXRhU29ydCk7XG4gICAgICAgIH1cblxuICAgICAgICBfdG9vZ2xlU29ydChpdGVtKSB7XG4gICAgICAgICAgICBsZXQgcGFyZW50ID0gaXRlbS5jbG9zZXN0KFwiLmNhdGFsb2ctZmlsdGVyX19jb2xcIik7XG5cbiAgICAgICAgICAgIGlmIChpdGVtLmNsYXNzTGlzdC5jb250YWlucyh0aGlzLl9zb3J0VHlwZUFzYy5jbGFzcykpIHtcbiAgICAgICAgICAgICAgICBpdGVtLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fc29ydFR5cGVBc2MuY2xhc3MpO1xuICAgICAgICAgICAgICAgIGl0ZW0uY2xhc3NMaXN0LmFkZCh0aGlzLl9zb3J0VHlwZURlc2MuY2xhc3MpO1xuXG4gICAgICAgICAgICAgICAgcGFyZW50LnNldEF0dHJpYnV0ZShcImRhdGEtc29ydFwiLCB0aGlzLl9zb3J0VHlwZURlc2MuZGF0YVNvcnQpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpdGVtLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fc29ydFR5cGVEZXNjLmNsYXNzKTtcbiAgICAgICAgICAgICAgICBpdGVtLmNsYXNzTGlzdC5hZGQodGhpcy5fc29ydFR5cGVBc2MuY2xhc3MpO1xuXG4gICAgICAgICAgICAgICAgcGFyZW50LnNldEF0dHJpYnV0ZShcImRhdGEtc29ydFwiLCB0aGlzLl9zb3J0VHlwZUFzYy5kYXRhU29ydCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfVxuXG4gICAgICAgIF9zZWxlY3RCcmFuZChpdGVtKSB7XG4gICAgICAgICAgICBpZiAoIWl0ZW0uY2xhc3NMaXN0LmNvbnRhaW5zKFwiaXMtYWN0aXZlXCIpKXtcbiAgICAgICAgICAgICAgICB0aGlzLl9icmFuZEl0ZW0uZm9yRWFjaChmdW5jdGlvbihpdGVtKSB7XG4gICAgICAgICAgICAgICAgICAgIGl0ZW0uY2xhc3NMaXN0LnJlbW92ZShcImlzLWFjdGl2ZVwiKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpdGVtLmNsYXNzTGlzdC5hZGQoXCJpcy1hY3RpdmVcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBfcXVlcnlGb3JtYXRpb24ocHJvZHVjdFVwZGF0ZSwgZGVsYXkpIHtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnRpbWVPdXRBamF4KTtcbiAgICAgICAgICAgIC8v0JzQtdGC0L7QtCDRhNC+0YDQvNC40YDQvtCy0LDQvdC40Y8gZ2V0INC30LDQv9GA0L7RgdCwXG4gICAgICAgICAgICBsZXQgYXJyYXlRdWVyeSA9IFtdLFxuICAgICAgICAgICAgICAgIHNlYXJjaEl0ZW0gPSB0aGlzLnNlYXJjaEl0ZW0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJpbnB1dFwiKVswXSxcbiAgICAgICAgICAgICAgICBicmFuZCxcbiAgICAgICAgICAgICAgICBnZXRRdWVyeTtcblxuICAgICAgICAgICAgdGhpcy5fYnJhbmRJdGVtLmZvckVhY2goZnVuY3Rpb24oaXRlbSkge1xuICAgICAgICAgICAgICAgIGlmIChpdGVtLmNsYXNzTGlzdC5jb250YWlucyhcImlzLWFjdGl2ZVwiKSkge1xuICAgICAgICAgICAgICAgICAgICBhcnJheVF1ZXJ5LnB1c2goXCJicmFuZD1cIiArIGl0ZW0uZ2V0QXR0cmlidXRlKFwiZGF0YS1icmFuZFwiKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyYW5kID0gaXRlbS5nZXRBdHRyaWJ1dGUoXCJkYXRhLWJyYW5kXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB0aGlzLl9maWx0ZXJJdGVtLmZvckVhY2goZnVuY3Rpb24oaXRlbSkge1xuICAgICAgICAgICAgICAgIGxldCBwYXJlbnQgPSBpdGVtLmNsb3Nlc3QoXCIuY2F0YWxvZy1maWx0ZXJfX2NvbFwiKTtcbiAgICAgICAgICAgICAgICBpZiAoaXRlbS5jbGFzc0xpc3QuY29udGFpbnMoXCJpcy1hY3RpdmVcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgYXJyYXlRdWVyeS5wdXNoKFwic29ydD1cIiArIHBhcmVudC5nZXRBdHRyaWJ1dGUoXCJkYXRhLXNvcnRcIikpO1xuICAgICAgICAgICAgICAgICAgICBhcnJheVF1ZXJ5LnB1c2goXCJzb3J0VHlwZT1cIiArIHBhcmVudC5nZXRBdHRyaWJ1dGUoXCJkYXRhLWZpbHRlclwiKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmIChzZWFyY2hJdGVtLnZhbHVlICE9PSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgYXJyYXlRdWVyeS5wdXNoKFwic2VhcmNoPVwiICsgc2VhcmNoSXRlbS52YWx1ZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGdldFF1ZXJ5ID0gXCI/XCIgKyBhcnJheVF1ZXJ5LmpvaW4oXCImXCIpO1xuXG4gICAgICAgICAgICBoaXN0b3J5T2JqLnNldEhpc3RvcnkoZ2V0UXVlcnksIGJyYW5kKTtcblxuICAgICAgICAgICAgLy9Ub2RvOiDQt9C00LXRgdGMINC90LDQtNC+INCx0YPQtNC10YIg0YHQtNC10LvQsNGC0Ywg0LDQutGC0YPQsNC70YzQvdGL0Lkg0YPRgNC7INC00LvRjyBhamF4INC30LDQv9GA0L7RgdC+0LJcbiAgICAgICAgICAgIC8vINCf0YDQuNC80LXRgDogbGV0IGFqYXhDb25uZWN0ID0gbmV3IEFqYXhHZXRQcm9kdWN0cyh3aW5kb3cubG9jYXRpb24uaHJlZiArIGdldFF1ZXJ5LCBcImdldFwiLCB0cnVlKTtcbiAgICAgICAgICAgIGxldCBhamF4Q29ubmVjdCA9IG5ldyBBamF4R2V0UHJvZHVjdHMoXCJ0ZXN0Lmpzb25cIiwgXCJnZXRcIiwgcHJvZHVjdFVwZGF0ZSk7XG5cbiAgICAgICAgICAgIGlmIChkZWxheSA9PT0gdW5kZWZpbmVkKXtcbiAgICAgICAgICAgICAgICBhamF4Q29ubmVjdC5zZW5kKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNhdGFsb2RUZXN0LnBsYXlQcmVsb2FkZXIoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnRpbWVPdXRBamF4ID0gc2V0VGltZW91dChmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICBhamF4Q29ubmVjdC5zZW5kKCk7XG4gICAgICAgICAgICAgICAgfSwgZGVsYXkpXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGdldFF1ZXJ5KTtcblxuICAgICAgICB9XG5cbiAgICAgICAgdXBkYXRlU3RhdGVGaWx0ZXJGcm9tVXJsKGFycmF5UmVzdWx0KSB7XG4gICAgICAgICAgICAvLyB1cGRhdGVTdGF0ZUZpbHRlckZyb21VcmwoYXJyYXlSZXN1bHRbMF1bMV0sIGFycmF5UmVzdWx0WzJdWzFdLCBhcnJheVJlc3VsdFsxXVsxXSwgYXJyYXlSZXN1bHRbM11bMV0pXG4gICAgICAgICAgICBsZXQgc2VsZiA9IHRoaXM7XG5cblxuICAgICAgICAgICAgaWYgKGFycmF5UmVzdWx0WzBdICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9icmFuZEl0ZW0uZm9yRWFjaChmdW5jdGlvbihpdGVtKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpdGVtLmdldEF0dHJpYnV0ZShcImRhdGEtYnJhbmRcIikgPT09IGFycmF5UmVzdWx0WzBdWzFdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9zZWxlY3RCcmFuZChpdGVtKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuX3NlbGVjdEJyYW5kKHRoaXMuX2JyYW5kSXRlbVswXSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChhcnJheVJlc3VsdFsyXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fZmlsdGVySXRlbS5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW0uY2xvc2VzdChcIi5jYXRhbG9nLWZpbHRlcl9fY29sXCIpLmdldEF0dHJpYnV0ZShcImRhdGEtZmlsdGVyXCIpID09PSBhcnJheVJlc3VsdFsyXVsxXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fY2xlYW5DbGFzc0ZpbHRlckFsbCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fYWRkQ2xhc3NGaWx0ZXIoaXRlbSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtLmNsb3Nlc3QoXCIuY2F0YWxvZy1maWx0ZXJfX2NvbFwiKS5zZXRBdHRyaWJ1dGUoXCJkYXRhLXNvcnRcIiwgYXJyYXlSZXN1bHRbMV1bMV0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYXJyYXlSZXN1bHRbMV1bMV0gPT09IFwiYXNjXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtLmNsYXNzTGlzdC5hZGQoc2VsZi5fc29ydFR5cGVBc2MuY2xhc3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0uY2xhc3NMaXN0LnJlbW92ZShzZWxmLl9zb3J0VHlwZURlc2MuY2xhc3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtLmNsYXNzTGlzdC5yZW1vdmUoc2VsZi5fc29ydFR5cGVBc2MuY2xhc3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0uY2xhc3NMaXN0LmFkZChzZWxmLl9zb3J0VHlwZURlc2MuY2xhc3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fZmlsdGVySXRlbS5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW0uY2xvc2VzdChcIi5jYXRhbG9nLWZpbHRlcl9fY29sXCIpLmdldEF0dHJpYnV0ZShcImRhdGEtZmlsdGVyXCIpID09PSBcIm5hbWVcIil7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9jbGVhbkNsYXNzRmlsdGVyQWxsKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9hZGRDbGFzc0ZpbHRlcihpdGVtKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoYXJyYXlSZXN1bHRbM10gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGFycmF5UmVzdWx0WzNdWzFdKTtcbiAgICAgICAgICAgICAgICBzZWxmLnNlYXJjaEl0ZW0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJpbnB1dFwiKVswXS52YWx1ZSA9IGFycmF5UmVzdWx0WzNdWzFdO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBzZWxmLnNlYXJjaEl0ZW0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJpbnB1dFwiKVswXS52YWx1ZSA9IFwiXCI7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfVxuXG4gICAgICAgIGluaXQoKSB7XG4gICAgICAgICAgICBsZXQgc2VsZiA9IHRoaXM7XG4gICAgICAgICAgICB0aGlzLl9maWx0ZXJJdGVtLmZvckVhY2goZnVuY3Rpb24oaXRlbSl7XG4gICAgICAgICAgICAgICAgaXRlbS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpdGVtLmNsYXNzTGlzdC5jb250YWlucyhzZWxmLl9hY3RpdmVDbGFzcykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX3Rvb2dsZVNvcnQodGhpcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL9CS0YvQt9C+0LIg0LzQtdGC0L7QtNCwINGE0L7RgNC80LjRgNC+0LLQsNC90LjRjyBHZXQg0LfQsNC/0YDQvtGB0LBcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX3F1ZXJ5Rm9ybWF0aW9uKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fY2xlYW5DbGFzc0ZpbHRlckFsbCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fYWRkQ2xhc3NGaWx0ZXIodGhpcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL9CS0YvQt9C+0LIg0LzQtdGC0L7QtNCwINGE0L7RgNC80LjRgNC+0LLQsNC90LjRjyBHZXQg0LfQsNC/0YDQvtGB0LBcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX3F1ZXJ5Rm9ybWF0aW9uKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGhpcy5fYnJhbmRJdGVtLmZvckVhY2goZnVuY3Rpb24oaXRlbSkge1xuICAgICAgICAgICAgICAgIGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5jbGFzc0xpc3QuY29udGFpbnMoXCJpcy1hY3RpdmVcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX3NlbGVjdEJyYW5kKHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy/QktGL0LfQvtCyINC80LXRgtC+0LTQsCDRhNC+0YDQvNC40YDQvtCy0LDQvdC40Y8gR2V0INC30LDQv9GA0L7RgdCwXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9xdWVyeUZvcm1hdGlvbih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICB0aGlzLnNlYXJjaEl0ZW0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJpbnB1dFwiKVswXS5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgLy/QktGL0LfQvtCyINC80LXRgtC+0LTQsCDRhNC+0YDQvNC40YDQvtCy0LDQvdC40Y8gR2V0INC30LDQv9GA0L7RgdCwXG4gICAgICAgICAgICAgICAgc2VsZi5fcXVlcnlGb3JtYXRpb24odHJ1ZSwgMTAwMCk7XG4gICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICB0aGlzLl9jb250YWluZXJNb3JlLnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY2F0YWxvZ19fbW9yZS1idXR0b25cIilbMF0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICBzZWxmLl9xdWVyeUZvcm1hdGlvbihmYWxzZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNsYXNzIEhpc3RvcnlDb25ydG9sIHtcbiAgICAgICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgICAgICB0aGlzLl91cmw7XG4gICAgICAgICAgICB0aGlzLl9oaXN0b3J5T2JqID0gd2luZG93Lmhpc3Rvcnk7XG5cbiAgICAgICAgICAgIHRoaXMuaW5pdCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgc2V0SGlzdG9yeShnZXRRdWVyeSwgYnJhbmQpIHtcbiAgICAgICAgICAgIGlmIChicmFuZCA9PT0gdGhpcy5faGlzdG9yeU9iai5zdGF0ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX2hpc3RvcnlPYmoucmVwbGFjZVN0YXRlKGJyYW5kLCBicmFuZCwgZ2V0UXVlcnkpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9oaXN0b3J5T2JqLnB1c2hTdGF0ZShicmFuZCwgYnJhbmQsIGdldFF1ZXJ5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIF9yZWFkSGlzdG9yeSgpIHtcbiAgICAgICAgICAgIGxldCB1cmwgPSBkb2N1bWVudC5sb2NhdGlvbi5ocmVmLFxuICAgICAgICAgICAgICAgIGFycmF5VXJsID0gdXJsLnNwbGl0KFwiP1wiKSxcbiAgICAgICAgICAgICAgICBhcnJheUdldCA9IFtdLFxuICAgICAgICAgICAgICAgIGFycmF5UmVzdWx0ID0gW107XG5cbiAgICAgICAgICAgICAgICBpZiAoYXJyYXlVcmxbMV0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBhcnJheUdldCA9IGFycmF5VXJsWzFdLnNwbGl0KFwiJlwiKTtcblxuXG4gICAgICAgICAgICAgICAgICAgIGFycmF5R2V0LmZvckVhY2goZnVuY3Rpb24oaXRlbSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXJyYXlSZXN1bHQucHVzaChpdGVtLnNwbGl0KFwiPVwiKSk7XG4gICAgICAgICAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYXJyYXlSZXN1bHQpO1xuXG4gICAgICAgICAgICAgICAgICAgIGZpbHRlci51cGRhdGVTdGF0ZUZpbHRlckZyb21VcmwoYXJyYXlSZXN1bHQpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vVG9kbzog0LfQtNC10YHRjCDQvdCw0LTQviDQsdGD0LTQtdGCINGB0LTQtdC70LDRgtGMINCw0LrRgtGD0LDQu9GM0L3Ri9C5INGD0YDQuyDQtNC70Y8gYWpheCDQt9Cw0L/RgNC+0YHQvtCyXG4gICAgICAgICAgICAgICAgICAgIC8vINCf0YDQuNC80LXRgDogbGV0IGFqYXhDb25uZWN0ID0gbmV3IEFqYXhHZXRQcm9kdWN0cyh1cmwsIFwiZ2V0XCIsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICBsZXQgYWpheENvbm5lY3QgPSBuZXcgQWpheEdldFByb2R1Y3RzKFwidGVzdC5qc29uXCIsIFwiZ2V0XCIsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICBhamF4Q29ubmVjdC5zZW5kKCk7XG5cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgIGZpbHRlci51cGRhdGVTdGF0ZUZpbHRlckZyb21VcmwoW10pO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vVG9kbzog0LfQtNC10YHRjCDQvdCw0LTQviDQsdGD0LTQtdGCINGB0LTQtdC70LDRgtGMINCw0LrRgtGD0LDQu9GM0L3Ri9C5INGD0YDQuyDQtNC70Y8gYWpheCDQt9Cw0L/RgNC+0YHQvtCyXG4gICAgICAgICAgICAgICAgICAgIC8vINCf0YDQuNC80LXRgDogbGV0IGFqYXhDb25uZWN0ID0gbmV3IEFqYXhHZXRQcm9kdWN0cyh1cmwsIFwiZ2V0XCIsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICBsZXQgYWpheENvbm5lY3QgPSBuZXcgQWpheEdldFByb2R1Y3RzKFwidGVzdC5qc29uXCIsIFwiZ2V0XCIsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICBhamF4Q29ubmVjdC5zZW5kKCk7XG5cbiAgICAgICAgICAgICAgICB9XG5cblxuICAgICAgICB9XG5cbiAgICAgICAgaW5pdCgpIHtcbiAgICAgICAgICAgIGxldCBzZWxmID0gdGhpcztcblxuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJwb3BzdGF0ZVwiLCBzZWxmLl9yZWFkSGlzdG9yeSk7XG4gICAgICAgIH1cblxuICAgIH1cblxuICAgIGNsYXNzIEFqYXhHZXRQcm9kdWN0cyB7XG4gICAgICAgIGNvbnN0cnVjdG9yKHVybCwgdHlwZSwgcHJvZHVjdFVwZGF0ZSkge1xuICAgICAgICAgICAgdGhpcy5fdXJsID0gdXJsO1xuICAgICAgICAgICAgdGhpcy5fdHlwZSA9IHR5cGU7XG4gICAgICAgICAgICB0aGlzLl9wcm9kdWN0VXBkYXRlID0gcHJvZHVjdFVwZGF0ZTtcbiAgICAgICAgICAgIHRoaXMuYWpheCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgX3Byb2dyZXNzKCkge1xuICAgICAgICAgICAgY2F0YWxvZFRlc3QucGxheVByZWxvYWRlcigpO1xuICAgICAgICB9XG5cbiAgICAgICAgX2NvbXBsZXRlKCkge1xuICAgICAgICAgICAgbGV0IHJlc3VsdCA9IEpTT04ucGFyc2UodGhpcy5yZXNwb25zZSk7XG5cbiAgICAgICAgICAgIGlmIChwcm9kdWN0VXBkYXRlID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgY2F0YWxvZFRlc3QudXBkYXRlVGl0bGUocmVzdWx0LnRpdGxlKTtcbiAgICAgICAgICAgICAgICBjYXRhbG9kVGVzdC51cGRhdGVMaXN0UHJvZHVjdHMocmVzdWx0LmVsZW1lbnRzKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY2F0YWxvZFRlc3QuYWRkUHJvZHVjdHMocmVzdWx0LmVsZW1lbnRzKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY2F0YWxvZFRlc3Quc3RvcFByZWxvYWRlcigpO1xuXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHQpO1xuXG4gICAgICAgIH1cblxuICAgICAgICBfY29tcGxldGVVcGRhdGVQcnBvZHVjdHMoKSB7XG4gICAgICAgICAgICBsZXQgcmVzdWx0ID0gSlNPTi5wYXJzZSh0aGlzLnJlc3BvbnNlKTtcblxuICAgICAgICAgICAgY2F0YWxvZFRlc3QudXBkYXRlVGl0bGUocmVzdWx0LnRpdGxlKTtcbiAgICAgICAgICAgIGNhdGFsb2RUZXN0LnVwZGF0ZUxpc3RQcm9kdWN0cyhyZXN1bHQuZWxlbWVudHMpO1xuXG4gICAgICAgICAgICBjYXRhbG9kVGVzdC5zdG9wUHJlbG9hZGVyKCk7XG5cbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdCk7XG4gICAgICAgIH1cblxuICAgICAgICBfY29tcGxldGVBZGRQcm9kdWN0cygpIHtcbiAgICAgICAgICAgIGxldCByZXN1bHQgPSBKU09OLnBhcnNlKHRoaXMucmVzcG9uc2UpO1xuXG4gICAgICAgICAgICBjYXRhbG9kVGVzdC5hZGRQcm9kdWN0cyhyZXN1bHQuZWxlbWVudHMpO1xuXG4gICAgICAgICAgICBjYXRhbG9kVGVzdC5zdG9wUHJlbG9hZGVyKCk7XG5cbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIHNlbmQoZGF0YSkge1xuICAgICAgICAgICAgbGV0IHByb2R1Y3RVcGRhdGUgPSB0aGlzLl9wcm9kdWN0VXBkYXRlLFxuICAgICAgICAgICAgICAgIHNlbGYgPSB0aGlzO1xuXG4gICAgICAgICAgICB0aGlzLmFqYXguYWRkRXZlbnRMaXN0ZW5lcihcInByb2dyZXNzXCIsIHRoaXMuX3Byb2dyZXNzLCBmYWxzZSk7XG4gICAgICAgICAgICB0aGlzLmFqYXguYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGlmIChwcm9kdWN0VXBkYXRlID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzZWxmLl9jb21wbGV0ZVVwZGF0ZVBycG9kdWN0cztcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2VsZi5fY29tcGxldGVBZGRQcm9kdWN0cztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KSgpLCBmYWxzZSk7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLl90eXBlLnRvTG93ZXJDYXNlKCkgPT09IFwiZ2V0XCIpIHtcblxuICAgICAgICAgICAgICAgIHRoaXMuYWpheC5vcGVuKHRoaXMuX3R5cGUsIHRoaXMuX3VybCk7XG4gICAgICAgICAgICAgICAgdGhpcy5hamF4LnNlbmQoKTtcblxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiZ2V0XCIpO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLl90eXBlLnRvTG93ZXJDYXNlKCkgPT09IFwicG9zdFwiKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJwb3N0XCIpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkVycm9yXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG5cbiAgICBsZXQgY2F0YWxvZFRlc3QgPSBuZXcgQ2F0YWxvZyhkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNhdGFsb2dcIilbMF0sIFwiY2F0YWxvZ19fdGl0bGVcIiwgXCJjYXRhbG9nX19wcm9kdWN0XCIsIFwicHJlbG9hZGVyXCIpO1xuXG4gICAgbGV0IGZpbHRlciA9IG5ldyBGaWx0ZXIoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5jYXRhbG9nLW5hdl9fY29udHJvbHNcIilbMF0sIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY2F0YWxvZy1maWx0ZXJcIilbMF0sIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY2F0YWxvZ19fbW9yZVwiKVswXSk7XG5cbiAgICBsZXQgaGlzdG9yeU9iaiA9IG5ldyBIaXN0b3J5Q29ucnRvbCgpO1xuXG4gICAgLy/QotC10YHRglxuICAgIC8vIHdpbmRvdy5kaXZBcnJheSA9IGRpdkFycmF5O1xuICAgIHdpbmRvdy5maWx0ZXIgPSBmaWx0ZXI7XG59KSgpO1xuIiwiOyhmdW5jdGlvbigpIHtcclxuICAgIHZhciBoZWFkZXIgPSAkKCdoZWFkZXInKTtcclxuICAgIHZhciBjb250ZW50ID0gJCgnLm1haW4tY29udGVudCcpO1xyXG4gICAgdmFyIGhlYWRlckhlaWdodCA9IGhlYWRlci5oZWlnaHQoKTtcclxuXHJcbiAgICAkKHdpbmRvdykub24oJ2xvYWQgc2Nyb2xsJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgaWYgKCQodGhpcykuc2Nyb2xsVG9wKCkgPiBoZWFkZXJIZWlnaHQpIHtcclxuICAgICAgICAgICAgaGVhZGVyLmFkZENsYXNzKCdmaXhlZCcpO1xyXG4gICAgICAgICAgICBjb250ZW50LmNzcyh7J3BhZGRpbmctdG9wJyA6IGhlYWRlckhlaWdodH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgaGVhZGVyLnJlbW92ZUNsYXNzKCdmaXhlZCcpO1xyXG4gICAgICAgICAgICBjb250ZW50LmNzcyh7J3BhZGRpbmctdG9wJyA6IDB9KVxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59KSgpO1xyXG4iLCI7KGZ1bmN0aW9uKCkge1xyXG4gICAgdmFyIGJ1dHRvbiA9ICQoJy5mb290ZXJfX2NvbC10aXRsZScpO1xyXG5cclxuICAgIGJ1dHRvbi5vbignY2xpY2snLCBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICQodGhpcykuY2xvc2VzdCgnLmZvb3Rlcl9fY29sJykuZmluZCgnLmZvb3Rlcl9fY29sLWxpc3QnKS5zbGlkZVRvZ2dsZSgzMDApO1xyXG4gICAgfSk7XHJcbn0pKCk7XHJcbiIsIjsoZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgaWYgKCQoJy5jYXRhbG9nLW5hdl9fY29udHJvbHMnKS5sZW5ndGgpIHtcclxuXHJcbiAgICAgICAgICAgIHZhciBtZW51TGluayA9ICQoJy5jYXRhbG9nLW5hdl9fY29udHJvbHMtbGluaycpLFxyXG4gICAgICAgICAgICAgICAgbWVudSA9ICQoJy5jYXRhbG9nLW5hdl9fY29udHJvbHMtbGlzdCcpO1xyXG5cclxuICAgICAgICAgICAgdmFyIG1lbnVJdGVtID0gJCgnLmNhdGFsb2ctbmF2X19jb250cm9scy1pdGVtJyksXHJcbiAgICAgICAgICAgICAgICBhY3RpdmVMaW5rID0gJCgnLmNhdGFsb2ctbmF2X19jb250cm9scy1saW5rLmlzLWFjdGl2ZScpLFxyXG4gICAgICAgICAgICAgICAgaG92ZXJCb3ggPSAkKCcuY2F0YWxvZy1uYXZfX2hvdmVyJyksXHJcbiAgICAgICAgICAgICAgICBhY3RpdmVMaW5rUG9zTGVmdCA9IGFjdGl2ZUxpbmsucG9zaXRpb24oKS5sZWZ0LFxyXG4gICAgICAgICAgICAgICAgYWN0aXZlTGlua1Bvc1RvcCA9IGFjdGl2ZUxpbmsucG9zaXRpb24oKS50b3AsXHJcbiAgICAgICAgICAgICAgICBhY3RpdmVMaW5rV2lkdGggPSBhY3RpdmVMaW5rLmlubmVyV2lkdGgoKSxcclxuICAgICAgICAgICAgICAgIGFjdGl2ZUxpbmtIZWlnaHQgPSBhY3RpdmVMaW5rLmlubmVySGVpZ2h0KCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgY2hlY2sgPSBmYWxzZTtcclxuICAgICAgICAgICAgbWVudUxpbmsuaG92ZXIoXHJcbiAgICAgICAgICAgICAgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbmV3TGlua1Bvc0xlZnQgPSAkKHRoaXMpLnBvc2l0aW9uKCkubGVmdCxcclxuICAgICAgICAgICAgICAgICAgICBuZXdMaW5rUG9zVG9wID0gJCh0aGlzKS5wb3NpdGlvbigpLnRvcCxcclxuICAgICAgICAgICAgICAgICAgICBuZXdMaW5rV2lkdGggPSAkKHRoaXMpLmlubmVyV2lkdGgoKSxcclxuICAgICAgICAgICAgICAgICAgICBuZXdMaW5rSGVpZ2h0ID0gJCh0aGlzKS5pbm5lckhlaWdodCgpO1xyXG4gICAgICAgICAgICAgICAgaG92ZXJCb3guY3NzKHsnbGVmdCcgOiBuZXdMaW5rUG9zTGVmdCwgJ3RvcCcgOiBuZXdMaW5rUG9zVG9wLCAnd2lkdGgnIDogbmV3TGlua1dpZHRoLCAnaGVpZ2h0JyA6IG5ld0xpbmtIZWlnaHR9KTtcclxuICAgICAgICAgICAgICAgIGNoZWNrID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAgIGlmIChjaGVjaykge1xyXG4gICAgICAgICAgICAgICAgICAgIGhvdmVyQm94LmNzcyh7J2xlZnQnIDogYWN0aXZlTGlua1Bvc0xlZnQsICd0b3AnIDogYWN0aXZlTGlua1Bvc1RvcCwgJ3dpZHRoJyA6IDAsICdoZWlnaHQnIDogMH0pO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9LCAxMDAwKTtcclxuICAgICAgICAgICAgICAgIGNoZWNrID0gdHJ1ZTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiByZXNpemVQb3MoKSB7XHJcbiAgICAgICAgICAgICAgICBhY3RpdmVMaW5rUG9zTGVmdCA9IGFjdGl2ZUxpbmsucG9zaXRpb24oKS5sZWZ0LFxyXG4gICAgICAgICAgICAgICAgYWN0aXZlTGlua1Bvc1RvcCA9IGFjdGl2ZUxpbmsucG9zaXRpb24oKS50b3AsXHJcbiAgICAgICAgICAgICAgICBhY3RpdmVMaW5rV2lkdGggPSBhY3RpdmVMaW5rLmlubmVyV2lkdGgoKSxcclxuICAgICAgICAgICAgICAgIGFjdGl2ZUxpbmtIZWlnaHQgPSBhY3RpdmVMaW5rLmlubmVySGVpZ2h0KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgaG92ZXJCb3guY3NzKHsnbGVmdCcgOiBhY3RpdmVMaW5rUG9zTGVmdCwgJ3RvcCcgOiBhY3RpdmVMaW5rUG9zVG9wLCAnd2lkdGgnIDogMCwgJ2hlaWdodCcgOiAwfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICQod2luZG93KS5yZXNpemUoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICByZXNpemVQb3MoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJlc2l6ZVBvcygpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuXHJcbn0pKCk7XHJcbiIsIjsoZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgJCgnLmRlbGl2ZXJ5X19mb3JtLWlucHV0JykuZm9jdXNvdXQoZnVuY3Rpb24oKXtcclxuICAgICAgICAgIGlmICgkKHRoaXMpLnZhbCgpICE9PSAnJykge1xyXG4gICAgICAgICAgICAkKHRoaXMpLnBhcmVudCgpLmFkZENsYXNzKCd2YWx1ZScpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICQodGhpcykucGFyZW50KCkucmVtb3ZlQ2xhc3MoJ3ZhbHVlJyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgfSk7XHJcblxyXG59KSgpO1xyXG4iLCI7KGZ1bmN0aW9uKCkge1xyXG5cclxuICAgIGxldCBzY2VuZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzY2VuZScpO1xyXG4gICAgaWYgKHNjZW5lICE9IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIGxldCBwYXJhbGxheEluc3RhbmNlID0gbmV3IFBhcmFsbGF4KHNjZW5lKTtcclxuICAgIH1cclxuXHJcbn0pKCk7XHJcbiIsIjsoZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgY2xhc3MgYmFza2V0UHJvZHVjdCB7XHJcbiAgICAgICAgY29uc3RydWN0b3Ioc2VsZiwgbnVtUHJvZHVjdHMsIG51bU1pbnVzLCBudW1QbHVzLCBkZWwpIHtcclxuICAgICAgICAgICAgaWYgKHNlbGYgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuX3NlbGYgPSBzZWxmO1xyXG4gICAgICAgICAgICB0aGlzLl9udW1Qcm9kdWN0cyA9IHRoaXMuX3NlbGYucXVlcnlTZWxlY3RvckFsbCgnLicgKyBudW1Qcm9kdWN0cylbMF07XHJcbiAgICAgICAgICAgIHRoaXMuX251bU1pbnVzID0gdGhpcy5fc2VsZi5xdWVyeVNlbGVjdG9yQWxsKCcuJyArIG51bU1pbnVzKVswXTtcclxuICAgICAgICAgICAgdGhpcy5fbnVtUGx1cyA9IHRoaXMuX3NlbGYucXVlcnlTZWxlY3RvckFsbCgnLicgKyBudW1QbHVzKVswXTtcclxuICAgICAgICAgICAgdGhpcy5fZGVsID0gdGhpcy5fc2VsZi5xdWVyeVNlbGVjdG9yQWxsKCcuJyArIGRlbClbMF07XHJcbiAgICAgICAgICAgIHRoaXMuX3NpemUgPSArdGhpcy5fbnVtUHJvZHVjdHMuaW5uZXJIVE1MO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZ2V0IHZhbHVlUHJvZHVjdHMoKSB7XHJcbiAgICAgICAgICAgIGxldCBzZWxmID0gdGhpcztcclxuICAgICAgICAgICAgcmV0dXJuIHNlbGYuX3NpemU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBfZGVsZXRlKCkge1xyXG4gICAgICAgICAgICB0aGlzLl9zZWxmLmNsYXNzTGlzdC5hZGQoJ3JlbW92ZScpO1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpPT57XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9zZWxmLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgcHJvZHVjdHNDb250YWluZXIuX3N1bVZhbHVlcygpO1xyXG4gICAgICAgICAgICB9LCA1NTApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgX251bUFkZCgpIHtcclxuICAgICAgICAgICAgdGhpcy5fc2l6ZSArPSAxO1xyXG4gICAgICAgICAgICB0aGlzLl9udW1Qcm9kdWN0cy5pbm5lckhUTUwgPSB0aGlzLl9zaXplO1xyXG4gICAgICAgICAgICBwcm9kdWN0c0NvbnRhaW5lci5fc3VtVmFsdWVzKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBfbnVtRGVsKCkge1xyXG4gICAgICAgICAgICB0aGlzLl9zaXplIC09IDE7XHJcbiAgICAgICAgICAgIHRoaXMuX251bVByb2R1Y3RzLmlubmVySFRNTCA9IHRoaXMuX3NpemU7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9zaXplIDw9IDEpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3NpemUgPSAxO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbnVtUHJvZHVjdHMuaW5uZXJIVE1MID0gMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX251bVByb2R1Y3RzLmlubmVySFRNTCA9IHRoaXMuX3NpemU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcHJvZHVjdHNDb250YWluZXIuX3N1bVZhbHVlcygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaW5pdCgpIHtcclxuICAgICAgICAgICAgbGV0IHNlbGYgPSB0aGlzO1xyXG5cclxuICAgICAgICAgICAgc2VsZi5fZGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBzZWxmLl9kZWxldGUoKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBzZWxmLl9udW1QbHVzLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBzZWxmLl9udW1BZGQoKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBzZWxmLl9udW1NaW51cy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgc2VsZi5fbnVtRGVsKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcblxyXG4gICAgbGV0IHByb2R1Y3RzQXJyID0gW107XHJcbiAgICBsZXQgcHJvZHVjdHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYmFza2V0LXByb2R1Y3RzX19wcm9kdWN0Jyk7XHJcblxyXG4gICAgcHJvZHVjdHMuZm9yRWFjaChmdW5jdGlvbihpdGVtKSB7XHJcbiAgICAgICAgbGV0IHByb2R1Y3QgPSBuZXcgYmFza2V0UHJvZHVjdChpdGVtLCAnYmFza2V0LXByb2R1Y3RzX19wcm9kdWN0LXNpemUtbnVtJywgJ2Jhc2tldC1wcm9kdWN0c19fcHJvZHVjdC1udW0tY2hhbmdlLS1taW51cycsICdiYXNrZXQtcHJvZHVjdHNfX3Byb2R1Y3QtbnVtLWNoYW5nZS0tcGx1cycsICdiYXNrZXQtcHJvZHVjdHNfX3Byb2R1Y3QtcmVtb3ZlJyk7XHJcbiAgICAgICAgcHJvZHVjdHNBcnIucHVzaChpdGVtKTtcclxuICAgICAgICBwcm9kdWN0LmluaXQoKTtcclxuICAgICAgICBwcm9kdWN0LnZhbHVlUHJvZHVjdHM7XHJcbiAgICB9KVxyXG4gICAgd2luZG93LnByb2R1Y3RzQXJyID0gcHJvZHVjdHNBcnI7XHJcblxyXG4gICAgY2xhc3MgcHJvZHVjdHNDb250cm9sIHtcclxuICAgICAgICBjb25zdHJ1Y3RvcihzZWxmLCBwcm9kdWN0c1NpemUsIHByb2R1Y3RzUmVtb3ZlLCBwcm9kdWN0cykge1xyXG4gICAgICAgICAgICBpZiAoc2VsZiA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5fc2VsZiA9IHNlbGY7XHJcbiAgICAgICAgICAgIHRoaXMuX3Byb2R1Y3RzU2l6ZSA9IHRoaXMuX3NlbGYucXVlcnlTZWxlY3RvckFsbCgnLicgKyBwcm9kdWN0c1NpemUpWzBdO1xyXG4gICAgICAgICAgICB0aGlzLl9wcm9kdWN0c1JlbW92ZSA9IHRoaXMuX3NlbGYucXVlcnlTZWxlY3RvckFsbCgnLicgKyBwcm9kdWN0c1JlbW92ZSlbMF07XHJcbiAgICAgICAgICAgIHRoaXMuX3Byb2R1Y3RzID0gcHJvZHVjdHNBcnI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBfZGVsZXRlQWxsKCkge1xyXG4gICAgICAgICAgICB0aGlzLl9wcm9kdWN0cy5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pIHtcclxuICAgICAgICAgICAgICAgIGl0ZW0uY2xhc3NMaXN0LmFkZCgncmVtb3ZlJyk7XHJcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpPT57XHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgIH0sIDU1MCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB0aGlzLl9wcm9kdWN0c1NpemUuaW5uZXJIVE1MID0gMDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIF9zdW1WYWx1ZXMoKSB7XHJcbiAgICAgICAgICAgIGxldCB2YWx1ZSA9IDA7XHJcblxyXG4gICAgICAgICAgICB0aGlzLl9zZWxmLnF1ZXJ5U2VsZWN0b3JBbGwoJy5iYXNrZXQtcHJvZHVjdHNfX3Byb2R1Y3Qtc2l6ZS1udW0nKS5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pIHtcclxuICAgICAgICAgICAgICAgIHZhbHVlICs9ICtpdGVtLmlubmVySFRNTDtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLl9wcm9kdWN0c1NpemUuaW5uZXJIVE1MID0gdmFsdWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpbml0KCkge1xyXG4gICAgICAgICAgICBsZXQgc2VsZiA9IHRoaXM7XHJcblxyXG4gICAgICAgICAgICBzZWxmLl9wcm9kdWN0c1JlbW92ZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgc2VsZi5fZGVsZXRlQWxsKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgc2VsZi5fcHJvZHVjdHNTaXplLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBzZWxmLl9zdW1WYWx1ZXMoKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBwcm9kdWN0c0NvbnRhaW5lci5fc3VtVmFsdWVzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGxldCBwcm9kdWN0c0NvbnRhaW5lciA9IG5ldyBwcm9kdWN0c0NvbnRyb2woZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmJhc2tldC1wcm9kdWN0cycpWzBdLCAncHJvZHVjdHMtbnVtJywgJ2Jhc2tldC1wcm9kdWN0c19fcmVtb3ZlLXByb2R1Y3RzJywgcHJvZHVjdHNBcnIpO1xyXG4gICAgcHJvZHVjdHNDb250YWluZXIuaW5pdCgpO1xyXG5cclxufSkoKTtcclxuIiwiOyhmdW5jdGlvbigpIHtcclxuICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcuc2xpZGUtaW5mb19fYnV0dG9uJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcuc2xpZGUtaW5mbycpLmZpbmQoJy5zbGlkZS1pbmZvX19idXR0b24nKS50b2dnbGVDbGFzcygnaXMtYWN0aXZlJyk7XHJcbiAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcuc2xpZGUtaW5mbycpLmZpbmQoJy5zbGlkZS1pbmZvX19jb250ZW50Jykuc2xpZGVUb2dnbGUoMzAwKTtcclxuICAgIH0pO1xyXG59KSgpO1xyXG4iXX0=
