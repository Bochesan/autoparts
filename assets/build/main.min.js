"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var s=0;s<e.length;s++){var i=e[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,e,s){return e&&_defineProperties(t.prototype,e),s&&_defineProperties(t,s),t}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _possibleConstructorReturn(t,e){return!e||"object"!==_typeof(e)&&"function"!=typeof e?_assertThisInitialized(t):e}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var s=0;s<e.length;s++){var i=e[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,e,s){return e&&_defineProperties(t.prototype,e),s&&_defineProperties(t,s),t}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var s=0;s<e.length;s++){var i=e[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,e,s){return e&&_defineProperties(t.prototype,e),s&&_defineProperties(t,s),t}$(document).on("click",".button--basket",function(){$(this).hasClass("animate")||($(this).addClass("animate"),$(this).addClass("button--check"),setTimeout(function(){$(this).removeClass("button--check"),$(this).removeClass("animate")}.bind(this),2e3))}),window.addEventListener("load",function(){$(".hr-sect").length&&$(".hr-pagination__step").click(function(){var t=$(this);if(!t.hasClass("is-active")){t.closest(".hr-sect").find(".hr-pagination__step").removeClass("is-active").removeClass("button"),t.addClass("is-active").addClass("button"),t.attr("data-index");var e=t.closest(".hr-sect").find(".hr-slider-slide");e.removeClass("is-active"),e.each(function(t,e){$(this).attr("data-index")==$(".hr-pagination__step.is-active").attr("data-index")&&$(this).addClass("is-active")})}})}),function(){var t=document.getElementById("menu-button");t.addEventListener("click",function(){t.classList.toggle("opened")}),window.onresize=function(){t.classList.remove("opened")},window.onscroll=function(){t.classList.remove("opened")}}(),function(){var t=function(){function n(t,e,s,i){if(_classCallCheck(this,n),void 0===t)return!1;this._self=t,this._title=this._self.querySelectorAll("."+e)[0],this._products=this._self.querySelectorAll("."+s)[0],this.preloader=this._self.querySelectorAll("."+i)[0]}return _createClass(n,[{key:"_cleanProducts",value:function(){this._products.innerHTML=""}},{key:"playPreloader",value:function(){this.preloader.classList.add("preloader--active")}},{key:"stopPreloader",value:function(){this.preloader.classList.remove("preloader--active")}},{key:"updateTitle",value:function(t){this._title.innerHTML=t,this._title.setAttribute("data-name",t)}},{key:"updateListProducts",value:function(t){this._products.innerHTML=t}},{key:"addProducts",value:function(t){this._products.insertAdjacentHTML("beforeend",t)}}]),n}(),e=function(){function i(t,e,s){return _classCallCheck(this,i),void 0!==t&&(void 0!==e&&(void 0!==s&&(this._containerBrands=t,this._brandItem=this._containerBrands.querySelectorAll(".catalog-nav__controls-link"),this._containerFilter=e,this._filterItem=this._containerFilter.querySelectorAll(".catalog-filter__col-btn"),this.searchItem=this._containerFilter.querySelectorAll(".catalog-filter__form")[0],this._activeClass="is-active",this._sortTypeAsc={class:"sort-down",dataSort:"asc"},this._sortTypeDesc={class:"sort-up",dataSort:"desc"},this._containerMore=s,this.timeOutAjax,void this.init())))}return _createClass(i,[{key:"_cleanClassFilterAll",value:function(){var s=this;this._filterItem.forEach(function(t){var e=t.closest(".catalog-filter__col");t.classList.remove(s._activeClass),t.classList.remove(s._sortTypeAsc.class),e.removeAttribute("data-sort")})}},{key:"_addClassFilter",value:function(t){var e=t.closest(".catalog-filter__col");t.classList.add(this._activeClass),t.classList.add(this._sortTypeAsc.class),e.setAttribute("data-sort",this._sortTypeAsc.dataSort)}},{key:"_toogleSort",value:function(t){var e=t.closest(".catalog-filter__col");t.classList.contains(this._sortTypeAsc.class)?(t.classList.remove(this._sortTypeAsc.class),t.classList.add(this._sortTypeDesc.class),e.setAttribute("data-sort",this._sortTypeDesc.dataSort)):(t.classList.remove(this._sortTypeDesc.class),t.classList.add(this._sortTypeAsc.class),e.setAttribute("data-sort",this._sortTypeAsc.dataSort))}},{key:"_selectBrand",value:function(t){t.classList.contains("is-active")||(this._brandItem.forEach(function(t){t.classList.remove("is-active")}),t.classList.add("is-active"))}},{key:"_queryFormation",value:function(t,e){clearTimeout(this.timeOutAjax);var s,i,n,a=[],o=this.searchItem.getElementsByTagName("input")[0];this._brandItem.forEach(function(t){t.classList.contains("is-active")&&(a.push("brand="+t.getAttribute("data-brand")),i=t.getAttribute("data-brand"))}),this._filterItem.forEach(function(t){var e=t.closest(".catalog-filter__col");t.classList.contains("is-active")&&(a.push("sort="+e.getAttribute("data-sort")),a.push("sortType="+e.getAttribute("data-filter")))}),""!==o.value&&a.push("search="+o.value),t&&this._moreReset(),s="page="+this._containerMore.querySelectorAll(".catalog__more-button")[0].getAttribute("data-page"),n="?"+a.join("&"),n=encodeURI(n),u.setHistory(n,i);var r=new l("test.json"+n+"&"+s,"get",t);void 0===e?r.send():(c.playPreloader(),this.timeOutAjax=setTimeout(function(){r.send()},e)),console.log(n)}},{key:"_moreReset",value:function(){this._containerMore.querySelectorAll(".catalog__more-button")[0].setAttribute("data-page","1")}},{key:"_morePage",value:function(){var t=this._containerMore.querySelectorAll(".catalog__more-button")[0],e=t.getAttribute("data-page");e=Number(e)+1,t.setAttribute("data-page",e)}},{key:"moreToggle",value:function(t){var e=this._containerMore.querySelectorAll(".catalog__more-button")[0];console.log(t),t?e.classList.add("button--hidden"):e.classList.remove("button--hidden")}},{key:"updateStateFilterFromUrl",value:function(e){var s=this;void 0!==e[0]?this._brandItem.forEach(function(t){t.getAttribute("data-brand")===e[0][1]&&s._selectBrand(t)}):this._selectBrand(this._brandItem[0]),void 0!==e[2]?this._filterItem.forEach(function(t){t.closest(".catalog-filter__col").getAttribute("data-filter")===e[2][1]&&(s._cleanClassFilterAll(),s._addClassFilter(t),t.closest(".catalog-filter__col").setAttribute("data-sort",e[1][1]),"asc"===e[1][1]?(t.classList.add(s._sortTypeAsc.class),t.classList.remove(s._sortTypeDesc.class)):(t.classList.remove(s._sortTypeAsc.class),t.classList.add(s._sortTypeDesc.class)))}):this._filterItem.forEach(function(t){"name"===t.closest(".catalog-filter__col").getAttribute("data-filter")&&(s._cleanClassFilterAll(),s._addClassFilter(t))}),void 0!==e[3]?(console.log(e[3][1]),s.searchItem.getElementsByTagName("input")[0].value=e[3][1]):s.searchItem.getElementsByTagName("input")[0].value=""}},{key:"init",value:function(){var e=this;this._filterItem.forEach(function(t){t.addEventListener("click",function(){t.classList.contains(e._activeClass)?e._toogleSort(this):(e._cleanClassFilterAll(),e._addClassFilter(this)),e._queryFormation(!0)})}),this._brandItem.forEach(function(t){t.addEventListener("click",function(t){t.preventDefault(),this.classList.contains("is-active")||(e._selectBrand(this),e._queryFormation(!0))})}),this.searchItem.getElementsByTagName("input")[0].addEventListener("input",function(){e._queryFormation(!0,1e3)}),this._containerMore.querySelectorAll(".catalog__more-button")[0].addEventListener("click",function(t){t.preventDefault(),e._morePage(),e._queryFormation(!1)})}}]),i}(),s=function(){function t(){_classCallCheck(this,t),this._url,this._historyObj=window.history,this.init()}return _createClass(t,[{key:"setHistory",value:function(t,e){e===this._historyObj.state?this._historyObj.replaceState(e,e,t):this._historyObj.pushState(e,e,t)}},{key:"_readHistory",value:function(){var t=document.location.href,e=decodeURI(t).split("?"),s=[],i=[];void 0!==e[1]?((s=e[1].split("&")).forEach(function(t){i.push(t.split("="))}),console.log(i),n.updateStateFilterFromUrl(i),new l("test.json?"+s+"&page=1","get",!0).send()):(n.updateStateFilterFromUrl([]),new l("test.json","get",!0).send())}},{key:"init",value:function(){window.addEventListener("popstate",this._readHistory)}}]),t}(),l=function(){function i(t,e,s){_classCallCheck(this,i),this._url=t,this._type=e,this._productUpdate=s,this.ajax=new XMLHttpRequest}return _createClass(i,[{key:"_progress",value:function(){c.playPreloader()}},{key:"_completeUpdatePrpoducts",value:function(){var t=JSON.parse(this.response);c.updateTitle(t.title),c.updateListProducts(t.elements),c.stopPreloader(),console.log(t)}},{key:"_completeAddProducts",value:function(){var t=JSON.parse(this.response);n.moreToggle(t.end),c.addProducts(t.elements),c.stopPreloader(),console.log(t)}},{key:"send",value:function(t){var e=this._productUpdate,s=this;this.ajax.addEventListener("progress",this._progress,!1),this.ajax.addEventListener("load",!0===e?s._completeUpdatePrpoducts:s._completeAddProducts,!1),"get"===this._type.toLowerCase()?(this.ajax.open(this._type,this._url),this.ajax.send(),console.log("get")):"post"===this._type.toLowerCase()?console.log("post"):console.log("Error")}}]),i}(),c=new t(document.querySelectorAll(".catalog")[0],"catalog__title","catalog__product","preloader"),n=new e(document.querySelectorAll(".catalog-nav__controls")[0],document.querySelectorAll(".catalog-filter")[0],document.querySelectorAll(".catalog__more")[0]),u=new s;window.filter=n}(),$("[data-fancybox]").fancybox({hash:!1}),function(){var t=$("header"),e=$(".main-content"),s=t.height();$(window).on("load scroll",function(){$(this).scrollTop()>s?(t.addClass("fixed"),e.css({"padding-top":s})):(t.removeClass("fixed"),e.css({"padding-top":0}))})}(),$(".footer__col-title").on("click",function(t){t.preventDefault(),$(this).closest(".footer__col").find(".footer__col-list").slideToggle(300)}),$(".catalog-filter__form input[type='submit']").click(function(t){t.preventDefault()}),function(){var e=function(){function n(t,e,s,i){_classCallCheck(this,n),this._self=t,this._inputTag=this._self.getElementsByTagName("input")[0],this._classError=e||"",this._classFocus=s||"",this._classNoEmety=i||"",this._validInputIndex=!1}return _createClass(n,[{key:"_validationNoEmety",value:function(t){return""!==t.value||(this._error(),!1)}},{key:"_error",value:function(){var t=this._classError,e=this._self;t&&(e.classList.add(t),setTimeout(function(){e.classList.remove(t)},1500))}},{key:"focusIn",value:function(){var t=this._classFocus;t&&this._self.classList.add(t)}},{key:"focusOut",value:function(){var t=this._classFocus;t&&this._self.classList.remove(t)}},{key:"noEmetyInputTest",value:function(){var t=this._classNoEmety;t&&(""!==this._inputTag.value?this._self.classList.add(t):this._self.classList.remove(t))}},{key:"validation",value:function(){switch(this._inputTag.getAttribute("data-valid")){case"noEmety":this._validInputIndex=this._validationNoEmety(this._inputTag);break;default:this._validInputIndex=!0}}},{key:"input",get:function(){return this._inputTag}},{key:"inputType",get:function(){return this._inputTag.getAttribute("data-valid")}},{key:"valValidation",get:function(){return this._validInputIndex}}]),n}(),a=function(t){function a(t,e,s,i){var n;return _classCallCheck(this,a),(n=_possibleConstructorReturn(this,_getPrototypeOf(a).call(this,t,e,s,i)))._inputTag=n._self.getElementsByTagName("textarea")[0],n}return _inherits(a,e),a}(),o=function(t){function a(t,e,s,i){var n;return _classCallCheck(this,a),(n=_possibleConstructorReturn(this,_getPrototypeOf(a).call(this,t,e,s,i)))._inputTag=n._self.getElementsByTagName("input")[0],n}return _inherits(a,e),_createClass(a,[{key:"_validationEmail",value:function(t){return 0===t.value.toLowerCase().search(/^[0-9a-z]([\.-]?\w+)*@[0-9a-z]([\.-]?[0-9a-z])*(\.[0-9a-z]{2,4})+$/)||(this._error(),!1)}},{key:"_validationPhone",value:function(t){return""!==t.value&&-1===t.value.indexOf("_")||(this._error(),!1)}},{key:"maskPhoneFunctional",value:function(){void 0===this._phoneMask&&(this._phoneMask=textMaskCore.createTextMaskInputElement({inputElement:this._inputTag,mask:["+","7","(",/[1-9]/,/\d/,/\d/,")"," ",/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/,/\d/]})),this._phoneMask.update()}},{key:"validation",value:function(){switch(this._inputTag.getAttribute("data-valid")){case"noEmety":this._validInputIndex=this._validationNoEmety(this._inputTag);break;case"email":this._validInputIndex=this._validationEmail(this._inputTag);break;case"phone":this._validInputIndex=this._validationPhone(this._inputTag);break;default:this._validInputIndex=!0}}}]),a}(),r=function(){function s(t,e){_classCallCheck(this,s),this._self=t,this._classError=e||"",this._inputTag=this._self.getElementsByTagName("input")[0],this._validInputIndex=!1}return _createClass(s,[{key:"_error",value:function(){var t=this._classError,e=this._self;t&&(e.classList.add(t),setTimeout(function(){e.classList.remove(t)},1500))}},{key:"_validationСhecked",value:function(t){return!!t.checked||(this._error(),!1)}},{key:"validation",value:function(){switch(this._inputTag.getAttribute("data-valid")){case"checked":this._validInputIndex=this._validationСhecked(this._inputTag);break;default:this._validInputIndex=!0}}},{key:"input",get:function(){return this._inputTag}},{key:"inputType",get:function(){return this._inputTag.getAttribute("data-valid")}},{key:"valValidation",get:function(){return this._validInputIndex}}]),s}(),s=function(){function s(t,e){_classCallCheck(this,s),this._self=t,this._classInputContainer=e.classInputContainer||"",this._classInputError=e.classInputError||"",this._classInputFocus=e.classInputFocus||"",this._classInputNoEmety=e.classInputNoEmety||"",this._classTextareaContainer=e.classTextareaContainer||"",this._classTextareaError=e.classTextareaError||"",this._classTextareaFocus=e.classTextareaFocus||"",this._classTextareaNoEmety=e.classTextareaNoEmety||"",this._classCheckboxContainer=e.classCheckboxContainer||"",this._classCheckboxError=e.classCheckboxError||"",this._inputsObjectArray=[],this._textareaObjectArray=[],this._checkboxObjectArray=[],this._validFormIndex=!1}return _createClass(s,[{key:"_ajaxSand",value:function(){var e=new XMLHttpRequest,s=this._self,t=s.getAttribute("type")||"post",i=s.getAttribute("action")||window.location.href;if(e.open(t,i),"post"===t.toLowerCase()){e.addEventListener("load",function(){var t=s.closest(".formContainer");200===e.status?(t.classList.add("formContainer--done"),setTimeout(function(){s.reset(),t.classList.remove("formContainer--done")},3e3)):(t.classList.add("formContainer--error"),setTimeout(function(){s.reset(),t.classList.remove("formContainer--error")},3e3))});var n=new FormData(this._self);e.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),e.send(n)}}},{key:"_ajaxError",value:function(){console.log("Форма не прошла валидацию")}},{key:"submit",value:function(){var e=this;e._validFormIndex=!0,this._inputsObjectArray.forEach(function(t){t.validation(),!1===t.valValidation&&(e._validFormIndex=t.valValidation)}),this._textareaObjectArray.forEach(function(t){t.validation(),!1===t.valValidation&&(e._validFormIndex=t.valValidation)}),this._checkboxObjectArray.forEach(function(t){t.validation(),!1===t.valValidation&&(e._validFormIndex=t.valValidation)}),!0===e._validFormIndex?this._ajaxSand():this._ajaxError()}},{key:"init",value:function(){for(var t=this._self.querySelectorAll("."+this._classInputContainer),e=this._self.querySelectorAll("."+this._classTextareaContainer),s=this._self.querySelectorAll("."+this._classCheckboxContainer),i=this,n=0;n<t.length;++n)this._inputsObjectArray.push(new o(t[n],this._classInputError,this._classInputFocus,this._classInputNoEmety));for(n=0;n<e.length;++n)this._textareaObjectArray.push(new a(e[n],this._classTextareaError,this._classTextareaFocus,this._classTextareaNoEmety));for(n=0;n<s.length;++n)this._checkboxObjectArray.push(new r(s[n],this._classCheckboxError));this._inputsObjectArray.forEach(function(t){t.input.addEventListener("focusout",function(){t.validation(),t.noEmetyInputTest(),t.focusOut()}),t.input.addEventListener("focusin",function(){t.focusIn()}),"phone"===t.inputType&&t.input.addEventListener("input",function(){t.maskPhoneFunctional()})}),this._textareaObjectArray.forEach(function(t){t.input.addEventListener("focusout",function(){t.validation(),t.noEmetyInputTest(),t.focusOut()}),t.input.addEventListener("focusin",function(){t.focusIn()})}),this._self.addEventListener("submit",function(t){t.preventDefault(),i.submit()})}}]),s}(),t=document.querySelectorAll(".formYv");void 0!==t&&t.forEach(function(t){new s(t,{classInputContainer:"formYv__input",classInputError:"formYv__input--error",classInputFocus:"formYv__input--focus",classInputNoEmety:"formYv__input--noEmety",classTextareaContainer:"formYv__textarea",classTextareaError:"formYv__textarea--error",classTextareaFocus:"formYv__textarea--focus",classTextareaNoEmety:"formYv__textarea--noEmety",classCheckboxContainer:"formYv__checkbox",classCheckboxError:"formYv__checkbox--error"}).init()})}(),window.addEventListener("load",function(){if($(".catalog-nav__controls").length){var t=function(){i=s.position().left,a=s.position().top,s.innerWidth(),s.innerHeight(),n.css({left:i,top:a,width:0,height:0})},e=$(".catalog-nav__controls-link"),s=($(".catalog-nav__controls-list"),$(".catalog-nav__controls-item"),$(".catalog-nav__controls-link.is-active")),n=$(".catalog-nav__hover"),i=s.position().left,a=s.position().top,o=(s.innerWidth(),s.innerHeight(),!1);e.hover(function(){var t=$(this).position().left,e=$(this).position().top,s=$(this).innerWidth(),i=$(this).innerHeight();n.css({left:t,top:e,width:s,height:i}),o=!1},function(){setTimeout(function(){o&&n.css({left:i,top:a,width:0,height:0})},1e3),o=!0}),$(window).resize(function(){t()}),t()}}),window.addEventListener("load",function(){$(".delivery__form-input").focusout(function(){""!==$(this).val()?$(this).parent().addClass("value"):$(this).parent().removeClass("value")})}),function(){var t=document.getElementById("scene");if(null!=t)new Parallax(t)}(),document.addEventListener("DOMContentLoaded",function(){$(document).on("click",".button--buy",function(t){t.preventDefault(),$(".i-popup").addClass("opened")}),$(document).on("click",".i-popup__button, .i-popup__overlay",function(t){t.preventDefault(),$(".i-popup").removeClass("opened")})}),function(){var e=function(){function a(t,e,s,i,n){if(_classCallCheck(this,a),void 0===t)return!1;this._self=t,this._numProducts=this._self.querySelectorAll("."+e)[0],this._numMinus=this._self.querySelectorAll("."+s)[0],this._numPlus=this._self.querySelectorAll("."+i)[0],this._del=this._self.querySelectorAll("."+n)[0],this._size=+this._numProducts.innerHTML,this.init()}return _createClass(a,[{key:"_delete",value:function(){var t=this;this._self.classList.add("remove"),setTimeout(function(){t._self.remove(),s._sumValues()},550)}},{key:"_numAdd",value:function(){this._size+=1,this._numProducts.innerHTML=this._size,s._sumValues()}},{key:"_numDel",value:function(){this._size-=1,this._numProducts.innerHTML=this._size,this._size<=1?(this._size=1,this._numProducts.innerHTML=1):this._numProducts.innerHTML=this._size,s._sumValues()}},{key:"init",value:function(){var t=this;t._del.addEventListener("click",function(){t._delete()}),t._numPlus.addEventListener("click",function(){t._numAdd()}),t._numMinus.addEventListener("click",function(){t._numDel()})}},{key:"valueProducts",get:function(){return this._size}}]),a}(),a=[];document.querySelectorAll(".basket-products__product").forEach(function(t){new e(t,"basket-products__product-size-num","basket-products__product-num-change--minus","basket-products__product-num-change--plus","basket-products__product-remove");a.push(t)}),window.productsArr=a;var s=new(function(){function n(t,e,s,i){if(_classCallCheck(this,n),void 0===t)return!1;this._self=t,this._productsSize=this._self.querySelectorAll("."+e)[0],this._productsRemove=this._self.querySelectorAll("."+s)[0],this._products=a,this.init()}return _createClass(n,[{key:"_deleteAll",value:function(){this._products.forEach(function(t){t.classList.add("remove"),setTimeout(function(){t.remove()},550)}),this._productsSize.innerHTML=0}},{key:"_sumValues",value:function(){var e=0;this._self.querySelectorAll(".basket-products__product-size-num").forEach(function(t){e+=+t.innerHTML}),this._productsSize.innerHTML=e}},{key:"init",value:function(){var t=this;t._productsRemove.addEventListener("click",function(){t._deleteAll()}),t._productsSize.addEventListener("click",function(){t._sumValues()}),this._sumValues()}}]),n}())(document.querySelectorAll(".basket-products")[0],"products-num","basket-products__remove-products",a)}(),$(document).on("click",".slide-info__button",function(){$(this).closest(".slide-info").find(".slide-info__button").toggleClass("is-active"),$(this).closest(".slide-info").find(".slide-info__content").slideToggle(300)});
//# sourceMappingURL=../maps/main.min.js.map
