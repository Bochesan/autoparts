"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var s=0;s<e.length;s++){var o=e[s];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _createClass(t,e,s){return e&&_defineProperties(t.prototype,e),s&&_defineProperties(t,s),t}$(document).on("click",".product-row__button",function(){$(this).hasClass("animate")||($(this).addClass("animate"),$(this).addClass("button--check"),setTimeout(function(){$(this).removeClass("button--check"),$(this).removeClass("animate")}.bind(this),2e3))}),function(){var t=document.getElementById("menu-button");t.addEventListener("click",function(){t.classList.toggle("opened")}),window.onresize=function(){t.classList.remove("opened")},window.onscroll=function(){t.classList.remove("opened")}}(),function(){var t=function(){function o(t,e,s){_classCallCheck(this,o),this._self=t,this._title=this._self.querySelectorAll("."+e)[0],this._products=this._self.querySelectorAll("."+s)[0]}return _createClass(o,[{key:"_cleanProducts",value:function(){this._products.innerHTML=""}},{key:"_playPreloader",value:function(){}},{key:"_stopPreloader",value:function(){}},{key:"updateTitle",value:function(t){this._title.innerHTML=t}},{key:"updateListProducts",value:function(t){this._products.innerHTML=t}},{key:"addProducts",value:function(t){this._products.insertAdjacentHTML("beforeend",t)}}]),o}(),e=function(){function s(t,e){_classCallCheck(this,s),this._containerBrands=t,this._brandItem=this._containerBrands.querySelectorAll(".catalog-nav__controls-link"),this._containerFilter=e,this._filterItem=this._containerFilter.querySelectorAll(".catalog-filter__col-btn"),this.searchItem=this._containerFilter.querySelectorAll(".catalog-filter__form")[0],this._activeClass="is-active",this._sortTypeAsc={class:"sort-down",dataSort:"asc"},this._sortTypeDesc={class:"sort-up",dataSort:"desc"},this.init()}return _createClass(s,[{key:"_cleanClassFilterAll",value:function(){var s=this;this._filterItem.forEach(function(t){var e=t.closest(".catalog-filter__col");t.classList.remove(s._activeClass),t.classList.remove(s._sortTypeAsc.class),e.removeAttribute("data-sort")})}},{key:"_addClassFilter",value:function(t){var e=t.closest(".catalog-filter__col");t.classList.add(this._activeClass),t.classList.add(this._sortTypeAsc.class),e.setAttribute("data-sort",this._sortTypeAsc.dataSort)}},{key:"_toogleSort",value:function(t){var e=t.closest(".catalog-filter__col");t.classList.contains(this._sortTypeAsc.class)?(t.classList.remove(this._sortTypeAsc.class),t.classList.add(this._sortTypeDesc.class),e.setAttribute("data-sort",this._sortTypeDesc.dataSort)):(t.classList.remove(this._sortTypeDesc.class),t.classList.add(this._sortTypeAsc.class),e.setAttribute("data-sort",this._sortTypeAsc.dataSort))}},{key:"_selectBrand",value:function(t){t.classList.contains("is-active")||(this._brandItem.forEach(function(t){t.classList.remove("is-active")}),t.classList.add("is-active"))}},{key:"_queryFormation",value:function(){}},{key:"init",value:function(){var e=this;this._filterItem.forEach(function(t){t.addEventListener("click",function(){t.classList.contains(e._activeClass)?e._toogleSort(this):(e._cleanClassFilterAll(),e._addClassFilter(this)),e._queryFormation()})}),this._brandItem.forEach(function(t){t.addEventListener("click",function(t){t.preventDefault(),e._selectBrand(this)})}),this.searchItem.getElementsByTagName("input")[0].addEventListener("input",function(){console.log(this.value),e._queryFormation()})}}]),s}(),s=function(){function s(t,e){_classCallCheck(this,s),this._url=t,this._type=e,this.ajax=new XMLHttpRequest}return _createClass(s,[{key:"_progress",value:function(){}},{key:"_complete",value:function(){var t=JSON.parse(this.response);console.log(t)}},{key:"send",value:function(t){this.ajax.addEventListener("progress",this._progress,!1),this.ajax.addEventListener("load",this._complete,!1),"get"===this._type.toLowerCase()?(this.ajax.open(this._type,this._url),this.ajax.send(),console.log("get")):"post"===this._type.toLowerCase()?console.log("post"):console.log("Error")}}]),s}(),o=(new t(document.querySelectorAll(".catalog")[0],"catalog__title","catalog__container"),new s("test.json","get")),i=new e(document.querySelectorAll(".catalog-nav__controls")[0],document.querySelectorAll(".catalog-filter")[0]);o.send({data:1}),window.filter=i}(),$(".footer__col-title").on("click",function(t){t.preventDefault(),$(this).closest(".footer__col").find(".footer__col-list").slideToggle(300)}),window.addEventListener("load",function(){var t=$(".catalog-nav__controls-link"),e=($(".catalog-nav__controls-list"),$(".catalog-nav__controls-item"),$(".catalog-nav__controls-link.is-active")),i=$(".catalog-nav__hover"),s=e.position().left,o=e.position().top,n=(e.innerWidth(),e.innerHeight(),!1);function a(){s=e.position().left,o=e.position().top,e.innerWidth(),e.innerHeight(),i.css({left:s,top:o,width:0,height:0})}t.hover(function(){var t=$(this).position().left,e=$(this).position().top,s=$(this).innerWidth(),o=$(this).innerHeight();i.css({left:t,top:e,width:s,height:o}),n=!1},function(){setTimeout(function(){n&&i.css({left:s,top:o,width:0,height:0})},1e3),n=!0}),$(window).resize(function(){a()}),a()}),function(){var t=document.getElementById("scene");new Parallax(t)}(),$(document).on("click",".product-row__info-button",function(){$(this).closest(".product-row").find(".product-row__info-button").toggleClass("is-active"),$(this).closest(".product-row").find(".product-row__info-content").slideToggle(300)});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFkZFRvQmFza2V0LmpzIiwiYnVyZ2VyLmpzIiwiY2F0YWxvZ1VwZGF0ZUNsYXNzLmpzIiwiZm9vdGVyTWVudS5qcyIsImhvdmVyUm9sbGVyLmpzIiwicGFyYWxsYXguanMiLCJzaG93TW9yZS5qcyJdLCJuYW1lcyI6WyIkIiwiZG9jdW1lbnQiLCJvbiIsInRoaXMiLCJoYXNDbGFzcyIsImFkZENsYXNzIiwic2V0VGltZW91dCIsInJlbW92ZUNsYXNzIiwiYmluZCIsIm1lbnVCdG4iLCJnZXRFbGVtZW50QnlJZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJ3aW5kb3ciLCJvbnJlc2l6ZSIsInJlbW92ZSIsIm9uc2Nyb2xsIiwiQ2F0YWxvZyIsInNlbGYiLCJ0aXRsZUNsYXNzIiwicHJvZHVjdHNDb250YWluZXJDbGFzcyIsIl9jbGFzc0NhbGxDaGVjayIsIl9zZWxmIiwiX3RpdGxlIiwicXVlcnlTZWxlY3RvckFsbCIsIl9wcm9kdWN0cyIsIl9jcmVhdGVDbGFzcyIsImtleSIsInZhbHVlIiwiaW5uZXJIVE1MIiwidGl0bGUiLCJwcm9kdWN0cyIsImluc2VydEFkamFjZW50SFRNTCIsIkZpbHRlciIsImNvbnRhaW5lckJyYW5kcyIsImNvbnRhaW5lckZpbHRlciIsIl9jb250YWluZXJCcmFuZHMiLCJfYnJhbmRJdGVtIiwiX2NvbnRhaW5lckZpbHRlciIsIl9maWx0ZXJJdGVtIiwic2VhcmNoSXRlbSIsIl9hY3RpdmVDbGFzcyIsIl9zb3J0VHlwZUFzYyIsImNsYXNzIiwiZGF0YVNvcnQiLCJfc29ydFR5cGVEZXNjIiwiaW5pdCIsImZvckVhY2giLCJpdGVtIiwicGFyZW50IiwiY2xvc2VzdCIsInJlbW92ZUF0dHJpYnV0ZSIsImFkZCIsInNldEF0dHJpYnV0ZSIsImNvbnRhaW5zIiwiX3Rvb2dsZVNvcnQiLCJfY2xlYW5DbGFzc0ZpbHRlckFsbCIsIl9hZGRDbGFzc0ZpbHRlciIsIl9xdWVyeUZvcm1hdGlvbiIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJfc2VsZWN0QnJhbmQiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsImNvbnNvbGUiLCJsb2ciLCJBamF4R2V0UHJvZHVjdHMiLCJ1cmwiLCJ0eXBlIiwiX3VybCIsIl90eXBlIiwiYWpheCIsIlhNTEh0dHBSZXF1ZXN0IiwicmVzdWx0IiwiSlNPTiIsInBhcnNlIiwicmVzcG9uc2UiLCJkYXRhIiwiX3Byb2dyZXNzIiwiX2NvbXBsZXRlIiwidG9Mb3dlckNhc2UiLCJvcGVuIiwic2VuZCIsImFqYXhDb25uZWN0IiwiZmlsdGVyIiwiZSIsImZpbmQiLCJzbGlkZVRvZ2dsZSIsIm1lbnVMaW5rIiwiYWN0aXZlTGluayIsImhvdmVyQm94IiwiYWN0aXZlTGlua1Bvc0xlZnQiLCJwb3NpdGlvbiIsImxlZnQiLCJhY3RpdmVMaW5rUG9zVG9wIiwidG9wIiwiY2hlY2siLCJpbm5lcldpZHRoIiwiaW5uZXJIZWlnaHQiLCJyZXNpemVQb3MiLCJjc3MiLCJ3aWR0aCIsImhlaWdodCIsImhvdmVyIiwibmV3TGlua1Bvc0xlZnQiLCJuZXdMaW5rUG9zVG9wIiwibmV3TGlua1dpZHRoIiwibmV3TGlua0hlaWdodCIsInJlc2l6ZSIsInNjZW5lIiwiUGFyYWxsYXgiLCJ0b2dnbGVDbGFzcyJdLCJtYXBwaW5ncyI6Im1aQUNJQSxFQUFFQyxVQUFVQyxHQUFHLFFBQVMsdUJBQXdCLFdBQ3ZDRixFQUFFRyxNQUFNQyxTQUFTLGFBQ2xCSixFQUFFRyxNQUFNRSxTQUFTLFdBQ2pCTCxFQUFFRyxNQUFNRSxTQUFTLGlCQUNqQkMsV0FBVyxXQUNQTixFQUFFRyxNQUFNSSxZQUFZLGlCQUNwQlAsRUFBRUcsTUFBTUksWUFBWSxZQUN0QkMsS0FBS0wsTUFBTyxRQ1J6QixXQUNHLElBQUlNLEVBQVVSLFNBQVNTLGVBQWUsZUFFdENELEVBQVFFLGlCQUFpQixRQUFTLFdBQzlCRixFQUFRRyxVQUFVQyxPQUFPLFlBRzdCQyxPQUFPQyxTQUFXLFdBQ2ROLEVBQVFHLFVBQVVJLE9BQU8sV0FFN0JGLE9B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TXlGLFdBQVdDLEtBQ3BDWSxFQUFnQnpHLEVBQUVHLE1BQU15RixXQUFXRyxJQUNuQ1csRUFBZTFHLEVBQUVHLE1BQU04RixhQUN2QlUsRUFBZ0IzRyxFQUFFRyxNQUFNK0YsY0FDNUJSLEVBQVNVLElBQUksQ0FBQ1AsS0FBU1csRUFBZ0JULElBQVFVLEVBQWVKLE1BQVVLLEVBQWNKLE9BQVdLLElBQ2pHWCxHQUFRLEdBRVYsV0FDRTFGLFdBQVcsV0FDTDBGLEdBQ0ZOLEVBQVNVLElBQUksQ0FBQ1AsS0FBU0YsRUFBbUJJLElBQVFELEVBQWtCTyxNQUFVLEVBQUdDLE9BQVcsS0FFN0YsS0FDSE4sR0FBUSxJQWFaaEcsRUFBRWMsUUFBUThGLE9BQU8sV0FDYlQsTUFFSkEsTUMvQ1AsV0FDRyxJQUFJVSxFQUFRNUcsU0FBU1MsZUFBZSxTQUNiLElBQUlvRyxTQUFTRCxHQUZ2QyxHQ0NHN0csRUFBRUMsVUFBVUMsR0FBRyxRQUFTLDRCQUE2QixXQUNqREYsRUFBRUcsTUFBTWdELFFBQVEsZ0JBQWdCbUMsS0FBSyw2QkFBNkJ5QixZQUFZLGFBQzlFL0csRUFBRUcsTUFBTWdELFFBQVEsZ0JBQWdCbUMsS0FBSyw4QkFBOEJDLFlBQVkiLCJmaWxlIjoibWFpbi5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyI7KGZ1bmN0aW9uKCkge1xyXG4gICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5wcm9kdWN0LXJvd19fYnV0dG9uJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgaWYgKCEkKHRoaXMpLmhhc0NsYXNzKCdhbmltYXRlJykpIHtcclxuICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnYW5pbWF0ZScpO1xyXG4gICAgICAgICAgICAkKHRoaXMpLmFkZENsYXNzKFwiYnV0dG9uLS1jaGVja1wiKTtcclxuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoXCJidXR0b24tLWNoZWNrXCIpO1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcygnYW5pbWF0ZScpO1xyXG4gICAgICAgICAgICB9LmJpbmQodGhpcyksIDIwMDApO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59KSgpO1xyXG4iLCI7KGZ1bmN0aW9uKCkge1xyXG4gICAgbGV0IG1lbnVCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWVudS1idXR0b24nKTtcclxuXHJcbiAgICBtZW51QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgbWVudUJ0bi5jbGFzc0xpc3QudG9nZ2xlKCdvcGVuZWQnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHdpbmRvdy5vbnJlc2l6ZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIG1lbnVCdG4uY2xhc3NMaXN0LnJlbW92ZSgnb3BlbmVkJyk7XHJcbiAgICB9XHJcbiAgICB3aW5kb3cub25zY3JvbGwgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICBtZW51QnRuLmNsYXNzTGlzdC5yZW1vdmUoJ29wZW5lZCcpO1xyXG4gICAgfVxyXG59KSgpO1xyXG4iLCI7KGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgY2xhc3MgQ2F0YWxvZyB7XHJcbiAgICAgICAgY29uc3RydWN0b3Ioc2VsZiwgdGl0bGVDbGFzcywgcHJvZHVjdHNDb250YWluZXJDbGFzcyl7XHJcbiAgICAgICAgICAgIHRoaXMuX3NlbGYgPSBzZWxmO1xyXG4gICAgICAgICAgICB0aGlzLl90aXRsZSA9IHRoaXMuX3NlbGYucXVlcnlTZWxlY3RvckFsbChcIi5cIiArIHRpdGxlQ2xhc3MpWzBdO1xyXG4gICAgICAgICAgICB0aGlzLl9wcm9kdWN0cyA9IHRoaXMuX3NlbGYucXVlcnlTZWxlY3RvckFsbChcIi5cIiArIHByb2R1Y3RzQ29udGFpbmVyQ2xhc3MpWzBdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgX2NsZWFuUHJvZHVjdHMoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3Byb2R1Y3RzLmlubmVySFRNTCA9IFwiXCI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBfcGxheVByZWxvYWRlcigpIHtcclxuICAgICAgICAgICAgLy8g0KHQtNC10LvQsNGC0Ywg0LfQsNC/0YPRgdC6INC/0YDQtdC70L7Rg9C00LXRgNCwXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBfc3RvcFByZWxvYWRlcigpIHtcclxuICAgICAgICAgICAgLy8g0KHQtNC10LvQsNGC0Ywg0L7RgdGC0LDQvdC+0LLQutGDINC/0YDQtdC70L7Rg9C00LXRgNCwXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB1cGRhdGVUaXRsZSh0aXRsZSkge1xyXG4gICAgICAgICAgICB0aGlzLl90aXRsZS5pbm5lckhUTUwgPSB0aXRsZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHVwZGF0ZUxpc3RQcm9kdWN0cyhwcm9kdWN0cykge1xyXG4gICAgICAgICAgICB0aGlzLl9wcm9kdWN0cy5pbm5lckhUTUwgPSBwcm9kdWN0cztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGFkZFByb2R1Y3RzKHByb2R1Y3RzKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3Byb2R1Y3RzLmluc2VydEFkamFjZW50SFRNTChcImJlZm9yZWVuZFwiLCBwcm9kdWN0cyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNsYXNzIEZpbHRlciB7XHJcbiAgICAgICAgY29uc3RydWN0b3IoY29udGFpbmVyQnJhbmRzLCBjb250YWluZXJGaWx0ZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5fY29udGFpbmVyQnJhbmRzID0gY29udGFpbmVyQnJhbmRzO1xyXG4gICAgICAgICAgICB0aGlzLl9icmFuZEl0ZW0gPSB0aGlzLl9jb250YWluZXJCcmFuZHMucXVlcnlTZWxlY3RvckFsbChcIi5jYXRhbG9nLW5hdl9fY29udHJvbHMtbGlua1wiKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX2NvbnRhaW5lckZpbHRlciA9IGNvbnRhaW5lckZpbHRlcjtcclxuICAgICAgICAgICAgdGhpcy5fZmlsdGVySXRlbSA9IHRoaXMuX2NvbnRhaW5lckZpbHRlci5xdWVyeVNlbGVjdG9yQWxsKFwiLmNhdGFsb2ctZmlsdGVyX19jb2wtYnRuXCIpO1xyXG4gICAgICAgICAgICB0aGlzLnNlYXJjaEl0ZW0gPSB0aGlzLl9jb250YWluZXJGaWx0ZXIucXVlcnlTZWxlY3RvckFsbChcIi5jYXRhbG9nLWZpbHRlcl9fZm9ybVwiKVswXTtcclxuICAgICAgICAgICAgdGhpcy5fYWN0aXZlQ2xhc3MgPSBcImlzLWFjdGl2ZVwiO1xyXG4gICAgICAgICAgICB0aGlzLl9zb3J0VHlwZUFzYyA9IHtcclxuICAgICAgICAgICAgICAgIGNsYXNzOiBcInNvcnQtZG93blwiLFxyXG4gICAgICAgICAgICAgICAgZGF0YVNvcnQ6IFwiYXNjXCJcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgdGhpcy5fc29ydFR5cGVEZXNjID0ge1xyXG4gICAgICAgICAgICAgICAgY2xhc3M6IFwic29ydC11cFwiLFxyXG4gICAgICAgICAgICAgICAgZGF0YVNvcnQ6IFwiZGVzY1wiXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuaW5pdCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgX2NsZWFuQ2xhc3NGaWx0ZXJBbGwoKSB7XHJcbiAgICAgICAgICAgIGxldCBzZWxmID0gdGhpcztcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX2ZpbHRlckl0ZW0uZm9yRWFjaChmdW5jdGlvbihpdGVtKXtcclxuICAgICAgICAgICAgICAgIGxldCBwYXJlbnQgPSBpdGVtLmNsb3Nlc3QoXCIuY2F0YWxvZy1maWx0ZXJfX2NvbFwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbS5jbGFzc0xpc3QucmVtb3ZlKHNlbGYuX2FjdGl2ZUNsYXNzKTtcclxuICAgICAgICAgICAgICAgICAgICBpdGVtLmNsYXNzTGlzdC5yZW1vdmUoc2VsZi5fc29ydFR5cGVBc2MuY2xhc3MpO1xyXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudC5yZW1vdmVBdHRyaWJ1dGUoXCJkYXRhLXNvcnRcIik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIHBhcmVudFtcImRhdGEtc29ydFwiXSA9IHRoaXMuX3NvcnRUeXBlQXNjLmRhdGFTb3J0O1xyXG5cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBfYWRkQ2xhc3NGaWx0ZXIoaXRlbSkge1xyXG4gICAgICAgICAgICBsZXQgcGFyZW50ID0gaXRlbS5jbG9zZXN0KFwiLmNhdGFsb2ctZmlsdGVyX19jb2xcIik7XHJcblxyXG4gICAgICAgICAgICBpdGVtLmNsYXNzTGlzdC5hZGQodGhpcy5fYWN0aXZlQ2xhc3MpO1xyXG4gICAgICAgICAgICBpdGVtLmNsYXNzTGlzdC5hZGQodGhpcy5fc29ydFR5cGVBc2MuY2xhc3MpO1xyXG5cclxuICAgICAgICAgICAgcGFyZW50LnNldEF0dHJpYnV0ZShcImRhdGEtc29ydFwiLCB0aGlzLl9zb3J0VHlwZUFzYy5kYXRhU29ydCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBfdG9vZ2xlU29ydChpdGVtKSB7XHJcbiAgICAgICAgICAgIGxldCBwYXJlbnQgPSBpdGVtLmNsb3Nlc3QoXCIuY2F0YWxvZy1maWx0ZXJfX2NvbFwiKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChpdGVtLmNsYXNzTGlzdC5jb250YWlucyh0aGlzLl9zb3J0VHlwZUFzYy5jbGFzcykpIHtcclxuICAgICAgICAgICAgICAgIGl0ZW0uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9zb3J0VHlwZUFzYy5jbGFzcyk7XHJcbiAgICAgICAgICAgICAgICBpdGVtLmNsYXNzTGlzdC5hZGQodGhpcy5fc29ydFR5cGVEZXNjLmNsYXNzKTtcclxuXHJcbiAgICAgICAgICAgICAgICBwYXJlbnQuc2V0QXR0cmlidXRlKFwiZGF0YS1zb3J0XCIsIHRoaXMuX3NvcnRUeXBlRGVzYy5kYXRhU29ydCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpdGVtLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fc29ydFR5cGVEZXNjLmNsYXNzKTtcclxuICAgICAgICAgICAgICAgIGl0ZW0uY2xhc3NMaXN0LmFkZCh0aGlzLl9zb3J0VHlwZUFzYy5jbGFzcyk7XHJcblxyXG4gICAgICAgICAgICAgICAgcGFyZW50LnNldEF0dHJpYnV0ZShcImRhdGEtc29ydFwiLCB0aGlzLl9zb3J0VHlwZUFzYy5kYXRhU29ydCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBfc2VsZWN0QnJhbmQoaXRlbSkge1xyXG4gICAgICAgICAgICBpZiAoIWl0ZW0uY2xhc3NMaXN0LmNvbnRhaW5zKFwiaXMtYWN0aXZlXCIpKXtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2JyYW5kSXRlbS5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pIHtcclxuICAgICAgICAgICAgICAgICAgICBpdGVtLmNsYXNzTGlzdC5yZW1vdmUoXCJpcy1hY3RpdmVcIik7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGl0ZW0uY2xhc3NMaXN0LmFkZChcImlzLWFjdGl2ZVwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgX3F1ZXJ5Rm9ybWF0aW9uKCkge1xyXG4gICAgICAgICAgICAvL9Cc0LXRgtC+0LQg0YTQvtGA0LzQuNGA0L7QstCw0L3QuNGPIGdldCDQt9Cw0L/RgNC+0YHQsFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaW5pdCgpIHtcclxuICAgICAgICAgICAgbGV0IHNlbGYgPSB0aGlzO1xyXG4gICAgICAgICAgICB0aGlzLl9maWx0ZXJJdGVtLmZvckVhY2goZnVuY3Rpb24oaXRlbSl7XHJcbiAgICAgICAgICAgICAgICBpdGVtLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbS5jbGFzc0xpc3QuY29udGFpbnMoc2VsZi5fYWN0aXZlQ2xhc3MpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX3Rvb2dsZVNvcnQodGhpcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8v0JLRi9C30L7QsiDQvNC10YLQvtC00LAg0YTQvtGA0LzQuNGA0L7QstCw0L3QuNGPIEdldCDQt9Cw0L/RgNC+0YHQsFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9xdWVyeUZvcm1hdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX2NsZWFuQ2xhc3NGaWx0ZXJBbGwoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fYWRkQ2xhc3NGaWx0ZXIodGhpcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8v0JLRi9C30L7QsiDQvNC10YLQvtC00LAg0YTQvtGA0LzQuNGA0L7QstCw0L3QuNGPIEdldCDQt9Cw0L/RgNC+0YHQsFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9xdWVyeUZvcm1hdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX2JyYW5kSXRlbS5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pIHtcclxuICAgICAgICAgICAgICAgIGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uKGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLl9zZWxlY3RCcmFuZCh0aGlzKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pXHJcblxyXG4gICAgICAgICAgICB0aGlzLnNlYXJjaEl0ZW0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJpbnB1dFwiKVswXS5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLnZhbHVlKTtcclxuICAgICAgICAgICAgICAgIC8v0JLRi9C30L7QsiDQvNC10YLQvtC00LAg0YTQvtGA0LzQuNGA0L7QstCw0L3QuNGPIEdldCDQt9Cw0L/RgNC+0YHQsFxyXG4gICAgICAgICAgICAgICAgc2VsZi5fcXVlcnlGb3JtYXRpb24oKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG5cclxuICAgIGNsYXNzIEFqYXhHZXRQcm9kdWN0cyB7XHJcbiAgICAgICAgY29uc3RydWN0b3IodXJsLCB0eXBlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3VybCA9IHVybDtcclxuICAgICAgICAgICAgdGhpcy5fdHlwZSA9IHR5cGU7XHJcbiAgICAgICAgICAgIHRoaXMuYWpheCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgX3Byb2dyZXNzKCkge1xyXG4gICAgICAgICAgICAvLyDQodC00LXQu9Cw0YLRjCDQtNC10LnRgdGC0LLQuNC1INCy0L4g0LLRgNC10LzRjyDQv9GA0L7RhtC10YHRgdCwINC30LDQs9GA0YPQt9C60LhcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIF9jb21wbGV0ZSgpIHtcclxuICAgICAgICAgICAgLy8gaWYgKHRoaXMuc3RhdHVzICE9IDIwMCkge1xyXG4gICAgICAgICAgICAvLyAgIC8vINC+0LHRgNCw0LHQvtGC0LDRgtGMINC+0YjQuNCx0LrRg1xyXG4gICAgICAgICAgICAvLyAgIGNvbnNvbGUubG9nKCB0aGlzLnN0YXR1cyArICc6ICcgKyB0aGlzLnN0YXR1c1RleHQgKTsgLy8g0L/RgNC40LzQtdGAINCy0YvQstC+0LTQsDogNDA0OiBOb3QgRm91bmRcclxuICAgICAgICAgICAgLy8gfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gICAvLyDQstGL0LLQtdGB0YLQuCDRgNC10LfRg9C70YzRgtCw0YJcclxuICAgICAgICAgICAgLy8gICBsZXQgb2JqID0gSlNPTi5wYXJzZSh0aGlzLnJlc3BvbnNlKVxyXG4gICAgICAgICAgICAvLyAgIGNvbnNvbGUubG9nKCBvYmogKTsgLy8gcmVzcG9uc2VUZXh0IC0tINGC0LXQutGB0YIg0L7RgtCy0LXRgtCwLlxyXG4gICAgICAgICAgICBsZXQgcmVzdWx0ID0gSlNPTi5wYXJzZSh0aGlzLnJlc3BvbnNlKTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdCk7XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc2VuZChkYXRhKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYWpheC5hZGRFdmVudExpc3RlbmVyKFwicHJvZ3Jlc3NcIiwgdGhpcy5fcHJvZ3Jlc3MsIGZhbHNlKTtcclxuICAgICAgICAgICAgdGhpcy5hamF4LmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsIHRoaXMuX2NvbXBsZXRlLCBmYWxzZSk7XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5fdHlwZS50b0xvd2VyQ2FzZSgpID09PSBcImdldFwiKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5hamF4Lm9wZW4odGhpcy5fdHlwZSwgdGhpcy5fdXJsKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuYWpheC5zZW5kKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJnZXRcIik7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5fdHlwZS50b0xvd2VyQ2FzZSgpID09PSBcInBvc3RcIikge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJwb3N0XCIpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJFcnJvclwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG4gICAgbGV0IGNhdGFsb2RUZXN0ID0gbmV3IENhdGFsb2coZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5jYXRhbG9nXCIpWzBdLCBcImNhdGFsb2dfX3RpdGxlXCIsIFwiY2F0YWxvZ19fY29udGFpbmVyXCIpO1xyXG4gICAgbGV0IGFqYXhDb25uZWN0ID0gbmV3IEFqYXhHZXRQcm9kdWN0cyhcInRlc3QuanNvblwiLCBcImdldFwiKTtcclxuICAgIGxldCBmaWx0ZXIgPSBuZXcgRmlsdGVyKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY2F0YWxvZy1uYXZfX2NvbnRyb2xzXCIpWzBdLCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNhdGFsb2ctZmlsdGVyXCIpWzBdKTtcclxuXHJcbiAgICBhamF4Q29ubmVjdC5zZW5kKHtkYXRhOiAxfSk7XHJcblxyXG4gICAgLy/QotC10YHRglxyXG4gICAgLy8gd2luZG93LmRpdkFycmF5ID0gZGl2QXJyYXk7XHJcbiAgICB3aW5kb3cuZmlsdGVyID0gZmlsdGVyO1xyXG59KSgpO1xyXG4iLCI7KGZ1bmN0aW9uKCkge1xyXG4gICAgdmFyIGJ1dHRvbiA9ICQoJy5mb290ZXJfX2NvbC10aXRsZScpO1xyXG5cclxuICAgIGJ1dHRvbi5vbignY2xpY2snLCBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICQodGhpcykuY2xvc2VzdCgnLmZvb3Rlcl9fY29sJykuZmluZCgnLmZvb3Rlcl9fY29sLWxpc3QnKS5zbGlkZVRvZ2dsZSgzMDApO1xyXG4gICAgfSk7XHJcbn0pKCk7XHJcbiIsIjsoZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgdmFyIG1lbnVMaW5rID0gJCgnLmNhdGFsb2ctbmF2X19jb250cm9scy1saW5rJyksXHJcbiAgICAgICAgICAgIG1lbnUgPSAkKCcuY2F0YWxvZy1uYXZfX2NvbnRyb2xzLWxpc3QnKTtcclxuXHJcbiAgICAgICAgdmFyIG1lbnVJdGVtID0gJCgnLmNhdGFsb2ctbmF2X19jb250cm9scy1pdGVtJyksXHJcbiAgICAgICAgICAgIGFjdGl2ZUxpbmsgPSAkKCcuY2F0YWxvZy1uYXZfX2NvbnRyb2xzLWxpbmsuaXMtYWN0aXZlJyksXHJcbiAgICAgICAgICAgIGhvdmVyQm94ID0gJCgnLmNhdGFsb2ctbmF2X19ob3ZlcicpLFxyXG4gICAgICAgICAgICBhY3RpdmVMaW5rUG9zTGVmdCA9IGFjdGl2ZUxpbmsucG9zaXRpb24oKS5sZWZ0LFxyXG4gICAgICAgICAgICBhY3RpdmVMaW5rUG9zVG9wID0gYWN0aXZlTGluay5wb3NpdGlvbigpLnRvcCxcclxuICAgICAgICAgICAgYWN0aXZlTGlua1dpZHRoID0gYWN0aXZlTGluay5pbm5lcldpZHRoKCksXHJcbiAgICAgICAgICAgIGFjdGl2ZUxpbmtIZWlnaHQgPSBhY3RpdmVMaW5rLmlubmVySGVpZ2h0KCk7XHJcblxyXG4gICAgICAgIHZhciBjaGVjayA9IGZhbHNlO1xyXG4gICAgICAgIG1lbnVMaW5rLmhvdmVyKFxyXG4gICAgICAgICAgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHZhciBuZXdMaW5rUG9zTGVmdCA9ICQodGhpcykucG9zaXRpb24oKS5sZWZ0LFxyXG4gICAgICAgICAgICAgICAgbmV3TGlua1Bvc1RvcCA9ICQodGhpcykucG9zaXRpb24oKS50b3AsXHJcbiAgICAgICAgICAgICAgICBuZXdMaW5rV2lkdGggPSAkKHRoaXMpLmlubmVyV2lkdGgoKSxcclxuICAgICAgICAgICAgICAgIG5ld0xpbmtIZWlnaHQgPSAkKHRoaXMpLmlubmVySGVpZ2h0KCk7XHJcbiAgICAgICAgICAgIGhvdmVyQm94LmNzcyh7J2xlZnQnIDogbmV3TGlua1Bvc0xlZnQsICd0b3AnIDogbmV3TGlua1Bvc1RvcCwgJ3dpZHRoJyA6IG5ld0xpbmtXaWR0aCwgJ2hlaWdodCcgOiBuZXdMaW5rSGVpZ2h0fSk7XHJcbiAgICAgICAgICAgIGNoZWNrID0gZmFsc2U7XHJcbiAgICAgICAgfSxcclxuICAgICAgICAgIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgaWYgKGNoZWNrKSB7XHJcbiAgICAgICAgICAgICAgICBob3ZlckJveC5jc3MoeydsZWZ0JyA6IGFjdGl2ZUxpbmtQb3NMZWZ0LCAndG9wJyA6IGFjdGl2ZUxpbmtQb3NUb3AsICd3aWR0aCcgOiAwLCAnaGVpZ2h0JyA6IDB9KTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sIDEwMDApO1xyXG4gICAgICAgICAgICBjaGVjayA9IHRydWU7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gcmVzaXplUG9zKCkge1xyXG4gICAgICAgICAgICBhY3RpdmVMaW5rUG9zTGVmdCA9IGFjdGl2ZUxpbmsucG9zaXRpb24oKS5sZWZ0LFxyXG4gICAgICAgICAgICBhY3RpdmVMaW5rUG9zVG9wID0gYWN0aXZlTGluay5wb3NpdGlvbigpLnRvcCxcclxuICAgICAgICAgICAgYWN0aXZlTGlua1dpZHRoID0gYWN0aXZlTGluay5pbm5lcldpZHRoKCksXHJcbiAgICAgICAgICAgIGFjdGl2ZUxpbmtIZWlnaHQgPSBhY3RpdmVMaW5rLmlubmVySGVpZ2h0KCk7XHJcblxyXG4gICAgICAgICAgICBob3ZlckJveC5jc3MoeydsZWZ0JyA6IGFjdGl2ZUxpbmtQb3NMZWZ0LCAndG9wJyA6IGFjdGl2ZUxpbmtQb3NUb3AsICd3aWR0aCcgOiAwLCAnaGVpZ2h0JyA6IDB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICQod2luZG93KS5yZXNpemUoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHJlc2l6ZVBvcygpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJlc2l6ZVBvcygpO1xyXG4gICAgfSk7XHJcblxyXG5cclxufSkoKTtcclxuIiwiOyhmdW5jdGlvbigpIHtcclxuICAgIGxldCBzY2VuZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzY2VuZScpO1xyXG4gICAgbGV0IHBhcmFsbGF4SW5zdGFuY2UgPSBuZXcgUGFyYWxsYXgoc2NlbmUpO1xyXG5cclxuICAgIFxyXG59KSgpO1xyXG4iLCI7KGZ1bmN0aW9uKCkge1xyXG4gICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5wcm9kdWN0LXJvd19faW5mby1idXR0b24nLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5wcm9kdWN0LXJvdycpLmZpbmQoJy5wcm9kdWN0LXJvd19faW5mby1idXR0b24nKS50b2dnbGVDbGFzcygnaXMtYWN0aXZlJyk7XHJcbiAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcucHJvZHVjdC1yb3cnKS5maW5kKCcucHJvZHVjdC1yb3dfX2luZm8tY29udGVudCcpLnNsaWRlVG9nZ2xlKDMwMCk7XHJcbiAgICB9KTtcclxufSkoKTtcclxuIl19
